/*! File: core_base.js | Build: 2012-09-22-14:33:28 | Revision: 46060 */
(function(){var a={VERSION:"$version$",RELEASE:"$release$",PATH:(function(){var b=document.getElementsByTagName("script");return b[b.length-1].src.replace(/\/[^\/]+\/[^\/]+$/,"/");})(),namespace:function(g,c){var b=g.split("."),d=0,f;if(g.indexOf(".")==0){d=1;c=c||QW;}c=c||window;for(;f=b[d++];){if(!c[f]){c[f]={};}c=c[f];}return c;},getScript:function(g,b,f){f=f||{};var i=document.getElementsByTagName("head")[0],d=document.createElement("script"),c=false;d.src=g;if(f.charset){d.charset=f.charset;}d.onerror=d.onload=d.onreadystatechange=function(){if(!c&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){c=true;b&&b();d.onerror=d.onload=d.onreadystatechange=null;i.removeChild(d);}};i.appendChild(d);},error:function(c,b){b=b||Error;throw new b(c);}};a.Wrap=function(b){this.core=b;};window.BB=a;})();
/*! File: module.h.js | Build: 2012-09-22-14:33:28 | Revision: 46060 */
(function(){var g={},j=function(m,n,l){for(var k in n){if(l||!(k in m)){m[k]=n[k];}}return m;},d=function(k){return !!k&&k.constructor==Object;},b=BB.getScript,i=[],c=false;function f(){var k=i[0];if(!c&&k){c=true;i.splice(0,1);function m(){k.loadStatus=2;var n=k.__callbacks;for(var p=0;p<n.length;p++){n[p]();}c=false;f();}var l=k.loadedChecker;if(l&&l()){m();}else{b(k.url.replace(/^\/\//,BB.PATH),m);}}}var a={provideDomains:[BB],provide:function(l,n){if(typeof l=="string"){var k=a.provideDomains;for(var m=0;m<k.length;m++){if(!k[m][l]){k[m][l]=n;}}}else{if(d(l)){for(m in l){a.provide(m,l[m]);}}}},addConfig:function(k,n){if(typeof k=="string"){var m=j({},n);m.moduleName=k;m.__callbacks=[];g[k]=m;}else{if(d(k)){for(var l in k){a.addConfig(l,k[l]);}}}},use:function(u,n){var p={},q=[],t=u.split(","),C,B,z,E,F;while(t.length){var s={};for(C=0;C<t.length;C++){var r=t[C];if(!r||BB[r]){continue;}if(!p[r]){if(!g[r]){throw"Unknown module: "+r;}if(!g[r].loadStatus!=2){var l=g[r].loadedChecker;if(l&&l()){continue;}p[r]=g[r];}var m=["requires","use"];for(B=0;B<m.length;B++){var v=g[r][m[B]];if(v){var x=v.split(",");for(z=0;z<x.length;z++){s[x[z]]=0;}}}}}t=[];for(C in s){t.push(C);}}for(C in p){q.push(p[C]);}for(C=0,E=q.length;C<E;C++){if(!q[C].requires){continue;}for(B=C+1;B<E;B++){if(new RegExp("(^|,)"+q[B].moduleName+"(,|$)").test(q[C].requires)){var D=q[B];q.splice(B,1);q.splice(C,0,D);C--;break;}}}var A=-1,G=-1;for(C=0;C<q.length;C++){F=q[C];if(!F.loadStatus&&(new RegExp("(^|,)"+F.moduleName+"(,|$)").test(u))){A=C;}if(F.loadStatus==1&&(new RegExp("(^|,)"+F.moduleName+"(,|$)").test(u))){G=C;}}if(A!=-1){q[A].__callbacks.push(n);}else{if(G!=-1){q[G].__callbacks.push(n);}else{n();return;}}for(C=0;C<q.length;C++){F=q[C];if(!F.loadStatus){F.loadStatus=1;i.push(F);}}f();}};BB.ModuleH=a;j(BB,a);})();
/*! File: core_env.js | Build: 2012-09-22-14:33:29 | Revision: 46060 */
BB.Env=function(){var d=window.navigator,j=d.userAgent.toLowerCase();var c={platform:d.platform,msie:/msie/.test(j)&&!/opera/.test(j),opera:/opera/.test(j),safari:/webkit/.test(j)&&!/chrome/.test(j),firefox:/firefox/.test(j),chrome:/chrome/.test(j)};var a="";for(var g in c){if(c[g]){a=g;}}if(c.safari){a="version";}c.version=(j.match(new RegExp("(?:"+a+")[\\/: ]([\\d.]+)"))||[])[1];c.ie=c.msie;c.ie6=c.msie&&parseInt(c.version)==6;c.ie7=c.msie&&parseInt(c.version)==7;c.ie8=c.msie&&parseInt(c.version)==8;try{c.maxthon=c.msie&&!!external.max_version;}catch(f){}return c;}();if(BB.Env.ie){try{document.execCommand("BackgroundImageCache",false,true);}catch(e){}
/*! File: string.h.js | Build: 2012-09-22-14:33:29 | Revision: 46060 */
}(function(){var a={trim:function(b){return b.replace(/^[\s\xa0\u3000]+|[\u3000\xa0\s]+$/g,"");},mulReplace:function(d,b){for(var c=0;c<b.length;c++){d=d.replace(b[c][0],b[c][1]);}return d;},format:function(d,c){var b=arguments;return d.replace(/\{(\d+)\}/ig,function(g,f){var i=b[(f|0)+1];return i==null?"":i;});},tmpl:function(c,b){return c.replace(/\{\$(\w+)\}/g,function(f,d){return b[d];});},contains:function(c,b){return c.indexOf(b)>-1;},dbc2sbc:function(b){return a.mulReplace(b,[[/[\uff01-\uff5e]/g,function(c){return String.fromCharCode(c.charCodeAt(0)-65248);}],[/\u3000/g," "],[/\u3002/g,"."]]);},byteLen:function(b){return b.replace(/[^\x00-\xff]/g,"--").length;},subByte:function(d,b,c){if(a.byteLen(d)<=b){return d;}c=c||"";b-=a.byteLen(c);return d=d.substr(0,b).replace(/([^\x00-\xff])/g,"$1 ").substr(0,b).replace(/[^\x00-\xff]$/,"").replace(/([^\x00-\xff]) /g,"$1")+c;},camelize:function(b){return b.replace(/\-(\w)/ig,function(d,c){return c.toUpperCase();});},decamelize:function(b){return b.replace(/[A-Z]/g,function(c){return"-"+c.toLowerCase();});},encode4Js:function(b){return a.mulReplace(b,[[/\\/g,"\\u005C"],[/"/g,"\\u0022"],[/'/g,"\\u0027"],[/\//g,"\\u002F"],[/\r/g,"\\u000A"],[/\n/g,"\\u000D"],[/\t/g,"\\u0009"]]);},encode4Http:function(b){return b.replace(/[\u0000-\u0020\u0080-\u00ff\s"'#\/\|\\%<>\[\]\{\}\^~;\?\:@=&]/g,function(c){return encodeURIComponent(c);});},encode4Html:function(c){var b=document.createElement("pre");var d=document.createTextNode(c);b.appendChild(d);return b.innerHTML;},encode4HtmlValue:function(b){return a.encode4Html(b).replace(/"/g,"&quot;").replace(/'/g,"&#039;");},decode4Html:function(b){var c=document.createElement("div");c.innerHTML=a.stripTags(b);return c.childNodes[0]?c.childNodes[0].nodeValue+"":"";},stripTags:function(b){return b.replace(/<[^>]*>/gi,"");},evalJs:function(b,c){return new Function("opts",b)(c);},evalExp:function(b,c){return new Function("opts","return "+b+";")(c);},queryUrl:function(b,d){b=b.replace(/^[^?=]*\?/ig,"").split("#")[0];var c={};b.replace(/(^|&)([^&=]+)=([^&]*)/g,function(g,f,i,j){i=decodeURIComponent(i);j=decodeURIComponent(j);if(!(i in c)){c[i]=/\[\]$/.test(i)?[j]:j;}else{if(c[i] instanceof Array){c[i].push(j);}else{c[i]=[c[i],j];}}});return d?c[d]:c;}};BB.StringH=a;})();
/*! File: object.h.js | Build: 2012-09-22-14:33:29 | Revision: 46060 */
(function(){var b=BB.StringH.encode4Js;var a={getType:function(d){var c=typeof d;if(c=="object"){if(d==null){c="null";}else{if("__type__" in d){c=d.__type__;}else{if("core" in d){c="wrap";}else{if("items" in d){c="collection";}else{if(d.window==d){c="window";}else{if(d.nodeName){c=(d.nodeName+"").replace("#","");}else{if(!d.constructor){c="unknown object";}else{c=Object.prototype.toString.call(d).slice(8,-1).toLowerCase();}}}}}}}}return c;},set:function(d,f,c){d[f]=c;},get:function(c,d){return c[d];},setEx:function(k,m,g){var l=a.getType(m);if(l=="array"){for(var d=0;d<m.length;d++){a.setEx(k,m[d],g[d]);}}else{if(l=="object"){for(var d in m){a.setEx(k,d,m[d]);}}else{var f=(m+"").split(".");for(var d=0,j=k,c=f.length-1;d<c;d++){j=j[f[d]];}j[f[d]]=g;}}return k;},getEx:function(k,m,c){var d,l=a.getType(m);if(l=="array"){if(c){d={};for(var g=0;g<m.length;g++){d[m[g]]=a.getEx(k,m[g]);}}else{d=[];for(var g=0;g<m.length;g++){d[g]=a.getEx(k,m[g]);}}}else{var j=(m+"").split(".");d=k;for(var g=0;g<j.length;g++){d=d[j[g]];}if(c){var f={};f[m]=d;return f;}}return d;},mix:function(g,j,f){if("array"==a.getType(j)){for(var d=0,c=j.length;d<c;d++){a.mix(g,j[d],f);}return g;}for(var d in j){if(f||!(d in g)){g[d]=j[d];}}return g;},fold:function(j){var d={};for(var l in j){var g=l.split(".");for(var f=0,k=d,c=g.length-1;f<c;f++){if(!(g[f] in k)){k[g[f]]={};}k=k[g[f]];}k[g[f]]=j[l];}return d;},expand:function(g){var c={};var d=function(j,l){for(var f in j){var k=j[f];var i=l.concat([f]);if("object"==a.getType(k)){d(k,i);}else{c[i.join(".")]=k;}}};d(g,[]);return c;},dump:function(k,j){var d={};for(var g=0,c=j.length;g<c;g++){if(g in j){var f=j[g];d[f]=a.get(k,f);}}return d;},map:function(g,f,i){var c={};for(var d in g){c[d]=f.call(i,g[d],d,g);}return c;},keys:function(f){var c=[];for(var d in f){c.push(d);}return c;},fromArray:function(j,g,d){d=d||[];for(var f=0,c=g.length;f<c;f++){j[g[f]]=d[f];}return j;},values:function(f){var c=[];for(var d in f){c.push(f[d]);}return c;},isPlainObject:function(c){return !!c&&c.constructor===Object;},flatCopy:function(c){return a.mix({},c);},stringify:function(g){if(g==null){return null;}if(g.toJSON){g=g.toJSON();}var f=typeof g;switch(f){case"string":return'"'+b(g)+'"';case"number":case"boolean":return g.toString();case"object":if(g instanceof Date){return"new Date("+g.getTime()+")";}if(g instanceof Array){var c=[];for(var d=0;d<g.length;d++){c[d]=a.stringify(g[d]);}return"["+c.join(",")+"]";}if(a.isPlainObject(g)){c=[];for(d in g){c.push('"'+b(d)+'":'+a.stringify(g[d]));}return"{"+c.join(",")+"}";}}return null;},encodeURIJson:function(d){var f=[];for(var g in d){if(d[g]==null){continue;}if(d[g] instanceof Array){for(var c=0;c<d[g].length;c++){f.push(encodeURIComponent(g)+"="+encodeURIComponent(d[g][c]));}}else{f.push(encodeURIComponent(g)+"="+encodeURIComponent(d[g]));}}return f.join("&");}};BB.ObjectH=a;})();
/*! File: array.h.js | Build: 2012-09-22-14:33:28 | Revision: 46060 */
(function(){var a={map:function(c,j,g){var b=c.length;var f=new Array(b);for(var d=0;d<b;d++){if(d in c){f[d]=j.call(g,c[d],d,c);}}return f;},forEach:function(c,g,f){for(var d=0,b=c.length;d<b;d++){if(d in c){g.call(f,c[d],d,c);}}},filter:function(c,j,g){var f=[];for(var d=0,b=c.length;d<b;d++){if((d in c)&&j.call(g,c[d],d,c)){f.push(c[d]);}}return f;},some:function(c,g,f){for(var d=0,b=c.length;d<b;d++){if(d in c&&g.call(f,c[d],d,c)){return true;}}return false;},every:function(c,g,f){for(var d=0,b=c.length;d<b;d++){if(d in c&&!g.call(f,c[d],d,c)){return false;}}return true;},indexOf:function(c,f,d){var b=c.length;d=d|0;if(d<0){d+=b;}if(d<0){d=0;}for(;d<b;d++){if(d in c&&c[d]===f){return d;}}return -1;},lastIndexOf:function(c,f,d){var b=c.length;d=d|0;if(!d||d>=b){d=b-1;}if(d<0){d+=b;}for(;d>-1;d--){if(d in c&&c[d]===f){return d;}}return -1;},contains:function(b,c){return(a.indexOf(b,c)>=0);},clear:function(b){b.length=0;},remove:function(c,k){var b=-1;for(var f=1;f<arguments.length;f++){var g=arguments[f];for(var d=0;d<c.length;d++){if(g===c[d]){if(b<0){b=d;}c.splice(d--,1);}}}return b;},unique:function(b){var f=[];var d=null;for(var c=0;c<b.length;c++){if(a.indexOf(f,d=b[c])<0){f.push(d);}}return f;},reduce:function(c,j,d){var b=c.length;var g=0;if(arguments.length<3){var f=0;for(;g<b;g++){if(g in c){d=c[g++];f=1;break;}}if(!f){throw new Error("No component to reduce");}}for(;g<b;g++){if(g in c){d=j(d,c[g],g,c);}}return d;},reduceRight:function(c,j,d){var b=c.length;var g=b-1;if(arguments.length<3){var f=0;for(;g>-1;g--){if(g in c){d=c[g--];f=1;break;}}if(!f){throw new Error("No component to reduceRight");}}for(;g>-1;g--){if(g in c){d=j(d,c[g],g,c);}}return d;},expand:function(b){return[].concat.apply([],b);},toArray:function(b){var c=[];for(var d=0;d<b.length;d++){c[d]=b[d];}return c;},wrap:function(b,c){return new c(b);}};BB.ArrayH=a;})();
/*! File: hashset.h.js | Build: 2012-09-22-14:33:28 | Revision: 46060 */
(function(){var b=BB.ArrayH.contains;var a={union:function(d,f){var j=[];for(var g=0,c=f.length;g<c;g++){if(!b(d,f[g])){j.push(f[g]);}}return d.concat(j);},intersect:function(d,f){var j=[];for(var g=0,c=f.length;g<c;g++){if(b(d,f[g])){j.push(f[g]);}}return j;},minus:function(d,f){var j=[];for(var g=0,c=f.length;g<c;g++){if(!b(d,f[g])){j.push(f[g]);}}return j;},complement:function(c,d){return a.minus(c,d).concat(a.minus(d,c));}};BB.HashSetH=a;})();
/*! File: date.h.js | Build: 2012-09-22-14:33:29 | Revision: 46060 */
(function(){var a={format:function(g,c){c=c||"yyyy-MM-dd";var j=g.getFullYear();var f={M:g.getMonth()+1,d:g.getDate(),h:g.getHours(),m:g.getMinutes(),s:g.getSeconds()};c=c.replace(/(y+)/ig,function(k,i){var d=Math.min(4,i.length);return(j+"").substr(4-d);});for(var b in f){c=c.replace(new RegExp("("+b+"+)","g"),function(i,d){return(f[b]<10&&d.length>1)?"0"+f[b]:f[b];});}return c;}};BB.DateH=a;})();
/*! File: function.h.js | Build: 2012-09-22-14:33:28 | Revision: 46060 */
(function(){var f=window.BB,d=f.ObjectH.getType,c=f.ArrayH.map,a=f.Env;var b={curry:function(i,g){g=g||[];return function(){var l=[];var k=[].slice.call(arguments);for(var m=0,j=g.length;m<j;m++){if(m in g){l.push(g[m]);}else{if(k.length){l.push(k.shift());}}}l=l.concat(k);return i.apply(this,l);};},defer:function(g){return function(i){i=i||0;var j=[].slice.call(arguments,1);var k=this;var l=setTimeout(function(){g.apply(k,j);},i);return l;};},methodize:function(i,g){if(g){return function(){return i.apply(null,[this[g]].concat([].slice.call(arguments)));};}return function(){return i.apply(null,[this].concat([].slice.call(arguments)));};},overload:function(i,j,g){if(!g){g=function(){var k=[].slice.call(arguments);return c(k,function(l){return d(l);}).join();};}return function(){var l=g.apply(this,arguments);for(var k in j){var m=new RegExp("^"+k.replace("*","[^,]*").replace("...",".*")+"$");if(m.test(l)){return j[k].apply(this,arguments);}}return i.apply(this,arguments);};},unmethodize:function(i,g){if(g){return function(j){return i.apply(j[g],[].slice.call(arguments,1));};}return function(j){return i.apply(j,[].slice.call(arguments,1));};},mul:function(j,g){var i=function(){var s=arguments[0],n=g?i:j;if(s instanceof Array){var l=[];var q=[].slice.call(arguments,0);for(var m=0,k=s.length;m<k;m++){q[0]=s[m];var p=n.apply(this,q);l.push(p);}return l;}else{return j.apply(this,arguments);}};return i;},rdir:function(i,g){g=g|0;return function(){var j=i.apply(this,arguments);if(g>=0){return arguments[g];}return j;};},rwrap:function(j,k,g){var i=b.rdir(j,g);return function(){var l=i.apply(this,arguments);if(null!=l){return new k(l);}return l;};},bind:function(g,i){return function(){return g.apply(i,arguments);};}};a.detect=b.curry(b.overload,[function(){},,function(g){if(a.ie6){return"@ie6";}if(a.ie7){return"@ie7";}if(a.ie8){return"@ie8";}if(a.ie){return"@ie";}if(a.opera){return"@opera";}if(a.safari){return"@safari";}if(a.firefox){return"@firefox";}if(a.chrome){return"@chrome";}return"@unknown";}]);f.FunctionH=b;})();
/*! File: class.h.js | Build: 2012-09-22-14:33:29 | Revision: 46060 */
(function(){var a={createInstance:function(b){var c=function(){};c.prototype=b.prototype;var d=new c();b.apply(d,[].slice.call(arguments,1));return d;},extend:function(b,j,g){if(g==null){g=true;}var c=function(){if(g){j.apply(this,arguments);}var i=b.apply(this,arguments);return i;};c.toString=function(){return b.toString();};var d=function(){};d.prototype=j.prototype;c.prototype=new d();c.$class=b;c.$super=b.$super=j;c.prototype.constructor=c;for(var f in b.prototype){if(b.prototype.hasOwnProperty(f)){c.prototype[f]=b.prototype[f];}}c.extend=function(){throw new Error("you maynot apply the same wrapper twice.");};return c;}};BB.ClassH=a;})();
/*! File: json.js | Build: 2012-09-22-14:33:28 | Revision: 46060 */
(function(){window.JSON={parse:(function(){var a=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;var b;function c(g,j){var i=j[g];if(i&&typeof i==="object"){for(var f in i){var d=c(f,i);if(d!==undefined){i[f]=d;}else{delete i[f];}}}return b.call(j,g,i);}return function(g,d){a.lastIndex=0;if(a.test(g)){g=g.replace(a,function(i){return"\\u"+("0000"+i.charCodeAt(0).toString(16)).slice(-4);});}if(g&&/^[\],:{}\s]*$/.test(g.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){var f=new Function("return "+g)();b=d;return typeof d==="function"?c("",{"":f}):f;}throw new SyntaxError("Invalid JSON format in executing JSON.parse");};})(),stringify:(function(){function f(k){return k<10?"0"+k:k;}Date.prototype.toJSON=function(k){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null;};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(k){return this.valueOf();};var a;var j;var g;var i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;var d={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function c(k){i.lastIndex=0;return i.test(k)?'"'+k.replace(i,function(l){var m=d[l];return typeof m==="string"?m:"\\u"+("0000"+l.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+k+'"';}function b(x,n){var u=j;var z=n[x];if(z&&typeof z.toJSON=="function"){z=z.toJSON(x);}if(typeof g=="function"){z=g.call(n,x,z);}if(z===null){return String(z);}else{if(typeof z=="undefined"){return z;}}switch(z.constructor){case String:return c(z);case Number:return isFinite(z)?String(z):"null";case Boolean:return String(z);case Array:j+=a;var t=[];for(var p=0,q=z.length;p<q;p++){t[p]=b(p,z)||"null";}var l=t.length==0?"[]":j?"[\n"+j+t.join(",\n"+j)+"\n"+u+"]":"["+t.join(",")+"]";j=u;return l;case Object:j+=a;var t=[];if(g&&g.constructor==Array){for(var p=0,q=g.length;p<q;p++){var m=g[p];if(typeof m=="string"){var s=b(m,z);if(s){t.push(c(m)+(j?": ":":")+s);}}}}else{for(var m in z){var s=b(m,z);if(s){t.push(c(m)+(j?": ":":")+s);}}}var l=t.length==0?"{}":j?"{\n"+j+t.join(",\n"+j)+"\n"+u+"}":"{"+t.join(",")+"}";j=u;return l;}}return function(m,l,k){if(l!=null&&l.constructor!=Array&&l.constructor!=Function){throw new Error("Invalid type of 2nd argument in JSON.stringify, only Array and Function allowed");}j=a="";if(k&&k.constructor==Number){a=Array(k+1).join(" ");}else{if(k&&k.constructor==String){a=k;}}g=l;return b("",{"":m});};})()};})();
/*! File: helper.js | Build: 2012-09-22-14:33:28 | Revision: 46060 */
(function(){var c=BB.FunctionH,b=BB.ObjectH;var a={rwrap:function(j,m,g){var d={};if(null==g){g={};}for(var f in j){if((typeof g=="number"||f in g)&&typeof j[f]=="function"){var l=typeof g=="number"?g:g[f];var k=m?c.rwrap:c.rdir;d[f]=k(j[f],m,l);}else{d[f]=j[f];}}return d;},gsetter:function(g,d){d=d||{};for(var f in d){g[f]=function(i){return function(){return g[i[Math.min(arguments.length,i.length)-1]].apply(null,arguments);};}(d[f]);}return g;},mul:function(j,f){var d={};for(var g in j){if(typeof j[g]=="function"){d[g]=c.mul(j[g],f);}else{d[g]=j[g];}}return d;},applyTo:function(d,f){return b.mix(f,d);},methodize:function(j,d){var f={};for(var g in j){if(typeof j[g]=="function"&&!/^_/.test(g)){f[g]=c.methodize(j[g],d);}}return f;},methodizeTo:function(f,g,d){f=a.methodize(f,d);return b.mix(g,f);},get:function(){var g=b.mix({},[].slice.call(arguments));function f(i){this.core=i;}var d=a.rwrap(a,f,-1);a.methodizeTo(d,f.prototype,"core");return new f(g);},createClass:function(d){var f=function(){};if(typeof d._init=="function"){f=c.methodize(d._init);}a.methodizeTo(d.prototype,f);return f;}};BB.Helper=a;})();
/*! File: custevent.h.js | Build: 2012-09-22-14:33:28 | Revision: 46060 */
(function(){var f=window.BB,c=f.ObjectH.mix,b=f.ArrayH.indexOf;var a=f.CustEvent=function(j,i,g){this.target=j;this.type=i;c(this,g||{});};c(a.prototype,{target:null,currentTarget:null,type:null,returnValue:undefined,preventDefault:function(){this.returnValue=false;}});var d=f.CustEventTargetH={on:function(m,p,l){var g=true;p=p.split(",");for(var k=0,q=p.length;k<q;k++){var j=m.__custListeners&&m.__custListeners[p[k]]||f.error("unknown event type",TypeError);if(b(j,l)>-1){g=false;}else{j.push(l);}}return g;},un:function(k,l,j){var i=k.__custListeners&&k.__custListeners[l]||f.error("unknown event type",TypeError);if(j){var g=b(i,j);if(g<0){return false;}i.splice(g,1);}else{i.length=0;}return true;},fire:function(p,q,j){if(q instanceof a){var g=c(q,j),q=q.type;}else{var g=new a(p,q,j);}var k=p.__custListeners&&p.__custListeners[q]||f.error("unknown event type",TypeError);if(q!="*"){k=k.concat(p.__custListeners["*"]||[]);}g.returnValue=undefined;g.currentTarget=p;var n=g.currentTarget;if(n&&n["on"+g.type]){var m=n["on"+g.type].call(n,g);}for(var l=0;l<k.length;l++){k[l].call(n,g);}return(g.returnValue!==false||m===false&&g.returnValue===undefined);},createEvents:function(l,j){j=j||[];if(typeof j=="string"){j=j.split(",");}var k=l.__custListeners;if(!k){k=l.__custListeners={};}for(var g=0;g<j.length;g++){k[j[g]]=k[j[g]]||[];}k["*"]=k["*"]||[];}};a.createEvents=d.createEvents;})();
/*! File: custevent_retouch.js | Build: 2012-09-22-14:33:28 | Revision: 46060 */
(function(){var c=window.BB,a=c.ObjectH.mix;var b=c.CustEventTarget=function(){this.__custListeners={};};c.Helper.get(c.CustEventTargetH).rwrap(null,0).methodizeTo(b.prototype);c.CustEvent.createEvents=b.createEvents=function(f,d){c.CustEventTargetH.createEvents(f,d);return a(f,b.prototype);};})();
/*! File: core_retouch.js | Build: 2012-09-22-14:33:28 | Revision: 46060 */
BB.Helper.get(BB.ObjectH).applyTo(Object);Object.mix(BB.ArrayH,BB.HashSetH);BB.Helper.get(BB.ArrayH).applyTo(Array).methodizeTo(Array.prototype);Object.mix(BB.FunctionH,BB.ClassH);BB.Helper.get(BB.FunctionH).applyTo(Function).methodizeTo(Function.prototype);BB.Helper.get(BB.DateH).applyTo(Date).methodizeTo(Date.prototype);BB.Helper.get(BB.StringH).applyTo(String).methodizeTo(String.prototype);
/*! File: selector.js | Build: 2012-09-22-14:33:26 | Revision: 46060 */
(function(){var b=window.BB;var r=b.StringH.trim;var s={queryStamp:0,_operators:{"":"aa","=":'aa=="vv"',"!=":'aa!="vv"',"~=":'aa&&(" "+aa+" ").indexOf(" vv ")>-1',"|=":'aa&&(aa+"-").indexOf("vv-")==0',"^=":'aa&&aa.indexOf("vv")==0',"$=":'aa&&aa.lastIndexOf("vv")==aa.length-"vv".length',"*=":'aa&&aa.indexOf("vv")>-1'},_shorthands:[[/\#([\w\-]+)/g,'[id="$1"]'],[/^([\w\-]+)/g,function(z,x){return'[tagName="'+x.toUpperCase()+'"]';}],[/\.([\w\-]+)/g,'[className~="$1"]'],[/^\*/g,"[tagName]"]],_pseudos:{"first-child":function(x){return x.parentNode.getElementsByTagName("*")[0]==x;},"last-child":function(x){return !(x=x.nextSibling)||!x.tagName&&!x.nextSibling;},"only-child":function(x){return d(x.parentNode).length==1;},"nth-child":function(x,z){return z(m(x,false));},"nth-last-child":function(x,z){return z(m(x,true));},"first-of-type":function(z){var x=z.tagName;var A=z;while(A=A.previousSlibling){if(A.tagName==x){return false;}}return true;},"last-of-type":function(z){var x=z.tagName;var A=z;while(A=A.nextSibling){if(A.tagName==x){return false;}}return true;},"only-of-type":function(x){var A=x.parentNode.childNodes;for(var z=A.length-1;z>-1;z--){if(A[z].tagName==x.tagName&&A[z]!=x){return false;}}return true;},"nth-of-type":function(z,B){var x=1;var A=z;while(A=A.previousSibling){if(A.tagName==z.tagName){x++;}}return B(x);},"nth-last-of-type":function(z,B){var x=1;var A=z;while(A=A.nextSibling){if(A.tagName==z.tagName){x++;}}return B(x);},empty:function(x){return !x.firstChild;},parent:function(x){return !!x.firstChild;},not:function(x,z){return !z(x);},enabled:function(x){return !x.disabled;},disabled:function(x){return x.disabled;},checked:function(x){return x.checked;},contains:function(x,z){return(x.textContent||x.innerText||"").indexOf(z)>=0;}},_attrGetters:function(){var B={"class":"el.className","for":"el.htmlFor",href:'el.getAttribute("href",2)'};var z="name,id,className,value,selected,checked,disabled,type,tagName,readOnly".split(",");for(var A=0,x;x=z[A];A++){B[x]="el."+x;}return B;}(),_relations:{"":function(z,x,A){while((z=z.parentNode)&&z!=A){if(x(z)){return z;}}return null;},">":function(z,x,A){z=z.parentNode;return z!=A&&x(z)?z:null;},"+":function(z,x,A){while(z=z.previousSibling){if(z.tagName){return x(z)&&z;}}return null;},"~":function(z,x,A){while(z=z.previousSibling){if(z.tagName&&x(z)){return z;}}return null;}},selector2Filter:function(x){return l(x);},test:function(x,z){return l(z)(x);},filter:function(x,B,A){var z=u(B);return j(A||document.documentElement,x,z);},query:function(A,E){s.queryStamp=k++;A=A||document.documentElement;var C=g(A,E);if(C){return C;}var z=r(E).split(",");C=t(A,z[0]);for(var B=1,x;x=z[B];B++){var D=t(A,x);C=C.concat(D);}return C;}};function i(){return true;}function n(z,D){var C=[],A=0;if(D==i){if(z instanceof Array){return z;}else{for(var x=z.length;A<x;A++){C[A]=z[A];}}}else{for(var B;B=z[A++];){D(B)&&C.push(B);}}return C;}var p,d,a,q=function(x){return document.getElementById(x);};(function(){var x=document.createElement("div");x.innerHTML='<div class="aaa"></div>';a=(x.querySelectorAll&&x.querySelectorAll(".aaa").length==1);p=x.contains?function(A,z){return A!=z&&A.contains(z);}:function(A,z){return(A.compareDocumentPosition(z)&16);};d=x.children?function(z){return z.children;}:function(z){return n(z.childNodes,function(A){return A.tagName;});};})();function c(B){if(B=="even"){B="2n";}if(B=="odd"){B="2n+1";}B=B.replace(/(^|\D+)n/g,"$11n");if(!(/n/.test(B))){return function(C){return C==B;};}else{var z=B.split("n");var A=z[0]|0,x=z[1]|0;return function(C){var D=C-x;return D>=0&&D%A==0;};}}function m(C,z){var D=C.parentNode;if(D.__queryStamp!=k){var B=d(D);for(var A=0,x;x=B[A++];){x.__siblingIdx=A;}D.__queryStamp=k;D.__childrenNum=A;}if(z){return D.__childrenNum-C.__siblingIdx+1;}else{return C.__siblingIdx;}}function l(G){if(G==""){return i;}var H=[],K=[],M=r(G);M=M.replace(/\:([\w\-]+)(\(([^)]+)\))?/g,function(O,N,R,Q,P){H.push([N,Q]);return"";});for(var z=0,B=s._shorthands,A;A=B[z];z++){M=M.replace(A[0],A[1]);}var x=/\[\s*((?:[\w\u00c0-\uFFFF-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/g;M=M.replace(x,function(O,N,R,Q,P){K.push([N,R||"",P||""]);return"";});if(!(/^\s*$/).test(M)){throw"Unsupported Selector:\n"+G+"\n-"+M;}var C=[];if(K.length){var F=[];for(var z=0,D;D=K[z];z++){var I=s._attrGetters[D[0]]||'el.getAttribute("'+D[0]+'")';F.push(s._operators[D[1]].replace(/aa/g,I).replace(/vv/g,D[2]));}F="return "+F.join("&&");C.push(new Function("el",F));}for(var z=0,J;J=H[z];z++){var E=s._pseudos[J[0]];if(!E){throw"Unsupported Selector:\n"+J[0]+"\n"+M;}if(J[0].indexOf("nth-")==0){C.push(function(O,N){return function(P){return O(P,N);};}(E,c(J[1])));}else{if(J[0]=="not"){C.push(function(O,N){return function(P){return O(P,N);};}(E,l(J[1])));}else{if(J[0]=="contains"){C.push(function(O,N){return function(P){return O(P,N);};}(E,J[1]));}else{C.push(E);}}}}var L=C.length;switch(L){case 0:return i;case 1:return C[0];case 2:return function(N){return C[0](N)&&C[1](N);};}return function(O){for(var N=0;N<L;N++){if(!C[N](O)){return false;}}return true;};}var k=0,v=0,f=0;function g(A,D){if(a&&/^((^|,)\s*[.\w-][.\w\s\->+~]*)+$/.test(D)){var x=[],C=A.querySelectorAll(D);for(var B=0,z;z=C[B++];){x.push(z);}return x;}return null;}function t(D,z){f++;var G=g(D,z);if(G){return G;}var O=u(z),P=O.length;var F=[D],N,A,x;var H;while(H=O[0]){if(!F.length){return[];}var I=H[0];G=[];if(I=="+"){J=l(H[1]);for(N=0;A=F[N++];){while(A=A.nextSibling){if(A.tagName){if(J(A)){G.push(A);}break;}}}F=G;O.splice(0,1);}else{if(I=="~"){J=l(H[1]);for(N=0;A=F[N++];){if(N>1&&A.parentNode==F[N-2].parentNode){continue;}while(A=A.nextSibling){if(A.tagName){if(J(A)){G.push(A);}}}}F=G;O.splice(0,1);}else{break;}}}if(!P||!F.length){return F;}for(var K=0,L;sltor=O[K];K++){if((/^[.\w-]*#([\w-]+)/i).test(sltor[1])){L=RegExp.$1;sltor[1]=sltor[1].replace("#"+L,"");break;}}if(K<P){var E=q(L);if(!E){return[];}for(N=0,x;x=F[N++];){if(p(x,E)){G=j(D,[E],O.slice(0,K+1));if(!G.length||K==P-1){return G;}return t(E,O.slice(K+1).join(",").replace(/,/g," "));}}return[];}var M=function(Q){return Q.getElementsByTagName(C);},C="*",B="";z=O[P-1][1];z=z.replace(/^[\w\-]+/,function(Q){C=Q;return"";});if(a){z=z.replace(/^[\w\*]*\.([\w\-]+)/,function(R,Q){B=Q;return"";});}if(B){M=function(Q){return Q.querySelectorAll(C+"."+B);};}if(P==1){if(O[0][0]==">"){M=d;var J=l(O[0][1]);}else{J=l(z);}G=[];for(N=0;x=F[N++];){G=G.concat(n(M(x),J));}return G;}O[O.length-1][1]=z;G=[];for(N=0;x=F[N++];){G=G.concat(j(x,M(x),O));}return G;}function u(B){var A=[];var z=/(^|\s*[>+~ ]\s*)(([\w\-\:.#*]+|\([^\)]*\)|\[\s*((?:[\w\u00c0-\uFFFF-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\6|)\s*\])+)(?=($|\s*[>+~ ]\s*))/g;var x=r(B).replace(z,function(D,C,F,E){A.push([r(C),F]);return"";});if(!(/^\s*$/).test(x)){throw"Unsupported Selector:\n"+B+"\n--"+x;}return A;}function j(I,E,A){v++;var G=A[0],H=A.length,D=G[0]?function(K){return K.parentNode==I;}:i;var C=[],J=[],B=[],z="";for(var F=0;F<H;F++){G=A[F];C[F]=l(G[1]);J[F]=s._relations[G[0]];if(G[0]==""||G[0]=="~"){B[F]=true;}z+=G[0]|" ";}E=n(E,C[H-1]);if(H==1){return n(E,D);}if(/[+>]+[~ ]+/.test(z)){function x(N){var M=[],L=H-1,K=M[L]=N;for(;L>-1;L--){if(L>0){K=J[L](K,C[L-1],I);}else{if(D(K)){return true;}else{K=null;}}while(!K){if(++L==H){return false;}if(B[L]){K=M[L-1];L++;}}M[L-1]=K;}}}else{function x(L){var K=H-1;for(var K=H-1;K>-1;K--){if(K==0){return D(L);}else{if(!(L=J[K](L,C[K-1],I))){return false;}}}}}return n(E,x);}b.Selector=s;})();
/*! File: dom.u.js | Build: 2012-09-22-14:33:26 | Revision: 46060 */
BB.DomU=function(){var b=BB.Selector;var a={query:function(d,c){return b.query(c||document.documentElement,d);},getDocRect:function(k){var k=k||window.document,i=k.parentWindow||k.defaultView,f=function(n){return parseInt(n,10)||0;},d=i.pageXOffset||Math.max(f(k.documentElement.scrollLeft),f(k.body.scrollLeft)),j=i.pageYOffset||Math.max(f(k.documentElement.scrollTop),f(k.body.scrollTop)),c=Math.max(f(k.documentElement.clientWidth),0),l=Math.max(f(k.documentElement.clientHeight),0),m=Math.max(f(k.documentElement.scrollHeight),f(k.body.offsetHeight)),g=Math.max(f(k.documentElement.scrollWidth),f(k.body.offsetWidth));if((!k.compatMode||k.compatMode=="CSS1Compat")&&k.documentElement&&k.documentElement.clientHeight){l=k.documentElement.clientHeight;c=k.documentElement.clientWidth;}else{if(k.body&&k.body.clientHeight){l=k.body.clientHeight;c=k.body.clientWidth;}else{if(i.innerWidth&&i.innerHeight&&k.width){l=i.innerHeight;c=i.innerWidth;if(k.height>l){l-=16;}if(k.width>c){c-=16;}}}}if(/webkit/i.test(window.navigator.userAgent)){m=Math.max(m,f(k.body.scrollHeight));}m=Math.max(l,m);g=Math.max(c,g);return{scrollX:d,scrollY:j,width:c,height:l,scrollHeight:m,scrollWidth:g};},create:(function(){var c=document.createElement("div"),f={option:[1,"<select multiple='multiple'>","</select>"],optgroup:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tbody:[1,"<table>","</table>"],tfoot:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],th:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:[0,"",""]},d=/<(\w+)/i;return function(k,g,p){var j=(p&&p.createElement("div"))||c,n=j,r=(d.exec(k)||["",""])[1],l=f[r]||f._default,m=l[0];j.innerHTML=l[1]+k+l[2];while(m--){j=j.firstChild;}var i=j.firstChild;if(!i||!g){while(n.firstChild){n.removeChild(n.firstChild);}return i;}else{p=p||document;var q=p.createDocumentFragment();while(i=j.firstChild){q.appendChild(i);}return q;}};}()),pluckWhiteNode:function(g){var c=[],f=0,d=g.length;for(;f<d;f++){if(a.isElement(g[f])){c.push(g[f]);}}return c;},isElement:function(c){return !!(c&&c.nodeType==1);},ready:function(d,f){f=f||document;if(/complete/.test(f.readyState)){d();}else{if(f.addEventListener){if("interactive"==f.readyState){d();}else{f.addEventListener("DOMContentLoaded",d,false);}}else{var c=function(){c=new Function;d();};void function(){try{f.body.doScroll("left");}catch(g){return setTimeout(arguments.callee,1);}c();}();f.attachEvent("onreadystatechange",function(){("complete"==f.readyState)&&c();});}}},rectContains:function(d,c){return d.left<=c.left&&d.right>=c.right&&d.top<=c.top&&d.bottom>=c.bottom;},rectIntersect:function(g,f){var i=Math.max(g.top,f.top),j=Math.min(g.right,f.right),c=Math.min(g.bottom,f.bottom),d=Math.max(g.left,f.left);if(c>=i&&j>=d){return{top:i,right:j,bottom:c,left:d};}else{return null;}},createElement:function(f,g,j){j=j||document;var d=j.createElement(f);if(g){for(var c in g){d[c]=g[c];}}return d;}};return a;}();
/*! File: node.h.js | Build: 2012-09-22-14:33:26 | Revision: 46060 */
BB.NodeH=function(){var f=BB.ObjectH;var c=BB.DomU;var b=BB.Env;var a=BB.Selector;var i=function(j,k){if("string"==typeof j){if(j.indexOf("<")==0){return c.create(j,false,k);}return(k||document).getElementById(j);}else{return(f.getType(j)=="wrap")?arguments.callee(j.core):j;}};var d=function(j){return String(j).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1");};var g={outerHTML:function(){var j=document.createElement("div");return function(k,m){k=i(k);if("outerHTML" in k){return k.outerHTML;}else{j.innerHTML="";var l=m&&m.createElement("div")||j;l.appendChild(k.cloneNode(true));return l.innerHTML;}};}(),hasClass:function(j,k){j=i(j);return new RegExp("(?:^|\\s)"+d(k)+"(?:\\s|$)").test(j.className);},addClass:function(j,k){j=i(j);if(!g.hasClass(j,k)){j.className=j.className?j.className+" "+k:k;}},removeClass:function(j,k){j=i(j);if(g.hasClass(j,k)){j.className=j.className.replace(new RegExp("(?:^|\\s)"+d(k)+"(?=\\s|$)","g"),"");}},replaceClass:function(l,k,j){l=i(l);if(g.hasClass(l,k)){l.className=l.className.replace(new RegExp("(^|\\s)"+d(k)+"(?=\\s|$)","g"),"$1"+j);}else{g.addClass(l,j);}},toggleClass:function(j,l,k){k=k||"";if(g.hasClass(j,l)){g.replaceClass(j,l,k);}else{g.replaceClass(j,k,l);}},show:function(j,k){j=i(j);j.style.display=k||"";},hide:function(j){j=i(j);j.style.display="none";},wrap:function(j,k){j=i(j);k=i(k,j.ownerDocument);j.parentNode.insertBefore(k,j);k.appendChild(j);},toggle:function(j,k){if(g.isVisible(j)){g.hide(j);}else{g.show(j,k);}},isVisible:function(j){j=i(j);return !!((j.offsetHeight+j.offsetWidth)&&g.getStyle(j,"display")!="none");},getXY:function(){if(document.documentElement.getBoundingClientRect&&!!window.ActiveXObject){return function(k){k=i(k);var m=k.getBoundingClientRect(),j=m.left-(b.ie7?2:0),r=m.top-(b.ie7?2:0),l=null;if(g.getCurrentStyle(k,"position")!="fixed"||b.ie6){l=c.getDocRect(k.ownerDocument);j+=l.scrollX,r+=l.scrollY;}try{var n=k.ownerDocument.parentWindow.frameElement||null;if(n){var q=2-(n.frameBorder||1)*2;j+=q;r+=q;}}catch(p){}return[j,r];};}else{return function(l){l=i(l);var n=[l.offsetLeft,l.offsetTop];var k=l.offsetParent;var m={HYPHEN:/(-[a-z])/i,ROOT_TAG:/^(?:body|html)$/i,OP_SCROLL:/^(?:inline|table-row)$/i};var j=(b.safari&&g.getCurrentStyle(l,"position")=="absolute"&&l.offsetParent==l.ownerDocument.body);if(k!=l){while(k){n[0]+=k.offsetLeft;n[1]+=k.offsetTop;if(!j&&b.safari&&g.getCurrentStyle(k,"position")=="absolute"){j=true;}k=k.offsetParent;}}if(j){n[0]-=l.ownerDocument.body.offsetLeft;n[1]-=l.ownerDocument.body.offsetTop;}k=l.parentNode;while(k.tagName&&!m.ROOT_TAG.test(k.tagName)){if(k.scrollTop||k.scrollLeft){if(!m.OP_SCROLL.test(g.getCurrentStyle(k,"display"))){if(!b.opera||g.getCurrentStyle(k,"overflow")!=="visible"){n[0]-=k.scrollLeft;n[1]-=k.scrollTop;}}}k=k.parentNode;}return n;};}}(),setXY:function(k,j,l){k=i(k);j=parseInt(j,10);l=parseInt(l,10);if(!isNaN(j)){g.setStyle(k,"left",j+"px");}if(!isNaN(l)){g.setStyle(k,"top",l+"px");}},setSize:function(l,j,m){l=i(l);j=parseFloat(j,10);m=parseFloat(m,10);if(isNaN(j)&&isNaN(m)){return;}var n=g.borderWidth(l);var k=g.paddingWidth(l);if(!isNaN(j)){g.setStyle(l,"width",Math.max(+j-n[1]-n[3]-k[1]-k[3],0)+"px");}if(!isNaN(m)){g.setStyle(l,"height",Math.max(+m-n[0]-n[2]-k[1]-k[2],0)+"px");}},setInnerSize:function(k,j,l){k=i(k);j=parseFloat(j,10);l=parseFloat(l,10);if(!isNaN(j)){g.setStyle(k,"width",j+"px");}if(!isNaN(l)){g.setStyle(k,"height",l+"px");}},setRect:function(l,j,n,k,m){g.setXY(l,j,n);g.setSize(l,k,m);},setInnerRect:function(l,j,n,k,m){g.setXY(l,j,n);g.setInnerSize(l,k,m);},getSize:function(j){j=i(j);return{width:j.offsetWidth,height:j.offsetHeight};},getRect:function(l){l=i(l);var n=g.getXY(l);var j=n[0];var q=n[1];var k=l.offsetWidth;var m=l.offsetHeight;return{width:k,height:m,left:j,top:q,bottom:q+m,right:j+k};},nextSibling:function(l,k){var j=a.selector2Filter(k||"");l=i(l);do{l=l.nextSibling;}while(l&&!j(l));return l;},previousSibling:function(l,k){var j=a.selector2Filter(k||"");l=i(l);do{l=l.previousSibling;}while(l&&!j(l));return l;},ancestorNode:function(l,k){var j=a.selector2Filter(k||"");l=i(l);do{l=l.parentNode;}while(l&&!j(l));return l;},parentNode:function(k,j){return g.ancestorNode(k,j);},firstChild:function(l,k){var j=a.selector2Filter(k||"");l=i(l).firstChild;while(l&&!j(l)){l=l.nextSibling;}return l;},lastChild:function(l,k){var j=a.selector2Filter(k||"");l=i(l).lastChild;while(l&&!j(l)){l=l.previousSibling;}return l;},contains:function(j,k){j=i(j),k=i(k);return j.contains?j!=k&&j.contains(k):!!(j.compareDocumentPosition(k)&16);},insertAdjacentHTML:function(k,l,j){k=i(k);if(k.insertAdjacentHTML){k.insertAdjacentHTML(l,j);}else{var n;var m=k.ownerDocument.createRange();switch(String(l).toLowerCase()){case"beforebegin":m.setStartBefore(k);n=m.createContextualFragment(j);break;case"afterbegin":m.selectNodeContents(k);m.collapse(true);n=m.createContextualFragment(j);break;case"beforeend":m.selectNodeContents(k);m.collapse(false);n=m.createContextualFragment(j);break;case"afterend":m.setStartAfter(k);n=m.createContextualFragment(j);break;}g.insertAdjacentElement(k,l,n);}},insertAdjacentElement:function(j,k,l){j=i(j),l=i(l);if(j.insertAdjacentElement){j.insertAdjacentElement(k,l);}else{switch(String(k).toLowerCase()){case"beforebegin":j.parentNode.insertBefore(l,j);break;case"afterbegin":j.insertBefore(l,j.firstChild);break;case"beforeend":j.appendChild(l);break;case"afterend":j.parentNode.insertBefore(l,j.nextSibling||null);break;}}return l;},appendChild:function(j,k){return i(j).appendChild(i(k));},appendTo:function(j,k){return i(k).appendChild(i(j));},prepend:function(j,k){j=i(j);return j.insertBefore(i(k),j.firstChild);},prependTo:function(j,k){return g.prepend(k,j);},insertSiblingBefore:function(j,k){j=i(j);return j.parentNode.insertBefore(i(k),j);},insertSiblingAfter:function(j,k){j=i(j);j.parentNode.insertBefore(i(k),j.nextSibling||null);},insertBefore:function(k,l,j){return i(k).insertBefore(i(l),j&&i(j)||null);},insertAfter:function(k,l,j){return i(k).insertBefore(i(l),j&&i(j).nextSibling||null);},replaceNode:function(j,k){j=i(j);return j.parentNode.replaceChild(i(k),j);},replaceChild:function(k,l,j){return i(k).replaceChild(i(l),i(j));},removeNode:function(j){j=i(j);return j.parentNode.removeChild(j);},removeChild:function(j,k){return i(j).removeChild(i(k));},get:function(j,k){j=i(j);return f.getEx.apply(null,arguments);},set:function(j,l,k){j=i(j);f.setEx.apply(null,arguments);},getAttr:function(k,l,j){k=i(k);return k.getAttribute(l,j||null);},setAttr:function(k,l,m,j){k=i(k);k.setAttribute(l,m,j||null);},removeAttr:function(k,l,j){k=i(k);return k.removeAttribute(l,j||0);},query:function(k,j){k=i(k);return a.query(k,j||"");},getElementsByClass:function(j,k){j=i(j);return a.query(j,"."+k);},getValue:function(j){j=i(j);return j.value;},setValue:function(j,k){i(j).value=k;},getHtml:function(j){j=i(j);return j.innerHTML;},setHtml:function(j,k){i(j).innerHTML=k;},encodeURIForm:function(t,n){t=i(t);n=n||function(j){return false;};var z=[],s=t.elements,q=s.length,u=0,v=function(j,l){z.push(encodeURIComponent(j)+"="+encodeURIComponent(l));};for(;u<q;++u){var p=s[u],m=p.name,x;if(p.disabled||!m){continue;}switch(p.type){case"text":case"hidden":case"password":case"textarea":if(n(p)){break;}v(m,p.value);break;case"radio":case"checkbox":if(n(p)){break;}if(p.checked){v(m,p.value);}break;case"select-one":if(n(p)){break;}if(p.selectedIndex>-1){v(m,p.value);}break;case"select-multiple":if(n(p)){break;}var k=p.options;for(var r=0;r<k.length;++r){if(k[r].selected){v(m,k[r].value);}}break;}}return z.join("&");},isFormChanged:function(q,s){q=i(q);s=s||function(j){return false;};var p=q.elements,k=p.length,n=0,m=0,r,t;for(;n<k;++n,m=0){r=p[n];switch(r.type){case"text":case"hidden":case"password":case"textarea":if(s(r)){break;}if(r.defaultValue!=r.value){return true;}break;case"radio":case"checkbox":if(s(r)){break;}if(r.defaultChecked!=r.checked){return true;}break;case"select-one":m=1;case"select-multiple":if(s(r)){break;}t=r.options;for(;m<t.length;++m){if(t[m].defaultSelected!=t[m].selected){return true;}}break;}}return false;},cloneNode:function(k,j){return i(k).cloneNode(j||false);}};void function(){var k=function(m){return String(m).replace(/\-(\w)/g,function(p,n){return n.toUpperCase();});};var j=function(){var m={};m["float"]=/MSIE/.test(navigator.userAgent)?"styleFloat":"cssFloat";return function(n){return m[n]||n;};}();var l=function(q,r){if(/px$/.test(r)||!r){return parseInt(r,10)||0;}var p=q.style.right,n=q.runtimeStyle.right;var m;q.runtimeStyle.right=q.currentStyle.right;q.style.right=r;m=q.style.pixelRight||0;q.style.right=p;q.runtimeStyle.right=n;return m;};g.getStyle=function(n,p){n=i(n);var m=n.style[j(k(p))];if(p=="opacity"){if(m){return parseInt(m,10);}if(m=(arguments.callee(n,"filter")||"").match(/alpha\(opacity=(.*)\)/)){if(m[1]){return parseInt(m[1],10)/100;}}return 1;}return(!m||m=="auto")?null:m;};g.getCurrentStyle=function(n,q,r){n=i(n);var m="";if(n.ownerDocument.defaultView&&n.ownerDocument.defaultView.getComputedStyle){var p=n.ownerDocument.defaultView.getComputedStyle(n,r||null);m=p?p.getPropertyValue(j(q)):null;}else{if(n.currentStyle){m=n.currentStyle[j(k(q))];}}if(q=="opacity"){if(m){return parseInt(m,10);}if(m=(arguments.callee(n,"filter")||"").match(/alpha\(opacity=(.*)\)/)){if(m[1]){return parseInt(m[1],10)/100;}}return 1;}return(!m||m=="auto")?null:m;};g.setStyle=function(p,n,q){p=i(p);if(typeof n=="string"){var m={};m[n]=q;n=m;}for(var r in n){if("opacity"==r&&!!window.ActiveXObject){p.style.filter="alpha(opacity="+(n[r]*100)+")";}else{p.style[k(j(r))]=n[r];}}};g.borderWidth=function(m){m=i(m);if(m.currentStyle&&!m.currentStyle.hasLayout){m.style.zoom=1;}return[m.clientTop,m.offsetWidth-m.clientWidth-m.clientLeft,m.offsetHeight-m.clientHeight-m.clientTop,m.clientLeft];};g.paddingWidth=function(m){m=i(m);return[l(m,g.getCurrentStyle(m,"padding-top")),l(m,g.getCurrentStyle(m,"padding-right")),l(m,g.getCurrentStyle(m,"padding-bottom")),l(m,g.getCurrentStyle(m,"padding-left"))];};g.marginWidth=function(m){m=i(m);return[l(m,g.getCurrentStyle(m,"margin-top")),l(m,g.getCurrentStyle(m,"margin-right")),l(m,g.getCurrentStyle(m,"margin-bottom")),l(m,g.getCurrentStyle(m,"margin-left"))];};}();g.$=i;return g;}();
/*! File: event.h.js | Build: 2012-09-22-14:33:26 | Revision: 46060 */
BB.EventH=function(){var b=function(f){var d=a.target(f),c=document;if(d){c=d.ownerDocument||d.document||(d.window||d.defaultView)&&d||document;}return c;};var a={pageX:function(){var d=a.getEvent.apply(a,arguments),c=b(d);return("pageX" in d)?d.pageX:(d.clientX+(c.documentElement.scrollLeft||c.body.scrollLeft)-2);},pageY:function(){var d=a.getEvent.apply(a,arguments),c=b(d);return("pageY" in d)?d.pageY:(d.clientY+(c.documentElement.scrollTop||c.body.scrollTop)-2);},detail:function(){var c=a.getEvent.apply(a,arguments);return c.detail||-(c.wheelDelta||0);},keyCode:function(){var c=a.getEvent.apply(a,arguments);return("keyCode" in c)?c.keyCode:(c.charCode||c.which||0);},stopPropagation:function(){var c=a.getEvent.apply(a,arguments);if(c.stopPropagation){c.stopPropagation();}else{c.cancelBubble=true;}},preventDefault:function(){var c=a.getEvent.apply(a,arguments);if(c.preventDefault){c.preventDefault();}else{c.returnValue=false;}},ctrlKey:function(){var c=a.getEvent.apply(a,arguments);return c.ctrlKey;},shiftKey:function(){var c=a.getEvent.apply(a,arguments);return c.shiftKey;},altKey:function(){var c=a.getEvent.apply(a,arguments);return c.altKey;},target:function(){var d=a.getEvent.apply(a,arguments),c=d.srcElement||d.target;if(!c){return null;}if(c.nodeType==3){c=c.parentNode;}return c;},relatedTarget:function(){var c=a.getEvent.apply(a,arguments);if("relatedTarget" in c){return c.relatedTarget;}if(c.type=="mouseover"){return c.fromElement||null;}if(c.type=="mouseout"){return c.toElement||null;}return null;},getEvent:function(d,c){if(d){return d;}else{if(c){if(c.document){return c.document.parentWindow.event;}if(c.parentWindow){return c.parentWindow.event;}}}if(window.event){return window.event;}else{var g=arguments.callee;do{if(/Event/.test(g.arguments[0])){return g.arguments[0];}}while(g=g.caller);return null;}}};return a;}();
/*! File: eventtarget.h.js | Build: 2012-09-22-14:33:26 | Revision: 46060 */
(function(){var c=BB.NodeH.$,b=BB.ObjectH.mix;var i=function(){var g=1,k="";return{get:function(p,m,n,l){var q=p[k]&&this[p[k]];if(q&&n[k]){return q[m+n[k]+(l||"")];}},add:function(q,p,m,n,l){if(!p[k]){p[k]=g++;}if(!n[k]){n[k]=g++;}var r=this[p[k]]||(this[p[k]]={});r[m+n[k]+(l||"")]=q;},remove:function(p,m,n,l){var q=p[k]&&this[p[k]];if(q&&n[k]){delete q[m+n[k]+(l||"")];}},removeEvents:function(p,l){var q=p[k]&&this[p[k]];if(q){var n=new RegExp("^[a-zA-Z.]*"+(l||"")+"\\d+$");for(var m in q){if(n.test(m)){j.removeEventListener(p,m.split(/[^a-zA-Z]/)[0],q[m]);delete q[m];}}}},removeDelegates:function(r,m,l){var s=r[k]&&this[r[k]];if(s){var q=new RegExp("^([a-zA-Z]+\\.)?"+(m||"")+"\\d+.+");for(var p in s){if(q.test(p)&&(!l||p.substr(p.length-l.length)==l)){var n=p.split(/\d+/)[0].split("."),t=j._DelegateCaptureEvents.indexOf(n[1]||n[0])>-1;j.removeEventListener(r,p.split(/[^a-zA-Z]/)[0],s[p],t);delete s[p];}}}}};}();function f(k,m,g,l){return i.get(k,m+(l?"."+l:""),g)||function(n){if(!l||l&&j._EventHooks[l][m](k,n,g)){return a(k,n,g,m);}};}function d(l,g,n,k,m){return i.get(l,n+(m?"."+m:""),k,g)||function(t){var s=[],r=t.srcElement||t.target;if(!r){return;}if(r.nodeType==3){r=r.parentNode;}while(r&&r!=l){s.push(r);r=r.parentNode;}s=BB.Selector.filter(s,g,l);for(var q=0,p=s.length;q<p;++q){if(!m||m&&j._DelegateHooks[m][n](s[q],t||window.event,k)){a(s[q],t,k,n);}if(s[q].parentNode&&s[q].parentNode.nodeType==11){if(t.stopPropagation){t.stopPropagation();}else{t.cancelBubble=true;}break;}}};}function a(k,l,g,m){return j.fireHandler.apply(null,arguments);}var j={_EventHooks:{},_DelegateHooks:{},_DelegateCaptureEvents:"change,focus,blur",fireHandler:function(k,l,g,m){l.userType=m;return g.call(k,l);},addEventListener:(function(){if(document.addEventListener){return function(l,m,k,g){l.addEventListener(m,k,g||false);};}else{return function(k,l,g){k.attachEvent("on"+l,g);};}}()),removeEventListener:(function(){if(document.removeEventListener){return function(l,m,k,g){l.removeEventListener(m,k,g||false);};}else{return function(k,l,g){k.detachEvent("on"+l,g);};}}()),on:function(m,q,l){if(q&&q.indexOf(",")>-1){var p=q.split(",");for(var k=0;k<p.length;k++){j.on(m,p[k],l);}return;}m=c(m);var g=j._EventHooks[q];if(g){for(var k in g){var n=f(m,k,l,q);i.add(n,m,k+"."+q,l);if(k==q){j.addEventListener(m,k,n);}else{j.on(m,k,n);}}}else{n=f(m,q,l);j.addEventListener(m,q,n);i.add(n,m,q,l);}},un:function(m,q,l){if(q&&q.indexOf(",")>-1){var p=q.split(",");for(var k=0;k<p.length;k++){j.un(m,p[k],l);}return;}m=c(m);if(!l){return i.removeEvents(m,q);}var g=j._EventHooks[q];if(g){for(var k in g){var n=f(m,k,l,q);if(k==q){j.removeEventListener(m,k,n);}else{j.un(m,k,n);}i.remove(m,k+"."+q,l);}}else{n=f(m,q,l);j.removeEventListener(m,q,n);i.remove(m,q,l);}},once:function(l,m,k){l=c(l);var g=function(){k.apply(this,arguments);j.un(l,m,g);};j.on(l,m,g);},delegate:function(l,n,k,s){if(k&&k.indexOf(",")>-1){var g=k.split(",");for(var p=0;p<g.length;p++){j.delegate(l,n,g[p],s);}return;}l=c(l);var r=j._DelegateHooks[k],q=j._DelegateCaptureEvents.indexOf(k)>-1;if(r){for(var p in r){var m=d(l,n,p,s,k);i.add(m,l,p+"."+k,s,n);if(p==k){j.addEventListener(l,p,m,q);}else{j.delegate(l,n,p,m);}}}else{m=d(l,n,k,s);j.addEventListener(l,k,m,q);i.add(m,l,k,s,n);}},undelegate:function(l,n,k,s){if(k&&k.indexOf(",")>-1){var g=k.split(",");for(var p=0;p<g.length;p++){j.undelegate(l,n,g[p],s);}return;}l=c(l);if(!s){return i.removeDelegates(l,k,n);}var r=j._DelegateHooks[k],q=j._DelegateCaptureEvents.indexOf(k)>-1;if(r){for(var p in r){var m=d(l,n,p,s,k);if(p==k){j.removeEventListener(l,p,m,q);}else{j.undelegate(l,n,p,m);}i.remove(l,p+"."+k,s,n);}}else{m=d(l,n,k,s);j.removeEventListener(l,k,m,q);i.remove(l,k,s,n);}},fire:(function(){if(document.dispatchEvent){return function(k,m){var g=null,l=k.ownerDocument||k;if(/mouse|click/i.test(m)){g=l.createEvent("MouseEvents");g.initMouseEvent(m,true,true,l.defaultView,1,0,0,0,0,false,false,false,false,0,null);}else{g=l.createEvent("Events");g.initEvent(m,true,true,l.defaultView);}return k.dispatchEvent(g);};}else{return function(g,l){try{return g.fireEvent("on"+l);}catch(k){}};}}())};j._defaultExtend=function(){var m=function(r){function n(s){j[s]=function(u,t){if(t){j.on(u,s,t);}else{if(u[s]){u[s]();}else{j.fire(u,s);}}};}for(var q=0,p=r.length;q<p;++q){n(r[q]);}};m("submit,reset,click,focus,blur,change,select".split(","));j.hover=function(p,q,n){p=c(p);j.on(p,"mouseenter",q);j.on(p,"mouseleave",n||q);};var g=navigator.userAgent;if(/firefox/i.test(g)){j._EventHooks.mousewheel=j._DelegateHooks.mousewheel={DOMMouseScroll:function(n,p){return true;}};}b(j._EventHooks,{mouseenter:{mouseover:function(p,q){var n=q.relatedTarget||q.fromElement;if(!n||!(p.contains?p.contains(n):(p==n||p.compareDocumentPosition(n)&16))){return true;}}},mouseleave:{mouseout:function(p,q){var n=q.relatedTarget||q.toElement;if(!n||!(p.contains?p.contains(n):(p==n||p.compareDocumentPosition(n)&16))){return true;}}}});b(j._DelegateHooks,j._EventHooks);if(!document.addEventListener){var k=function(p){switch(p.type){case"checkbox":case"radio":return p.checked;case"select-multiple":var r=[],q=p.options;for(var n=0;n<q.length;++n){if(q[n].selected){r.push(q[n].value);}}return r.join(",");default:return p.value;}};var l=function(n,q){var p=q.target||q.srcElement;if(k(p)!=p.__QWETH_pre_val){return true;}};b(j._DelegateHooks,{change:{focusin:function(n,q){var p=q.target||q.srcElement;p.__QWETH_pre_val=k(p);},deactivate:l,focusout:l,click:l},focus:{focusin:function(n,p){return true;}},blur:{focusout:function(n,p){return true;}}});}};j._defaultExtend();BB.EventTargetH=j;}());
/*! File: node.c.js | Build: 2012-09-22-14:33:26 | Revision: 46060 */
BB.NodeC={arrayMethods:"map,forEach,filter,toArray".split(","),wrapMethods:{$:-1,query:-1,addEventListener:0,removeEventListener:0,on:0,un:0,delegate:0,undelegate:0,fire:0,setStyle:0,addClass:0,removeClass:0,replaceClass:0,show:0,hide:0,setXY:0,setSize:0,setInnerSize:0,setRect:0,setInnerRect:0,nextSibling:-1,previousSibling:-1,ancestorNode:-1,parentNode:-1,firstChild:-1,lastChild:-1,insertAdjacentHTML:0,insertAdjacentElement:-1,appendChild:-1,insertBefore:-1,insertAfter:-1,insertSiblingBefore:-1,insertSiblingAfter:-1,replaceNode:-1,replaceChild:-1,removeNode:-1,set:0,setAttr:0,toggle:0,toggleClass:0,forEach:0,filter:-1,setValue:0,setHtml:0,submit:0,click:0,focus:0,blur:0,removeAttr:0,cloneNode:-1},gsetterMethods:{val:["getValue","setValue"],html:["getHtml","setHtml"],attr:["","getAttr","setAttr"],css:["","getCurrentStyle","setStyle"],size:["getSize","setSize"],xy:["getXY","setXY"]}};
/*! File: event.w.js | Build: 2012-09-22-14:33:26 | Revision: 46060 */
BB.EventW=function(){this.chromeHack;this.core=BB.EventH.getEvent.apply(null,arguments);this.target=this.target();this.relatedTarget=this.relatedTarget();this.pageX=this.pageX();this.pageY=this.pageY();this.detail=this.detail();this.keyCode=this.keyCode();this.ctrlKey=this.ctrlKey();this.shiftKey=this.shiftKey();this.altKey=this.altKey();this.button=this.core.button;this.clientX=this.core.clientX;this.clientY=this.core.clientY;this.type=this.core.type;};BB.Helper.methodizeTo(BB.EventH,BB.EventW.prototype,"core");
/*! File: dom_retouch.js | Build: 2012-09-22-14:33:26 | Revision: 46060 */
void function(){var a=window.BB,p=a.ObjectH,m=p.mix,r=p.getType,j=Array.prototype.push,x=a.Helper,t=x.applyTo,q=x.methodizeTo,s=a.NodeH,g=s.$,i=s.query,k=s.contains,f=a.EventTargetH,d=a.EventW,u=a.NodeC,l=a.DomU.create;f.fireHandler=function(B,D,C,z){var A=new d(D);return C.call(B,A);};m(s,f);x.gsetter(s,u.gsetterMethods);var c=x.mul(a.NodeH,true);x.gsetter(c,u.gsetterMethods);var b=a.Dom={};m(b,[a.DomU,c]);var n=function(z){if(!z){return null;}if(z instanceof n){return z;}var B=arguments[1];if(r(z)=="string"){if(/</.test(z)){var E=l(z,true,B).childNodes,D=[];for(var C=0,A;A=E[C];C++){D[C]=A;}return new n(D);}else{return new n(i(B,z));}}else{z=g(z,B);if(this instanceof n){this.core=z;if(r(z)=="array"){this.length=0;j.apply(this,z);}else{this.length=1;this[0]=z;}}else{return new n(z);}}};var v={};m(v,x.rwrap(c,n,u.wrapMethods));x.gsetter(v,u.gsetterMethods);t(v,n);q(v,n.prototype,"core");v=p.dump(a.ArrayH,u.arrayMethods);v=x.rwrap(v,n,u.wrapMethods);t(v,n);q(v,n.prototype);m(n.prototype,{first:function(){return n(this[0]);},last:function(){return n(this[this.length-1]);},item:function(z){return n(this[z]);}});a.$=a.g=b.$;a.$$=a.gg=n.$;a.NodeW=a.W=n;}();
/*! File: youa_retouch.js | Build: 2012-09-22-14:33:27 | Revision: 46060 */
void function(){var a=function(b,c){var d=(b.getAttribute&&b.getAttribute("data--ban"))|0;if(d){if(!b.__BAN_preTime||(new Date()-b.__BAN_preTime)>d){setTimeout(function(){b.__BAN_preTime=new Date()*1;});return true;}BB.EventH.preventDefault(c);return;}return true;};BB.EventTargetH._DelegateHooks.click=BB.EventTargetH._EventHooks.click={click:a};BB.EventTargetH._EventHooks.submit={submit:a};}();BB.YouaCore=true;BB.W=BB.NodeW;BB.ObjectH.mix(window,BB);BB.provideDomains[1]=window;
/*! File: ajax.js | Build: 2012-09-22-14:33:27 | Revision: 46060 */
(function(){function a(b){this.ops={url:null,method:"GET",async:true,cache:true,username:null,password:null,contentType:"application/x-www-form-urlencoded",charset:"UTF-8",scriptCharset:null,data:null,timeout:null,jsonp:"callback",dataType:"text",label:null,headers:null,onbefore:null,onsuccess:null,oncomplete:null,onerror:null,oncancel:null};BB.ObjectH.mix(this.ops,a.options,true);BB.ObjectH.mix(this.ops,b,true);this._xhr=null;this.completed=null;BB.CustEvent.createEvents(this,a.EVENTS);}BB.ObjectH.mix(a,{versions:["MSXML2.XMLHttp.6.0","MSXML2.XMLHttp.3.0","MSXML2.XMLHttp.5.0","MSXML2.XMLHttp.4.0","Msxml2.XMLHTTP","MSXML.XMLHttp","Microsoft.XMLHTTP"],EVENTS:["before","success","complete","error","cancel"],STATE_JSPERROR:1,STATE_JSERROR:2,STATE_JSSUCCESS:3,STATE_TIMEOUT:4,STATE_CANCEL:5,_xhrPool:[],options:{useXHRPool:false},getXHR:function(){if(a.options.useXHRPool&&a._xhrPool.length>0){return a._xhrPool.shift();}if(window.ActiveXObject){while(a.versions.length>0){try{return new ActiveXObject(a.versions[0]);}catch(b){a.versions.shift();continue;}}}else{if(window.XMLHttpRequest){return new XMLHttpRequest();}}},get:function(c,f,g){if(c&&BB.Dom.isElement(c)&&c.tagName.toLowerCase()=="form"){var d=c;c=d.action;g=f;f=d;}if(typeof f=="function"){g=f;f="";}var b=new a({url:c,method:"get",data:f,onsuccess:g});b.request();return b;},post:function(c,f,g){if(c&&BB.Dom.isElement(c)&&c.tagName.toLowerCase()=="form"){var d=c;c=d.action;g=f;f=d;}if(typeof f=="function"){g=f;f="";}var b=new a({url:c,method:"post",data:f,onsuccess:g});b.request();return b;},getScript:function(c,d,f){var b=new a({url:c,data:d,dataType:"script",onsuccess:f});b.request();return b;},getJSON:function(c,d,f){var b=new a({url:c,method:"get",data:d,dataType:"json",onsuccess:f});b.request();return b;},getJSONP:function(c,d,f){var b=new a({url:c,method:"get",data:d,dataType:"jsonp",onsuccess:f});b.request();return b;},isSuccess:function(c){var b=c.status;return !b||(b>=200&&b<300)||b==304;},isProcessing:function(c){var b=c.readyState;return b>0&&b<4;},_stringify:function(d){if(d==null||typeof d=="undefined"){return"";}if(typeof d=="string"){return d;}if(BB.Dom.isElement(d)&&d.tagName.toLowerCase()=="form"){return BB.Dom.encodeURIForm(d);}if(typeof d=="object"){var f=[];for(var c in d){if(d[c]==null){continue;}if(d[c].constructor==Array){for(var b=0;b<d[c].length;b++){f.push(encodeURIComponent(c)+"="+encodeURIComponent(d[c][b]));}}else{f.push(encodeURIComponent(c)+"="+encodeURIComponent(d[c]));}}return f.join("&");}return"";}});BB.ObjectH.mix(a.prototype,{_jsonp_num:0,_setRequestHeaders:function(){var d={"x-baidu-ie":"utf-8","x-baidu-rf":"json"};d["Content-type"]=this.ops.contentType+(this.ops.charset?"; charset="+this.ops.charset:"");var c=this.ops.headers;if(typeof(c)=="object"){BB.ObjectH.mix(d,c,true);}for(var b in d){this._xhr.setRequestHeader(b,d[b]);}},request:function(c,b,i){this.completed=false;var d=this.ops,m=this;if((d.onbefore&&d.onbefore.call(this,d)===false)||this.fire("before")===false){return;}if(arguments.length==1||BB.Dom.isElement(c)||typeof c=="object"){i=c;c=d.url;b=d.method;}else{c=c||d.url;b=b||d.method;i=i||d.data;}if(BB.Dom.isElement(i)&&i.tagName.toLowerCase()=="form"){c=i.action||c;b=i.method||b;}i=a._stringify(i);function j(t,u){t=t.indexOf("?")!=-1?t+"&"+u:t+"?"+u;return t;}if(i&&b.toLowerCase()=="get"){c=j(c,i);}if(!d.cache&&b.toLowerCase()=="get"){var s=+new Date,k=s+"="+s;c=j(c,k);}var m=this;var l=d.dataType,p,n;if(l=="jsonp"){var q="jsonp"+this._jsonp_num++,g=d.jsonp+"="+q;c=c.indexOf("?")!=-1?c+"&"+g:c+"?"+g;this._setupJSONP(c,d,q);return;}if(l=="script"){p=document.getElementsByTagName("head")[0];n=document.createElement("script");n.src=c;if(d.scriptCharset){n.charset=d.scriptCharset;}if(d.dataType=="script"){var f=false;n.onerror=n.onload=n.onreadystatechange=function(){if(!f&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){if(m._timer){clearTimeout(m._timer);}f=true;if(d.label&&d.onerror){try{BB.StringH.evalJs(d.label);m._handleComplete(a.STATE_JSSUCCESS);}catch(t){m._handleComplete(a.STATE_JSERROR);}}else{m._handleComplete(a.STATE_JSSUCCESS);}n.onerror=n.onload=n.onreadystatechange=null;p.removeChild(n);}};}p.appendChild(n);if(d.onerror&&d.timeout>0){this._timer=setTimeout(function(){m._handleComplete(a.STATE_TIMEOUT);},this.ops.timeout);}return;}this._xhr=a.getXHR();var r=this._xhr;if(this.ops.async){this._xhr.onreadystatechange=function(){if(r.readyState==4){m._handleComplete();r.onreadystatechange=new Function();if(a.options.useXHRPool){a._xhrPool.push(r);}}};}if(d.username){this._xhr.open(b.toUpperCase(),c,d.async,d.username,d.password);}else{this._xhr.open(b.toUpperCase(),c,d.async);}this._setRequestHeaders();if(i&&b.toLowerCase()=="post"){this._xhr.send(i);}else{this._xhr.send(null);}if(d.timeout>0&&d.async){this._checkTimeout();}if(!this.ops.async){this._handleComplete();}},_handleComplete:function(i,g){this.completed=true;var f=this.ops;var k=this._xhr;switch(i){case a.STATE_JSSUCCESS:f.onsuccess&&f.onsuccess.call(this,g,f);this.fire("success");break;case a.STATE_JSERROR:f.onerror&&f.onerror.call(this,null,f,"script");this.fire("error");break;case a.STATE_JSPERROR:f.onerror&&f.onerror.call(this,null,f,"jsonp");this.fire("error");break;case a.STATE_TIMEOUT:if(f.onerror){f.onerror.call(this,k,f,"timeout");}if(this._timer){clearTimeout(this._timer);}this.fire("error");break;case a.STATE_CANCEL:if(f.oncancel){f.oncancel.call(this,k,f);}this.fire("cancel");break;default:if(this._byCanceled){this._byCanceled=false;return;}if(a.isSuccess(k)&&f.onsuccess){var d=k.getResponseHeader("content-type"),c=f.dataType,j=c=="xml"||!c&&d&&d.indexOf("xml")>=0,b=j?k.responseXML:k.responseText;if(c=="json"){b=new Function("return "+b)();}f.onsuccess.call(this,b,f);}if(!a.isSuccess(k)&&f.onerror){f.onerror.call(this,k,f,"status");}if(a.isSuccess(k)){this.fire("success");}else{this.fire("error");}}if(f.oncomplete){f.oncomplete.call(this,k,f);}this.fire("complete");},_checkTimeout:function(){if(this.ops.timeout>0){var b=this;this._timer=setTimeout(function(){if(a.isProcessing(b._xhr)){b._abortXHR();b._handleComplete(a.STATE_TIMEOUT);}},this.ops.timeout);}},_abortXHR:function(){if(this._xhr){this._byCanceled=true;this._xhr.abort();this._handleComplete(a.STATE_CANCEL);}},cancel:function(){this._abortXHR();},_setupJSONP:function(b,d,n){var l=this;if(d.onerror&&d.timeout>0){this._timer=setTimeout(function(){l._handleComplete(a.STATE_TIMEOUT);},d.timeout);}if(BB.Env.ie){var q=document.createDocumentFragment(),m=document.createElement("script");function c(){q=m=m.onreadystatechange=q[n]=null;}if(d.scriptCharset){m.charset=d.scriptCharset;}q[n]=function(r){if(l._timer){clearTimeout(l._timer);}l._handleComplete(a.STATE_JSSUCCESS,r);c();};m.onreadystatechange=function(){if(m.readyState=="loaded"){l._handleComplete(a.STATE_JSPERROR);c();}};m.src=b;q.appendChild(m);}else{var g=document.createElement("iframe");g.style.display="none";function i(){g.callback=g.errorcallback=null;g.src="about:blank",g.parentNode.removeChild(g),g=null;}var f=d.scriptCharset;g.callback=function(r){if(l._timer){clearTimeout(l._timer);}l._handleComplete(a.STATE_JSSUCCESS,r);i();};g.errorcallback=function(){l._handleComplete(a.STATE_JSPERROR);i();};try{document.body.appendChild(g);var p=g.contentWindow.document;var k='<script type="text/javascript">function '+n+"(data) { window.frameElement.callback(data); }<\/script>";if(f){k+='<script type="text/javascript" src="'+b+'" charset="'+f+'"><\/script>';}else{k+='<script type="text/javascript" src="'+b+'"><\/script>';}k+='<script type="text/javascript">window.setTimeout("try { window.frameElement.errorcallback(); } catch (exp) {}", 1)<\/script>';p.open();p.write(k);p.close();}catch(j){}}}});BB.provide("Ajax",a);})();
/*! File: ajax_sns.opresult.js | Build: 2012-09-22-14:33:27 | Revision: 46060 */
if(!Ajax){Ajax={};}Ajax.Delay=950;Ajax.opResults=function(Results,url){if(!Results){return false;}if(typeof Results=="string"){if(Results.replace(/(\n|\r)+/g,"").trim().substr(0,1)!="{"){return Results;}else{try{eval("var status="+Results);}catch(e){alert("\n"+Results);return{err:"inter"};}}}else{var status=Results;}status.isop=true;switch(status.err){case"mcphp.ok":if(url!=false){if(url){if(url===true){setTimeout("window.location = window.location.href;window.location.reload(true);",Ajax.Delay);}else{setTimeout("window.location='"+url+"'",Ajax.Delay);}}else{if(status.data.url==null){setTimeout("window.location = window.location.href;window.location.reload(true);",Ajax.Delay);}else{setTimeout("window.location='"+status.data.url+"'",Ajax.Delay);}}}else{status.isop=false;}break;case"gmap.internal":alert("");break;case"mcphp.u_vcode":var els=document.getElementsByName("_vcode"),elKeys=document.getElementsByName("_vcode_key");if(els.length>0&&elKeys.length>0){var el=els[0],elKey=elKeys[0];Valid.fail(el,"",true);if($("_vcode_img")){$("_vcode_img").src="/vcode?k="+elKey.value+"&random="+Math.random();}}break;case"mcphp.u_input":for(var i in status.data){var tempEl=document.getElementsByName(i);try{if(tempEl.length>0){var unfound=true;if(tempEl.length==1){Valid.fail(tempEl[0],"",true);}else{for(var x=0;x<tempEl.length;x++){if(status.fields[i]==tempEl[x].value.encode4Html()){Valid.fail(tempEl[x],"",true);unfound=false;break;}}}}}catch(e){alert("");}}break;case"mcphp.u_notfound":alert("");break;case"mcphp.u_antispam":alert("");break;case"mcphp.u_deny":alert("");break;case"mcphp.u_bfilter":alert("");break;case"login":case"mcphp.u_login":try{User.Power.login();}catch(e){try{top.User.Power.login();}catch(e1){location.href="http://www.leho.com/";}}break;case"mcphp.u_power":window.location="http://co.youa.baidu.com/content/misc/err/nopower/index.html";break;case"mcphp.fatal":case"mar.sys_inter":alert("");break;default:status.isop=false;}return status;};Ajax.CSRF=0;(function(){var a=Ajax.post;Ajax.post=function(b,c,d){if(Ajax.CSRF){a("/_posttoken",function(g){g=Ajax.opResults(g,false);if(g.err=="mcphp.ok"){if(b&&BB.Dom.isElement(b)&&b.tagName.toLowerCase()=="form"){var f=b;b=f.action;d=c;c=f;}if(typeof c=="function"){d=c;c="";}c=Ajax._stringify(c);c=c==""?"_posttoken="+g.data.token:c+"&_posttoken="+g.data.token;a(b,c,d);}});}else{a(b,c,d);}};})();(function(){var j=window.BB,c=j.ObjectH.mix,b=j.Helper,d=j.Dom,a=j.NodeW,i=b.applyTo,g=b.methodizeTo;var f={ajaxForm:function(m,k){m=$(m);if(!m){return;}var l={validate:true,delay:1000,freeze:3000,url:null,before:null,errors:null,after:null,success:function(p){if(l.status){setTimeout(function(){$$(l.status).hide();},l.delay);}var t=Ajax.Delay;Ajax.Delay=l.delay;var n=Ajax.opResults(p,l.url);Ajax.Delay=t;if(l.after){var s=l.after(n);if(s===false){return;}}if(n.isop){return;}if(l.errors){for(var q in l.errors){if(n.err==q){alert(l.errors[q]);break;}}}}};c(l,k,true);$$(m).attr("data--ban",l.freeze).on("submit",function(n){n.preventDefault();if(l.validate&&!Valid.checkAll(this)){return;}if(l.before&&!l.before(this)){return;}Ajax.post(this,l.success);if(l.status){$$(l.status).show();}});}};f=b.mul(f);c(d,f);f=b.rwrap(f,a,0);i(f,a);g(f,a.prototype,"core");})();
/*! File: tmpl.js | Build: 2012-09-22-14:33:28 | Revision: 46060 */
(function(){var c="sArrCMX",a=c+'.push("';var b={js:{tagG:"js",isBgn:1,isEnd:1,sBgn:'");',sEnd:";"+a},"if":{tagG:"if",isBgn:1,rlt:1,sBgn:'");if',sEnd:"{"+a},elseif:{tagG:"if",cond:1,rlt:1,sBgn:'");} else if',sEnd:"{"+a},"else":{tagG:"if",cond:1,rlt:2,sEnd:'");}else{'+a},"/if":{tagG:"if",isEnd:1,sEnd:'");}'+a},"for":{tagG:"for",isBgn:1,rlt:1,sBgn:'");for',sEnd:"{"+a},"/for":{tagG:"for",isEnd:1,sEnd:'");}'+a},"while":{tagG:"while",isBgn:1,rlt:1,sBgn:'");while',sEnd:"{"+a},"/while":{tagG:"while",isEnd:1,sEnd:'");}'+a}};function d(k){var m=-1,l=[];var g=[[/\{strip\}([\s\S]*?)\{\/strip\}/g,function(n,i){return i.replace(/[\r\n]\s*\}/g," }").replace(/[\r\n]\s*/g,"");}],[/\\/g,"\\\\"],[/"/g,'\\"'],[/\r/g,"\\r"],[/\n/g,"\\n"],[/\{[\s\S]*?\S\}/g,function(p){p=p.substr(1,p.length-2);for(var r=0;r<j.length;r++){p=p.replace(j[r][0],j[r][1]);}var q=p;if(/^(.\w+)\W/.test(q)){q=RegExp.$1;}var n=b[q];if(n){if(n.isBgn){var s=l[++m]={tagG:n.tagG,rlt:n.rlt};}if(n.isEnd){if(m<0){throw new Error(""+p);}s=l[m--];if(s.tagG!=n.tagG){throw new Error(""+s.tagG+"--"+q);}}else{if(!n.isBgn){if(m<0){throw new Error(""+p);}s=l[m];if(s.tagG!=n.tagG){throw new Error(""+s.tagG+"--"+q);}if(n.cond&&!(n.cond&s.rlt)){throw new Error(""+q);}s.rlt=n.rlt;}}return(n.sBgn||"")+p.substr(q.length)+(n.sEnd||"");}else{return'",('+p+'),"';}}]];var j=[[/\\n/g,"\n"],[/\\r/g,"\r"],[/\\"/g,'"'],[/\\\\/g,"\\"],[/\$(?=\w+)/g,"opts."],[/print/g,c+".push"]];for(var f=0;f<g.length;f++){k=k.replace(g[f][0],g[f][1]);}if(m>=0){throw new Error(""+l[m].tagG);}k="var "+c+"=[];"+a+k+'");return '+c+'.join("");';return new Function("opts",k);}BB.Tmpl=d;})();
/*! File: valid.js | Build: 2012-09-22-14:33:28 | Revision: 46060 */
(function(){var a=window.BB,z=a.getScript,l=a.ObjectH.mix,i=a.StringH,v=i.trim,j=i.tmpl,k=i.dbc2sbc,t=i.byteLen,q=i.evalExp,p=a.DateH.format,x=a.NodeH,f=x.$,g=x.query,d=x.getValue,n=function(C,B){return C[B]||C.getAttribute(B)||u(C,B);},r=a.DomU.create,m=a.CustEvent;var A={VERSION:"0.0.1",EVENTS:"hint,blur,pass,fail,beforecheckall,checkall,initall".split(","),REQ_ATTR:"reqMsg",_curReqAttr:"reqMsg"};var u=function(F,H){var C=A.CheckRules;if(!C){return null;}H=H.toLowerCase();F=f(F);var G=[];if(F.id){G.push("#"+F.id);}if(F.name){G.push("@"+F.name);}G=G.concat(F.className.match(/\.[\w\-]+/g)||[],(F.tagName+"").toLowerCase());for(var E=0,B=G.length;E<B;E++){var D=G[E];if((D in C)&&(H in C[D])){return C[D][H];}}return null;};m.createEvents(A,A.EVENTS);l(A,{hint:function(B){A.fire(new m(B,"hint"));},blur:function(B){A.fire(new m(B,"blur"));},pass:function(B){A.fire(new m(B,"pass"));},fail:function(C,D,B){if(B){A.focusFailEl(C);}var E=new m(C,"fail");E.errMsg=D;A.fire(E);},checkAll_stamp:1,isChecking:false,checkAll:function(K,J,B){J=(J!=false);var C=new m(K,"beforecheckall");C.opts=B||{};A.fire(C);A.isChecking=true;var G=K.elements,F=[];for(var H=0,D;D=G[H++];){if(!n(D,"forceVld")&&(D.disabled||D.readOnly||!D.offsetWidth)){continue;}if(!A.check(D,false,B)){F.push(D);}}var I=!F.length;var E=new m(K,"checkall");E.result=I;E.failEls=F;A.fire(E);A.isChecking=false;A.checkAll_stamp++;if(!I&&J){window.setTimeout(function(){A.check(F[0],true,B);},10);}return I;},check:function(C,B,D){if(!b.required(C)||n(C,"datatype")&&!b.datatype(C)||(D&&D.myValidator&&!D.myValidator(C))){if(B){A.focusFailEl(C);A.check(C,false,D);}return false;}return true;},renderResult:function(D,B,E,C){if(B){A.pass(D);}else{A.fail(D,E,C);}},focusFailEl:function(B){var C=n(B,"focusEl");C=C&&f(C)||B;try{C.focus();if(!C.tagName){return;}if(a.NodeW&&a.NodeW.shine4Error){a.NodeW.shine4Error(C);}C.select();}catch(D){}},initAll:function(B){if(!A._isInitialized){A._isInitialized=true;if(document.addEventListener){document.addEventListener("focus",function(G){var F=G.target;if(F&&",INPUT,SELECT,TEXTAREA,OBJECT".indexOf(","+F.tagName)>-1){A.hint(F);}},true);document.addEventListener("blur",function(G){var F=G.target;if(F&&",INPUT,SELECT,TEXTAREA,OBJECT".indexOf(","+F.tagName)>-1){A.blur(F);}},true);}else{document.attachEvent("onfocusin",function(F){A.hint(F.srcElement);});document.attachEvent("onfocusout",function(F){A.blur(F.srcElement);});}}var D=g(B,"input");for(var C=0;C<D.length;C++){A.initEl(D[C]);}var E=new m(B,"initall");A.fire(E);},initEl:function(E){var D=n(E,"datatype");if(D=="d"||D=="daterange"){var B=E.nextSibling;if(B&&B.tagName=="IMG"){return;}var C=c.getCalendarImg().cloneNode(true);C.onclick=function(F){c.getDateFromPopup(E);};E.parentNode.insertBefore(C,B);}},resetAll:function(E){var C=E.elements;for(var B=0,D;D=C[B++];){A.pass(D);}}});var s=A.Msgs={n_integer:"{$0}",n_format:'"{$0}"',n_upper:"<strong>{$0}</strong>",n_lower:"<strong>{$0}</strong>",nrange_from:"",nrange_to:"",n_useless_zero:'"0"',d_format:'"YYYY-MM-DD"',d_upper:"<strong>{$0}</strong>",d_lower:"<strong>{$0}</strong>",daterange_from:"",daterange_to:"",daterange_larger_span:"<strong>{$0}</strong>",text_longer:"<strong>{$0}</strong>",text_shorter:"<strong>{$0}</strong>",bytetext_longer:"<strong>{$0}</strong>",bytetext_shorter:"<strong>{$0}</strong>",richtext_longer:"<strong>{$0}</strong>",richtext_shorter:"<strong>{$0}</strong>",_reconfirm:"",_time:"",_minute:"",_email:"Email",_mobilecode:"",_phone:"",_phonewithext:"",_phonezone:"",_phonecode:"",_phoneext:"",_zipcode:"",_idnumber:"1518",_bankcard:"",_cnname:"",_vcode:"",_imgfile:"jpgjpegpnggiftifbmp",_regexp:"",_magic:"",_req_text:"{$0}",_req_select:"{$0}",_req_file:"{$0}",_logicrequired:"{$0}.",getMsg:function(B,C){return n(B,C)||n(B,"errmsg")||s[C]||C;}};var c=A.Utils={getCalendarImg:(function(){var B=null;return function(){return B=B||r('<img src="'+a.PATH+'components/valid/assets/Calendar.gif" align="absMiddle" class="calendar-hdl-img" style="cursor:pointer">');};})(),getDateFromPopup:function(C){if(a.Calendar){a.Calendar.getDateFromPopup(C);}else{var B=a.PATH+"components/valid/calendar.js?v={version}";z(B,function(){a.Calendar.getDateFromPopup(C);});}},setTextValue:function(B,C){if(B.createTextRange){B.createTextRange().text=C;}else{B.value=C;}},trimTextValue:function(C){var B=v(C.value);if(B!=C.value){c.setTextValue(C,B);}},dbc2sbcValue:function(C){var B=k(d(C));if(B!=d(C)){c.setTextValue(C,B);}},prepare4Vld:function(B){if(B.getAttribute("ignoredbc")){c.dbc2sbcValue(B);}if(B.type=="text"||B.type=="textarea"){c.trimTextValue(B);}}};var b=A.Validators={};l(b,[{required:function(C,I){c.prepare4Vld(C);var J=A._curReqAttr||A.REQ_ATTR;var H=n(C,J);if(H){var B=n(C,"reqlogic");if(B){return b.logicrequired(C,I,B);}else{var G=false;var F="_req_text";if(C.tagName=="SELECT"){G=(C.value!=""||C.length<2||(C.length==2&&C.options[1].value==""));F="_req_select";}else{if(C.type=="checkbox"||C.type=="radio"){var D=document.getElementsByName(C.name);for(var E=0;E<D.length;E++){if(G=D[E].checked){break;}}F="_req_select";}else{G=(d(C)!="");if(C.type=="file"){F="_req_file";}}}if(I!=false){A.renderResult(C,G,!G&&H.indexOf(" ")==0?H.substr(1):j(s[F],[H]));}return G;}}return true;},datatype:function(D,G,C){C=C||n(D,"datatype");if(!C){A.pass(D,G);return true;}var E=C.split("-")[0].toLowerCase(),F=C.substr(E.length+1),B=b[E];if(!B){throw"Unknown datatype: "+C;}return F?B(D,G,F):B(D,G);},n:function(C,K,J){c.prepare4Vld(C);c.dbc2sbcValue(C);var D=d(C);var H=(D=="");var E=null;if(!H){var L=(J||n(C,"n-pattern")||"10").split(".");var I=L[0]|0||10,G=L[1]|0;if(G<1){if((/\D/).test(D)||D.length>I){E=j(s.getMsg(C,"n_integer"),[1+new Array(I+1).join("0")]);}}else{var M="^\\d{1,"+(I-G)+"}(\\.\\d{1,"+G+"})?$";if(!(new RegExp(M)).test(D)){E=j(s.getMsg(C,"n_format"),[(new Array(I-G+1)).join("X")+"."+(new Array(G+1)).join("X")]);}}if((/^0\d/).test(D)){E=s.getMsg(C,"n_useless_zero");}if(!E){var B=n(C,"maxValue");if(B&&(parseFloat(D,10)>B-0)){E=j(s.getMsg(C,"n_upper"),[B,D]);}var F=n(C,"minValue");if(F&&parseFloat(D,10)<F-0){E=j(s.getMsg(C,"n_lower"),[F,D]);}}if(E){H=false;}else{H=true;}}if(K!=false){A.renderResult(C,H,E);}return H;},nrange:function(B,J,I){var F=b.n(B,J,I);if(F){var E=f(n(B,"fromNEl"));var C=f(n(B,"toNEl"));if(E){C=B;}else{if(C){E=B;}else{var D=B.parentNode.getElementsByTagName("input");if(D[0]==B){E=B;C=D[1];}else{E=D[0];C=B;}}}var G=B==E?C:E;var H=b.n(G,J,I);if(H){if(d(G)&&d(B)){if(d(E)*1>d(C)*1){F=false;if(B==E){A.fail(E,s.getMsg(E,"nrange_from"));}if(B==C){A.fail(C,s.getMsg(C,"nrange_to"));}}}}}return F;},d:function(C,J){c.prepare4Vld(C);c.dbc2sbcValue(C);var D=d(C);var I=(D=="");var E=null;if(!I){D=D.replace(/(^\D+)|(\D+$)/g,"").replace(/\D+/g,"/");if(!(/\D/).test(D)){if(D.length==8){D=D.substr(0,4)+"/"+D.substr(4,2)+"/"+D.substr(6,2);}}var G=new Date(D);if(!isNaN(G)){var F=D.split(/\D+/ig);if(F.length==3&&F[0].length==4&&F[2].length<3){I=true;if(p(G)!=d(C)){c.setTextValue(C,p(G));D=d(C);}}}if(!I){E=s.getMsg(C,"d_format");}else{var B=C.getAttribute("maxValue")||"2049-12-31";if(G>new Date(B.replace(/\D+/g,"/"))){I=false;E=j(s.getMsg(C,"d_upper"),[B,D]);}var H=C.getAttribute("minValue")||"1900-01-01";if(G<new Date(H.replace(/\D+/g,"/"))){I=false;E=j(s.getMsg(C,"d_lower"),[H,D]);}}}if(J!=false){A.renderResult(C,I,E);}return I;},daterange:function(B,J){var D=b.d(B,J);if(D){var I=f(n(B,"fromDateEl"));var G=f(n(B,"toDateEl"));if(I){G=B;}else{if(G){I=B;}else{var C=B.parentNode.getElementsByTagName("input");if(C[0]==B){I=B;G=C[1];}else{I=C[0];G=B;}}}var E=B==I?G:I;var H=b.d(E,J);if(H){if(d(E)&&d(B)){if(d(I)>d(G)){D=false;if(B==I){A.fail(I,s.getMsg(I,"daterange_from"));}if(B==G){A.fail(G,s.getMsg(G,"daterange_to"));}}if(d(I)&&d(G)){var F=n(I,"maxDateSpan")||n(G,"maxDateSpan");if(F&&(new Date(d(G).replace(/-/g,"/"))-new Date(d(I).replace(/-/g,"/")))>(F-1)*24*3600000){A.fail(B,j(s.getMsg(B,"daterange_larger_span"),[F]));D=false;}}}}}return D;},_checkLength:function(C,K,J,I){c.prepare4Vld(C);var E=d(C);var H=(E=="");var F=null;if(!H){var G=(n(C,"maxLength")||1024)*1;var D=(n(C,"minLength")||0)*1;var B=J(C);if(B>G){F=j(s.getMsg(C,"text_longer")||s[I+"_longer"],[G,B]);}else{if(B<D){F=j(s.getMsg(C,"text_shorter")||s[I+"_shorter"],[D,B]);}else{H=true;}}}if(K!=false){A.renderResult(C,H,F);}return H;},text:function(B,C){return b._checkLength(B||this,C,function(D){return d(D).length;},"text");},bytetext:function(B,C){return b._checkLength(B||this,C,function(D){return t(d(D));},"text");},richtext:function(B,C){return b._checkLength(B||this,C,function(D){var E=d(D);if(D.getAttribute("ignoreTag")){return E.replace(/<img[^>]*>/g,"a").replace(/<[^>]*>/g,"").length;}else{return E.length;}},"richtext");},idnumber:function(D,H){c.prepare4Vld(D);c.dbc2sbcValue(D);var E=d(D);var G=(E=="");if(!G){if((/^\d{15}$/).test(E)){G=true;}else{if((/^\d{17}[0-9xX]$/).test(E)){var I="1,0,x,9,8,7,6,5,4,3,2".split(",");var B="7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2".split(",");var J=E.toLowerCase().split("");var C=0;for(var F=0;F<17;F++){C+=B[F]*J[F];}G=(I[C%11]==J[17]);}}}if(H!=false){A.renderResult(D,G,!G&&s.getMsg(D,"_idnumber"));}return G;},cnname:function(C,E){c.prepare4Vld(C);var D=d(C);var B=(D=="");if(!B){B=t(D)<=32&&/^[\u4e00-\u9fa5a-zA-Z.\u3002\u2022]{2,32}$/.test(D);}if(E!=false){A.renderResult(C,B,!B&&s.getMsg(C,"_cnname"));}return B;},reconfirm:function(C,E){c.prepare4Vld(C);var D=f(C.getAttribute("reconfirmFor"));var B=(d(C)==d(D));if(E!=false){A.renderResult(C,B,!B&&s.getMsg(C,"_reconfirm"));}return B;},imgfile:function(D,F){var E=d(D);var B=(E=="");if(!B){var C=E.substring(E.lastIndexOf(".")+1);B=(/^(jpg|jpeg|png|gif|tif|bmp)$/i).test(C);}if(F!=false){A.renderResult(D,B,!B&&s.getMsg(D,"_imgfile"));}return B;},reg:function(D,H,E,G,C){if(C){c.dbc2sbcValue(D);}c.prepare4Vld(D);var F=d(D);var B=(F=="");if(!B){G=G||"_regexp";E=E||n(D,"reg-pattern");if("string"==typeof E){E.replace(/^\/(.*)\/([ig]*)$/g,function(J,I,K){E=new RegExp(I,K||"");});}B=E.test(F);}if(H!=false){A.renderResult(D,B,!B&&s.getMsg(D,G));}return B;},magic:function(D,G,F){c.prepare4Vld(D);F=F||n(D,"magic-pattern");var C=(d(D)==""||!F);if(!C){var E={el:D,Validators:b};var B=F.replace(/(\w+)/ig,'opts.Validators.datatype(opts.el,false,"$1")');C=q(B,E);}if(G!=false){A.renderResult(D,C,!C&&s.getMsg(D,"_magic"));}return C;},uv:function(B,C){if(B.onblur&&!B.onblur()){return false;}return true;},notempty:function(B){c.prepare4Vld(B);return !!d(B);},logicrequired:function(E,I,D){E=E||this;D=D||n(E,"reqlogic");var G=A._curReqAttr||A.REQATTR,H=n(E,G),F={el:E,Validators:b},C=D.replace(/\$([\w-]+)/ig,'opts.Validators.notempty($("$1"))').replace(/this/ig,"opts.Validators.notempty(opts.el)");var B=q(C,F);if(I!=false){A.renderResult(E,B,!B&&H.indexOf(" ")==0?H.substr(1):j(s._logicrequired,[H]));}return !!B;}},{time:function(B,C){return b.reg(B,C,/^(([0-1]\d)|(2[0-3])):[0-5]\d:[0-5]\d$/,"_time",true);},minute:function(B,C){return b.reg(B,C,/^(([0-1]\d)|(2[0-3])):[0-5]\d$/,"_minute",true);},email:function(B,C){return b.reg(B||this,C,/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/,"_email",true);},mobilecode:function(B,C){return b.reg(B||this,C,/^(13|15|18|14)\d{9}$/,"_mobilecode",true);},phone:function(B,C){return b.reg(B||this,C,/^0(10|2\d|[3-9]\d\d)[1-9]\d{6,7}$/,"_phone",true);},phonewithext:function(B,C){return b.reg(B||this,C,/^0(10|2\d|[3-9]\d\d)[1-9]\d{6,7}(-\d{1,7})?$/,"_phonewithext",true);},phonezone:function(B,C){return b.reg(B||this,C,/^0(10|2\d|[3-9]\d\d)$/,"_phonezone",true);},phonecode:function(B,C){return b.reg(B||this,C,/^[1-9]\d{6,7}$/,"_phonecode",true);},phoneext:function(B,C){return b.reg(B||this,C,/^\d{1,6}$/,"_phoneext",true);},zipcode:function(B,C){return b.reg(B||this,C,/^\d{6}$/,"_zipcode",true);},vcode:function(B,C){return b.reg(B||this,C,/^\w{4}$/,"_vcode",true);}}]);a.provide("Valid",A);})();(function(){var p=BB.Valid,a=p.Validators,i=p.Utils,l=BB.NodeH,f=l.$,c=function(s,r){return s.getAttribute(r);},j=l.addClass,q=l.removeClass,k=l.replaceClass,n=l.show,g=l.hide,d=l.getValue,b=function(r,u){var u=u||{},t=document.createElement(r);for(var s in u){t[s]=u[s];}return t;};p._getHintEl=function(s){var r=c(s,"hintEl");return r&&f(r);};p._getEmptyHintEl=function(s){var r=c(s,"emptyHintEl");return r&&f(r);};p._getEmEl=function(v){var u=c(v,"emEl");if(u){return f(u);}var r=[v,v.parentNode];for(var t=0;t<2;t++){var x=r[t];for(var s=0;s<5;s++){x=x.nextSibling;if(!x){break;}if(x.tagName=="EM"){return x;}}}return null;};p._getErrEmEl=function(s,t){var r=s.nextSibling;if(r){if(r.tagName=="EM"||!r.tagName&&(r=r.nextSibling)&&r.tagName=="EM"){return r;}}if(!t){return null;}r=b("em",{className:"error"});s.parentNode.insertBefore(r,s.nextSibling);return r;};p.onhint=function(u){var t=u.target;if(!t||!t.type||"text,hidden,password,textarea,checkbox,radio,select-one,select-multiple".indexOf(t.type)==-1){return;}var s=p._getHintEl(t),r=p._getEmptyHintEl(t);s&&k(s,"dark-hint","hint");if(r){clearTimeout(t.__placeholderTimer||0);j(r,"dark-emptyhint");}if(!a.required(t,false)&&!d(t)){return;}if(!a.datatype(t,false)){a.datatype(t,true);}};p.onblur=function(v){var u=v.target;if(!u||!u.type||"text,hidden,password,textarea,checkbox,radio,select-one,select-multiple".indexOf(u.type)==-1){return;}var t=p._getHintEl(u),s=p._getEmptyHintEl(u);t&&k(t,"hint","dark-hint");a.datatype(u,true);if(s){clearTimeout(u.__placeholderTimer||0);function r(){if(d(u)){j(s,"dark-emptyhint");}else{q(s,"dark-emptyhint");}}r();u.__placeholderTimer=setTimeout(r,600);}};p.onpass=function(u){var t=u.target,s=p._getEmEl(t);q(t,"error");if(s){if((s.__vld_fail_stamp|0)!=p.checkAll_stamp){n(s);var r=p._getErrEmEl(s);r&&g(r);}}};p.onfail=function(v){var t=v.target,u=v.errMsg;j(t,"error");t.__vld_errMsg=u;var s=p._getEmEl(t);if(s){if((s.__vld_fail_stamp|0)!=p.checkAll_stamp){g(s);var r=p._getErrEmEl(s,true);r.innerHTML=u;n(r);}if(p.isChecking){s.__vld_fail_stamp=p.checkAll_stamp;}}};var m=10000;p.oninitall=function(r){setTimeout(function(){W("input,textarea",r.target).forEach(function(v){var x=v.getAttribute("data-placeholder"),s=p._getEmptyHintEl(v),t=document.createElement("input");if(!("placeholder" in t)||!v.getAttribute("placeholder")){if(x&&!s){var u="emptyhint-"+m++;s=b("span",{id:u,innerHTML:x,className:"emptyhint"});s.onclick=function(){try{v.focus();}catch(z){}};v.parentNode.insertBefore(s,v);v.setAttribute("emptyhintel",u);}if(s){if((d(v)||"").trim()){j(s,"dark-emptyhint");}else{q(s,"dark-emptyhint");}}}});},10);};p.bindPhoneEls=function(z){var v=["phonezone","phonecode","phoneext","mobilecode"],x=[4,8,4,11],r=[" "," ",""," "],s=z.reqMsgs||r,u=z.ids;for(var t=0;t<u.length;t++){$$(u[t]).attr("reqMsg",s[t]||r[t]).attr("dataType",v[t]).set("maxLength",x[t]);}f(u[0]).setAttribute("reqlogic","(!$"+u[1]+" && !$"+u[2]+") || $"+u[0]);f(u[1]).setAttribute("reqlogic","(!$"+u[0]+" && !$"+u[2]+") || $"+u[1]);if(u.length==4){f(u[3]).setAttribute("reqlogic","$"+u[0]+" || $"+u[1]+"|| $"+u[2]+"|| $"+u[3]);}};BB.DomU.ready(function(){p.initAll();});})();
/*! File: anim.manager.js | Build: 2012-09-22-14:33:27 | Revision: 46060 */
(function(){var a=BB.CustEvent;var b=function(f,c,d){this.eftFun=f;this.dur=c;this.opts=d;this.isPlaying=false;this._startDate=0;this._costDur=null;a.createEvents(this,"play,beforeplay,stop,pause,resume,suspend,reset");return this;};b._fps=28;b._interval=window.setInterval("BB.Effect._playAll()",b._fps);b._playingObjs=[];b._playAll=function(){for(var f=0;f<b._playingObjs.length;f++){var c=b._playingObjs[f];var d=c.step();if(d>=1){f--;}}};b.prototype.step=function(f){var d=this;var g=new Date();d._startDate||(d._startDate=g);if(f==undefined){f=(g-d._startDate)/d.dur;}else{if(f<0){f=0;}d._startDate=g-f*d.dur;}d.per=f;if(f>=1){f=1;d.eftFun(1);d.fire("play");d.fire("suspend");d._costDur=null;d.isPlaying=false;var c=b._playingObjs.indexOf(d);if(c>-1){b._playingObjs.splice(c,1);}}else{d.eftFun(f);d.fire("play");}return f;};b.prototype.play=function(){var c=b._playingObjs.indexOf(this);if(c>-1){this.stop();}this._startDate=0;b._playingObjs.push(this);this.fire("beforeplay");this.isPlaying=true;this.step();};b.prototype.stop=function(){var c=b._playingObjs.indexOf(this);if(c>-1){b._playingObjs.splice(c,1);}this._startDate=0;this._costDur=null;this.isPlaying=false;this.fire("stop");};b.prototype.suspend=function(){var c=b._playingObjs.indexOf(this);if(c>-1){b._playingObjs.splice(c,1);}this.eftFun(1);this.fire("suspend");this.isPlaying=false;};b.prototype.pause=function(){var c=b._playingObjs.indexOf(this);if(c>-1){this._costDur=new Date()-this._startDate;b._playingObjs.splice(c,1);this.fire("pause");}};b.prototype.resume=function(){var c=b._playingObjs.indexOf(this);if(c<0){if(this._costDur==null){return;}this._startDate=new Date()-this._costDur;b._playingObjs.push(this);this.fire("resume");}};b.prototype.reset=function(){this._startDate=new Date();this.costDur=null;this.eftFun(0);this.fire("reset");};BB.Effect=b;})();
/*! File: anim.base.js | Build: 2012-09-22-14:33:27 | Revision: 46060 */
(function(){var g=BB.Dom,f=BB.ObjectH.mix,i=BB.ClassH.extend,a=BB.CustEvent;$=g.$;var d=function(){this.initialize.apply(this,arguments);};d.DefaultEasing=function(j,k){return k*j;};d.DefaultDur=3000;d.EVENTS=["beforeplay","play","stop","pause","resume","suspend","reset"];d.prototype=(function(){return{initialize:function(l,j,k,n){if(!g.isElement($(l))){throw new Error(["Animation","Initialize Error","Element Not Found!"]);}this.el=$(l);this.attrs=j;this.dur=k||d.DefaultDur;this.easing=typeof n=="function"?n:d.DefaultEasing;a.createEvents(this,d.EVENTS);if(!this.effect){var m=this;this.effect=new BB.Effect(function(p){m.onTween(p);},this.dur);d.EVENTS.forEach(function(p){m.effect.on(p,function(){m.fire(p);});});}this.initData();},patterns:{noNegatives:/width|height|opacity|padding/i,defaultUnit:/width|height|top$|bottom$|left$|right$/i},initData:function(){for(var j in this.attrs){var k=this.attrs[j];if(typeof k.from=="undefined"){k.finish=k.start=this.getAttr(j);}else{k.finish=k.start=k.from;}if(typeof k.to!="undefined"){k.finish=k.to;}if(typeof k.by!="undefined"){k.finish=k.start+k.by;}k.dis=k.finish-k.start;if(typeof k.units=="undefined"){k.units=this.getUnits(j);}if(typeof k.easing=="undefined"){k.easing=this.easing;}}},getUnits:function(j){if(this.patterns.defaultUnit.test(j)){return"px";}return"";},getAttr:function(j){return parseFloat(g.getCurrentStyle(this.el,j));},setAttr:function(j,l,k){if(!isNaN(l)){g.setStyle(this.el,j,l+k);}},onTween:function(k){for(var j in this.attrs){var l=this.attrs[j];if(typeof l.begin!="undefined"&&k<0.1){this.setAttr(j,l.begin,l.units);}var m=l.start+l.easing(k,l.dis);if(m<0&&this.patterns.noNegatives.test(j)){m=0;}this.setAttr(j,m,l.units);if(typeof l.end!="undefined"&&k==1){this.setAttr(j,l.end,l.units);}}},isPlay:function(){return this.effect&&this.effect.isPlaying;},play:function(){this.effect.play();},pause:function(){this.effect.pause();},resume:function(){this.effect.resume();},suspend:function(){this.effect.suspend();},stop:function(){this.effect.stop();},reset:function(){this.effect.reset();},step:function(j){return this.effect.step(j);}};})();var b=i(function(){},d);f(b.prototype,{getAttr:function(j){return this.el[j]|0;},setAttr:function(j,k){this.el[j]=Math.round(k);}},true);var c=i(function(){},d);f(c.prototype,{patterns:{rgb:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,hex:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,hex3:/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i},parseColor:function(j){if(j.length==3){return j;}var k=this.patterns.hex.exec(j);if(k&&k.length==4){return[parseInt(k[1],16),parseInt(k[2],16),parseInt(k[3],16)];}k=this.patterns.rgb.exec(j);if(k&&k.length==4){return[parseInt(k[1],10),parseInt(k[2],10),parseInt(k[3],10)];}k=this.patterns.hex3.exec(j);if(k&&k.length==4){return[parseInt(k[1]+k[1],16),parseInt(k[2]+k[2],16),parseInt(k[3]+k[3],16)];}return[0,0,0];},initData:function(){for(var j in this.attrs){var k=this.attrs[j];if(typeof k.from=="undefined"){k.finish=k.start=this.parseColor(this.getAttr(j));}else{k.finish=k.start=this.parseColor(k.from);}if(typeof k.to!="undefined"){k.finish=this.parseColor(k.to);}if(typeof k.easing=="undefined"){k.easing=this.easing;}k.dis=[];k.finish.forEach(function(m,l){k.dis.push(m-k.start[l]);});}},getAttr:function(j){return g.getStyle(this.el,j);},setAttr:function(j,k){if(typeof k=="string"){g.setStyle(this.el,j,k);}else{g.setStyle(this.el,j,"rgb("+k.join(",")+")");}},onTween:function(l){for(var j in this.attrs){var n=this.attrs[j];var k=[];var m=this;n.start.forEach(function(q,p){var r=q+n.easing(l,n.dis[p]);k.push(Math.max(Math.floor(r),0));});this.setAttr(j,k);if(typeof n.end!="undefined"&&l==1){this.setAttr(j,n.end);}}}},true);BB.provide({Anim:d,ScrollAnim:b,ColorAnim:c});})();
/*! File: anim.easing.js | Build: 2012-09-22-14:33:27 | Revision: 46060 */
(function(){var a={easeNone:function(b,c){return c*b;},easeIn:function(b,c){return c*b*b;},easeOut:function(b,c){return -c*b*(b-2);},easeBoth:function(b,c){if((b/=0.5)<1){return c/2*b*b;}return -c/2*((--b)*(b-2)-1);},easeInStrong:function(b,c){return c*b*b*b*b;},easeOutStrong:function(b,c){return -c*((b-=1)*b*b*b-1);},easeBothStrong:function(b,c){if((b/=0.5)<1){return c/2*b*b*b*b;}return -c/2*((b-=2)*b*b*b-2);},elasticIn:function(c,g){if(c==0){return 0;}if(c==1){return g;}var b=g*0.3,i=g,f=b/4;return -(i*Math.pow(2,10*(c-=1))*Math.sin((c*g-f)*(2*Math.PI)/b));},elasticOut:function(c,g){if(c==0){return 0;}if(c==1){return g;}var b=g*0.3,i=g,f=b/4;return i*Math.pow(2,-10*c)*Math.sin((c*g-f)*(2*Math.PI)/b)+g;},elasticBoth:function(c,g){if(c==0){return 0;}if((c/=0.5)==2){return g;}var b=0.3*1.5,i=g,f=b/4;if(c<1){return -0.5*(i*Math.pow(2,10*(c-=1))*Math.sin((c-f)*(2*Math.PI)/b));}return i*Math.pow(2,-10*(c-=1))*Math.sin((c-f)*(2*Math.PI)/b)*0.5+g;},backIn:function(c,f){var b=1.70158;return f*c*c*((b+1)*c-b);},backOut:function(c,f){var b=1.70158;return f*((c=c-1)*c*((b+1)*c+b)+1);},backBoth:function(c,f){var b=1.70158;if((c/=0.5)<1){return f/2*(c*c*(((b*=(1.525))+1)*c-b));}return f/2*((c-=2)*c*(((b*=(1.525))+1)*c+b)+2);},bounceIn:function(b,c){return c-Anim.Easing.bounceOut(1-b,c);},bounceOut:function(b,c){if(b<(1/2.75)){return c*(7.5625*b*b);}else{if(b<(2/2.75)){return c*(7.5625*(b-=(1.5/2.75))*b+0.75);}else{if(b<(2.5/2.75)){return c*(7.5625*(b-=(2.25/2.75))*b+0.9375);}}}return c*(7.5625*(b-=(2.625/2.75))*b+0.984375);},bounceBoth:function(b,c){if(b<0.5){return Anim.Easing.bounceIn(b*2,c)*0.5;}return Anim.Easing.bounceOut(b*2-1,c)*0.5+c*0.5;}};BB.Anim.Easing=a;})();
/*! File: anim.h.js | Build: 2012-09-22-14:33:27 | Revision: 46060 */
(function(){var j=window.BB,d=j.ObjectH.mix,c=j.Helper,f=j.Dom,a=j.NodeW,i=c.applyTo,g=c.methodizeTo;var b=(function(){var k=function(q,m,s,p,n){var l=j.Anim;switch(n){case"color":l=j.ColorAnim;break;case"scroll":l=j.ScrollAnim;break;}var r=new l(q,m,p||800);if(s){r.on("suspend",function(){s();});}r.play();return r;};return{fadeIn:function(m,l,n){return k(m,{opacity:{to:1},display:{begin:"block"}},n,l);},fadeOut:function(m,l,n){return k(m,{opacity:{to:0},display:{end:"none"}},n,l);},slideUp:function(m,l,n){return k(m,{height:{to:0}},n,l);},slideDown:function(n,m,p){n=j.$$(n);n.setStyle("height","");var l=parseInt(n.getCurrentStyle("height"));n.setStyle("height","0");return k(n,{height:{from:0,to:l}},p,m);},shine4Error:function(m,l,n){return k(m,{backgroundColor:{from:"#f33",to:"#fff",end:""}},n,l,"color");}};})();b=c.mul(b);d(f,b);b=c.rwrap(b,a,0);i(b,a);g(b,a.prototype,"core");})();
/*! File: dragdrop.js | Build: 2012-09-22-14:33:28 | Revision: 46060 */
(function(){var d=function(){this.constructor=arguments.callee;this._offsetX=0;this._offsetY=0;this._previousMouseX=0;this._previousMouseY=0;this._startX=0;this._startY=0;this._locked=false;this._element=null;this._handler={};this._delayTimer=0;this._delayHandler=function(){};this.delayTime=0;this.document=document;this.window=window;this.events={mousedown:"mousedown",mousemove:"mousemove",mouseup:"mouseup"};this._initialize.apply(this,arguments);};d.prototype=function(){var i=BB.Dom,g=BB.ObjectH,f=BB.CustEvent;return{_initialize:function(j){var l=[];for(var k in this.events){l.push(this.events[k]);}f.createEvents(this,l);g.mix(this,j||{},true);},_dispatch:function(k,j){var l=new f(this._element,k);l.position=j;return this.fire(l);},_clearSelection:function(){try{this.document.selection&&this.document.selection.empty&&(this.document.selection.empty(),1)||this.window.getSelection&&this.window.getSelection().removeAllRanges();}catch(j){}},_bind:function(k){var j=this;this._element=k;this._locked=true;this._handler.move=function(l){j._move(l);};this._handler.up=function(l){setTimeout(function(){j._up(l);},0);j._dispose();};i.on(this.document,"mousemove",this._handler.move);i.on(this.document,"mouseup",this._handler.up);if(this.document.documentElement.setCapture){i.on(this.document.documentElement,"losecapture",this._handler.up);this.document.documentElement.setCapture();}},_dispose:function(){i.un(this.document,"mousemove",this._handler.move);i.un(this.document,"mouseup",this._handler.up);if(this.document.documentElement.setCapture){i.un(this.document.documentElement,"losecapture",this._handler.up);this.document.documentElement.releaseCapture();}this._element=null;this._locked=false;this._handler={};},_down:function(l){this._clearSelection();var k=this._element,j=i.getXY(k);this._previousMouseX=l.pageX;this._previousMouseY=l.pageY;this._startX=j[0];this._startY=j[1];this._offsetX=l.pageX-j[0];this._offsetY=l.pageY-j[1];this._dispatch(this.events.mousedown,{startX:this._startX,startY:this._startY,offsetX:this._offsetX,offsetY:this._offsetY,pageX:l.pageX-this._offsetX,pageY:l.pageY-this._offsetY,mouseX:l.pageX,mouseY:l.pageY,deltaX:l.pageX-this._previousMouseX,deltaY:l.pageY-this._previousMouseY});},_move:function(k){var j=this;this._clearSelection();this._delayHandler=function(){j._delayTimer=0;j._delayHandler=function(){};j._dispatch(j.events.mousemove,{startX:j._startX,startY:j._startY,offsetX:j._offsetX,offsetY:j._offsetY,pageX:k.pageX-j._offsetX,pageY:k.pageY-j._offsetY,mouseX:k.pageX,mouseY:k.pageY,deltaX:k.pageX-j._previousMouseX,deltaY:k.pageY-j._previousMouseY});j._previousMouseX=k.pageX;j._previousMouseY=k.pageY;};if(!this._delayTimer){this._delayTimer=setTimeout(function(){j._delayHandler();},this.delayTime);}},_up:function(j){if(this._delayTimer){this._delayHandler();}this._dispatch(this.events.mouseup,{startX:this._startX,startY:this._startY,offsetX:this._offsetX,offsetY:this._offsetY,pageX:j.pageX-this._offsetX,pageY:j.pageY-this._offsetY,mouseX:j.pageX,mouseY:j.pageY,deltaX:j.pageX-this._previousMouseX,deltaY:j.pageY-this._previousMouseY});},start:function(k,j){if(this._locked){return;}this._bind(j);this._down(k);}};}();var b=function(){this.constructor=arguments.callee;this.source=null;this.proxy=null;this.handle=null;this.locked=false;this._handler=null;this._initialize.apply(this,arguments);};b.parse=function(f){if(f.source){return new this(f);}};b.prototype=function(){return{_initialize:function(f){this.source=f.source;this.proxy=f.proxy||f.source;this.handle=f.handle||f.source;this.locked=f.locked||false;this._handler=null;}};}();var a=function(){this.constructor=arguments.callee;this._drag=null;this._context={};this._activeEntity=null;this._locked=false;this._activeTimer=0;this._dragging=false;this._entered=false;this.document=document;this.window=window;this.entities=[];this.target=null;this.activeDelay=1000;this.activePixel=3;this.delayTime=1;this.CLASS_SOURCE_DRAGGING="source-dragging";this.CLASS_PROXY_DRAGGING="proxy-dragging";this.CLASS_SOURCE_DRAGOVER="source-dragover";this.CLASS_PROXY_DRAGOVER="proxy-dragover";this.events={dragstart:"dragstart",drag:"drag",dragend:"dragend",dragenter:"dragenter",dragover:"dragover",dragleave:"dragleave",invaliddrop:"invaliddrop",dragdrop:"dragdrop"};this._initialize.apply(this,arguments);};a.prototype=function(){var i=BB.Dom,g=BB.ObjectH,f=BB.CustEvent;return{_initialize:function(j,m){var l=[];for(var k in this.events){l.push(this.events[k]);}f.createEvents(this,l);g.mix(this,j||{},true);this._drag=new d;this._drag.window=this.window;this._drag.document=this.document;this._drag.delayTime=this.delayTime||1;if(m){m=this._convertEntitys(m);for(var k=0;k<m.length;++k){this.register(m[k]);}}this._bind();},_restore:function(){if(this._activeTimer){clearTimeout(this._activeTimer);this._activeTimer=0;}this._activeEntity=null;this._context={};this._entered=false;this._dragging=false;},_convertEntitys:function(j){return j instanceof this.window.Array?j:[j];},convertPosition:function(j){},_bind:function(){var j=this;this._drag.onmousedown=function(k){j._down(k);};this._drag.onmousemove=function(k){j._move(k);};this._drag.onmouseup=function(k){j._up(k);j._restore();};},_register:function(k){var j=this;i.on(k.handle,"mousedown",k._handler=function(l){if(j._locked||k.locked){return;}j._activeEntity=k;j._drag.start(l,k.source);});},_dispose:function(j){i.un(j.handle,"mousedown",j._handler);j._handler=null;},register:function(j){j=b.parse(j);this.entities.push(j);this._register(j);},dispose:function(k){for(var j=0;j<this.entities.length;++j){if(this.entities[j].source==k){this._dispose(this.entities[j]);this.entities.splice(j,1);break;}}},_dispatch:function(k,j){var l=new f(this._activeEntity,k);l.position=j;l.context=this._context;return this.fire(l);},_operateMoveTargetEvent:function(j){if(this.target){var k=this.target({target:this._activeEntity,position:j,context:this._context});if(k){if(this._entered){return this._dispatch(this.events.dragover,j);}else{this._entered=true;i.addClass(this._activeEntity.source,this.CLASS_SOURCE_DRAGOVER);i.addClass(this._activeEntity.proxy,this.CLASS_PROXY_DRAGOVER);return this._dispatch(this.events.dragenter,j);}}else{if(this._entered){this._entered=false;i.removeClass(this._activeEntity.source,this.CLASS_SOURCE_DRAGOVER);i.removeClass(this._activeEntity.proxy,this.CLASS_PROXY_DRAGOVER);return this._dispatch(this.events.dragleave,j);}}}return true;},_operateUpTargetEvent:function(j){if(this.target){i.removeClass(this._activeEntity.source,this.CLASS_SOURCE_DRAGOVER);i.removeClass(this._activeEntity.proxy,this.CLASS_PROXY_DRAGOVER);if(this._entered){return this._dispatch(this.events.dragdrop,j);}else{return this._dispatch(this.events.invaliddrop,j);}}return true;},_down:function(k){var j=this;if(this._activeTimer){clearTimeout(this._activeTimer);}this._activeTimer=setTimeout(function(){j._activeTimer=0;j._dragging=true;i.addClass(j._activeEntity.source,j.CLASS_SOURCE_DRAGGING);i.addClass(j._activeEntity.proxy,j.CLASS_PROXY_DRAGGING);if(!j._dispatch(j.events.dragstart,k.position)){return;}if(!j._operateMoveTargetEvent(k.position)){return;}},this.activeDelay);},_move:function(j){if(this._dragging){this.convertPosition(j.position);if(!this._operateMoveTargetEvent(j.position)){return;}if(!this._dispatch(this.events.drag,j.position)){return;}}else{if(Math.sqrt(Math.pow(j.position.pageX-j.position.startX,2)+Math.pow(j.position.pageY-j.position.startY,2))>this.activePixel){if(this._activeTimer){clearTimeout(this._activeTimer);this._activeTimer=0;}this._dragging=true;i.addClass(this._activeEntity.source,this.CLASS_SOURCE_DRAGGING);i.addClass(this._activeEntity.proxy,this.CLASS_PROXY_DRAGGING);if(!this._dispatch(this.events.dragstart,j.position)){return;}if(!this._operateMoveTargetEvent(j.position)){return;}}}},_up:function(j){if(this._dragging){this.convertPosition(j.position);i.removeClass(this._activeEntity.source,this.CLASS_SOURCE_DRAGGING);i.removeClass(this._activeEntity.proxy,this.CLASS_PROXY_DRAGGING);if(!this._operateUpTargetEvent(j.position)){return;}if(!this._dispatch(this.events.dragend,j.position)){return;}}},lock:function(){this._locked=true;},unlock:function(){this._locked=false;}};}();var c=BB.ClassH.extend(function(){this.container=null;this.withProxy=true;this.constraintX=false;this.constraintY=false;this.CLASS_PROXY="drag-proxy";arguments.callee.$super.apply(this,arguments);this.target=this._convertTarget(this.target);},a,false);BB.ObjectH.mix(c.prototype,function(){var g=BB.Dom,f=BB.ObjectH;return{_convertTarget:function(i){if(!i){return null;}if(i instanceof this.window.Function){return i;}if(!(i instanceof this.window.Array)){i=[i];}return function(p){var m=i,j=m.length,k=0,n=null;for(;k<j;++k){n=g.getRect(m[k]);if(p.position.mouseX>n.left&&p.position.mouseX<n.right&&p.position.mouseY>n.top&&p.position.mouseY<n.bottom){p.context.target=m[k];return true;}}return false;};},convertPosition:function(i){if(this.container){var k=(this.container instanceof this.window.Function)?this.container():g.getRect(this.container),j=this._activeEntity.proxy;i.pageX=Math.max(Math.min(i.pageX,k.right-j.offsetWidth),k.left);i.pageY=Math.max(Math.min(i.pageY,k.bottom-j.offsetHeight),k.top);}},ondragstart:function(j){if(this.withProxy){var i=g.getRect(j.target.source);g.setInnerSize(j.target.proxy,i.width,i.height);g.setXY(j.target.proxy,j.position.startX,j.position.startY);}g.setXY(j.target.proxy,this.constraintY?null:j.position.pageX,this.constraintX?null:j.position.pageY);},ondrag:function(i){g.setXY(i.target.proxy,this.constraintY?null:i.position.pageX,this.constraintX?null:i.position.pageY);},ondragend:function(j){var i=this.constraintY?null:j.position.pageX,k=this.constraintX?null:j.position.pageY;g.setXY(j.target.proxy,i,k);g.setXY(j.target.source,i,k);},_getProxy:function(){var i=g.create('<div class="'+this.CLASS_PROXY+'"></div>',false,this.document);this.document.body.insertBefore(i,this.document.body.firstChild);return i;},register:function(i){if(!i.proxy&&this.withProxy){i.proxy=this._getProxy();}i=b.parse(i);this.entities.push(i);this._register(i);}};}(),true);BB.provide("DragBase",d);BB.provide("DragEntity",b);BB.provide("Drag",a);BB.provide("SimpleDrag",c);})();
/*! File: dd-controller.js | Build: 2012-09-22-14:33:28 | Revision: 46060 */
BB.provide("DD",{});void function(){var f=BB.ObjectH,g=BB.EventTargetH,c=BB.EventH,b=BB.DD,a=BB.ArrayH;var d=function(){this.sources=[];};BB.ObjectH.mix(d.prototype,function(){return{_dragstart:function(i){},_drag:function(i){},_dragend:function(i){},_down:function(l,m,j){this._clearSelection();if(l.__dragged){return;}var i=this,k=l.context;k.startX=m[0];k.startY=m[1];k.deltaX=0;k.deltaY=0;k.x=k.startX;k.y=k.startY;l.__moveInfo={x:0,y:0,handler:function(){},timer:null};l.mousedown();if(!l.startLimits&&!l.delayTime||j){l.__dragged=true;l.dragstart();this._dragstart(l);}else{if(l.delayTime){l.__startTimer=setTimeout(function(){l.__startTimer=0;l.__dragged=true;l.dragstart();i._dragstart(l);},l.delayTime);}}},_move:function(k,m){this._clearSelection();var i=this,j=k.context;if(!k.__dragged){j.x=m[0];j.y=m[1];if(Math.sqrt(Math.pow(m[0]-j.startX,2)+Math.pow(m[1]-j.startY,2))>=k.startLimits){if(k.__startTimer){clearTimeout(k.__startTimer);k.__startTimer=0;}k.__dragged=true;k.dragstart();this._dragstart(k);}}else{if(!k.moveTimer){j.deltaX=m[0]-j.x;j.deltaY=m[1]-j.y;j.x=m[0];j.y=m[1];k.drag();this._drag(k);}else{var l=k.__moveInfo;l.x=m[0];l.y=m[1];if(!l.timer){l.timer=setTimeout(l.handler=function(){l.timer=0;l.handler=function(){};j.deltaX=l.x-j.x;j.deltaY=l.y-j.y;j.x=l.x;j.y=l.y;k.drag();i._drag(k);},k.moveTimer);}}}},_up:function(j){var i=this;if(j.__startTimer){clearTimeout(j.__startTimer);j.__startTimer=0;}else{if(j.__dragged){if(j.__moveInfo.timer){j.__moveInfo.handler();}j.__dragged=false;this._dragend(j);j.dragend();}}},_clearSelection:function(){try{document.selection&&document.selection.empty&&(document.selection.empty(),1)||window.getSelection&&window.getSelection().removeAllRanges();}catch(i){}},_addListener:function(j){var i=this,l=j.host.ownerDocument,k=l.parentWindow||l.defaultView;j.__listenHandler={move:function(m){i._move(j,[c.pageX(m),c.pageY(m)]);},up:function(){i.stopDrag(j);}};g.on(l,"mousemove",j.__listenHandler.move);g.on(l,"mouseup",j.__listenHandler.up);if(l.documentElement.setCapture){g.on(l.documentElement,"losecapture",j.__listenHandler.up);l.documentElement.setCapture();}else{g.on(k,"blur",j.__listenHandler.up);}},_removeListener:function(i){var k=i.host.ownerDocument,j=k.parentWindow||k.defaultView;g.un(k,"mousemove",i.__listenHandler.move);g.un(k,"mouseup",i.__listenHandler.up);if(k.documentElement.releaseCapture){g.un(k.documentElement,"losecapture",i.__listenHandler.up);k.documentElement.releaseCapture();}else{g.un(j,"blur",i.__listenHandler.up);}},startDrag:function(j,k,i){if(a.contains(this.sources,j)){return false;}this.sources.push(j);this._down(j,k,i);this._addListener(j);return true;},stopDrag:function(k){var j=a.indexOf(this.sources,k);if(j==-1){return false;}this.sources.splice(j,1);this._up(k);this._removeListener(k);return true;}};}(),true);b.Controller=new d;}();
/*! File: dd-controller-target.js | Build: 2012-09-22-14:33:28 | Revision: 46060 */
void function(){var f=BB.ObjectH,d=BB.NodeH,b=BB.DD,c=BB.HashSetH,a=BB.ArrayH;f.mix(b.Controller,function(){return{targets:[],weights:{mouseover:function(j,i,g){return j[0]>g[3]&&j[0]<g[1]&&j[1]>g[0]&&j[1]<g[2]?0:null;},heartover:function(j,i,g){var j=[i[3]+Math.abs(i[1]-i[3])/2,i[0]+Math.abs(i[2]-i[0])/2];return j[0]>g[3]&&j[0]<g[1]&&j[1]>g[0]&&j[1]<g[2]?0:null;},intersect:function(n,j,g){var k=Math.max(j[3],g[3]),i=Math.min(j[1],g[1]),m=Math.max(j[0],g[0]),l=Math.min(j[2],g[2]);if(k>i||m>l){return null;}else{return 1/((i-k)*(l-m));}}},_inGroup:function(i,g){return !!c.intersect(i,g).length;},_getOverTargetInfo:function(g){var n=this.targets,j=n.length;if(!j){return null;}var t={enters:[],overs:[],leaves:[],misses:[],enterWeights:[],overWeights:[],length:0},s=[g.context.x,g.context.y],r=d.getXY(g.activity),p=[r[1],r[0]+g.activity.offsetWidth,r[1]+g.activity.offsetHeight,r[0]],m=null;for(var k=0;k<j;++k){if(!this._inGroup(g.groups,n[k].groups)){continue;}++t.length;var q=d.getXY(n[k].host);rect2=[q[1],q[0]+n[k].host.offsetWidth,q[1]+n[k].host.offsetHeight,q[0]];m=this.weights[g.mode.toLowerCase()](s,p,rect2);if(m!=null){if(g.__isOverTargets[k]){t.overs.push(n[k]);t.overWeights.push(m);}else{g.__isOverTargets[k]=true;t.enters.push(n[k]);t.enterWeights.push(m);}}else{if(g.__isOverTargets[k]){g.__isOverTargets[k]=false;t.leaves.push(n[k]);}else{t.misses.push(n[k]);}}}return t;},_dragstart:function(g){g.__isOverTargets={};this._drag(g);},_drag:function(k){var m=this._getOverTargetInfo(k);if(!m||!m.length){return;}if(m.leaves.length){k.dragleave(m.leaves);for(var j=0,g=m.leaves.length;j<g;++j){m.leaves[j].dragleave(k);}}if(m.enters.length){k.dragenter(m.enters,m.enterWeights);for(var j=0,g=m.enters.length;j<g;++j){m.enters[j].dragenter(k);}}if(m.overs.length){k.dragover(m.overs,m.overWeights);for(var j=0,g=m.overs.length;j<g;++j){m.overs[j].dragover(k);}}},_dragend:function(k){var m=this._getOverTargetInfo(k);if(!m||!m.length){return;}if(m.overs.length){k.drophit(m.overs,m.overWeights);for(var j=0,g=m.overs.length;j<g;++j){m.overs[j].drophit(k);}}else{k.dropmiss();for(var j=0,g=m.misses.length;j<g;++j){m.misses[j].dropmiss(k);}}},addTarget:function(g){if(a.contains(this.targets,g)){return false;}this.targets.push(g);return true;},removeTarget:function(j){var g=a.indexOf(this.targets,j);if(g==-1){return false;}this.targets.splice(g,1);return true;}};}(),true);}();
/*! File: dd-source.js | Build: 2012-09-22-14:33:28 | Revision: 46060 */
void function(){var d=BB.ObjectH,k=BB.CustEvent,j=BB.EventTargetH,i=BB.EventH,g=BB.NodeH,f=BB.DomU,c=BB.DD,a=BB.ArrayH;var b=function(){this.controller=c.Controller;this.behavior=null;this.delayTime=1000;this.startLimits=3;this.moveTimer=0;this.locked=false;this.preventDefault=true;this.stopPropagation=true;this.mode="mouseover";this.groups=[];this.context={startX:0,startY:0,x:0,y:0,deltaX:0,deltaY:0,hostStartX:0,hostStartY:0,hostStartWidth:0,hostStartHeight:0};this.handles=[];this._handler={host:null,handles:[],hostClick:null,handleClicks:[]};this.activity=null;this.activityHandle=null;this.host=null;this.proxy=null;this._proxy=null;this.withProxy=false;this.className={host:"dd-source",proxy:"dd-proxy",handle:"dd-handle",drag:"dd-source-drag",over:"dd-source-over",proxydrag:"dd-proxy-drag",proxyover:"dd-proxy-over"};this.initialize.apply(this,arguments);};b.EVENTS={BEFORE_MOUSE_DOWN:"beforemousedown",AFTER_MOUSE_DOWN:"aftermousedown",BEFORE_DRAG_START:"beforedragstart",AFTER_DRAG_START:"afterdragstart",BEFORE_DRAG:"beforedrag",AFTER_DRAG:"afterdrag",BEFORE_DRAG_END:"beforedragend",AFTER_DRAG_END:"afterdragend",BEFORE_DRAG_ENTER:"beforedragenter",AFTER_DRAG_ENTER:"afterdragenter",BEFORE_DRAG_OVER:"beforedragover",AFTER_DRAG_OVER:"afterdragover",BEFORE_DRAG_LEAVE:"beforedragleave",AFTER_DRAG_LEAVE:"afterdragleave",BEFORE_DROP_HIT:"beforedrophit",AFTER_DROP_HIT:"afterdrophit",BEFORE_DROP_MISS:"beforedropmiss",AFTER_DROP_MISS:"afterdropmiss"};d.mix(b.prototype,function(){return{initialize:function(p,l){var n=[];for(var m in b.EVENTS){n.push(b.EVENTS[m]);}k.createEvents(this,n);this.host=p;d.mix(this,l||{},true);this._bindEvent();},render:function(n){d.mix(this,n||{},true);var q=f.query("."+this.className.handle,this.host);for(var p=0,m=q.length;p<m;++p){this.addHandle(q[p]);}},_createProxy:function(){var m=this.host.ownerDocument,l=f.createElement("div",{className:this.className.proxy},m);m.body.insertBefore(l,m.body.firstChild);return l;},_bindEvent:function(){var l=this;j.on(this.host,"mousedown",this._handler.host=function(m){if(l.handles.length==0&&!l.locked){if(l.preventDefault){i.preventDefault(m);}if(l.stopPropagation){i.stopPropagation(m);}l.start([i.pageX(m),i.pageY(m)]);}});if(this.preventDefault){j.on(this.host,"click",this._handler.hostClick=function(m){if(l.handles.length==0&&!l.locked){i.preventDefault(m);}});}},_unBindEvent:function(){j.un(this.host,"mousedown",this._handler.host);if(this._handler.hostClick){j.un(this.host,"click",this._handler.hostClick);}},addHandle:function(n){if(a.contains(this.handles,n)){return false;}var l=this,m=function(q){if(!l.locked){if(l.preventDefault){i.preventDefault(q);}if(l.stopPropagation){i.stopPropagation(q);}l.start([i.pageX(q),i.pageY(q)],false,this);}},p=function(q){if(!l.locked){i.preventDefault(q);}};this.handles.push(n);this._handler.handles.push(m);this._handler.handleClicks.push(p);j.on(n,"mousedown",m);if(this.preventDefault){j.on(n,"click",p);}return true;},removeHandle:function(n){var l=a.indexOf(this.handles,n);if(l==-1){return false;}var m=this._handler.handles[l],p=this._handler.handleClicks[l];this.handles.splice(l,1);this._handler.handles.splice(l,1);this._handler.handleClicks.splice(l,1);j.un(n,"mousedown",m);j.un(n,"click",p);return true;},dispose:function(){for(var n=0,m=this.handles.length;n<m;++n){this.removeHandle(this.handles[n]);}if(this._proxy){this.host.ownerDocument.body.removeChild(this._proxy);this._proxy=null;}this._unBindEvent();},start:function(n,l,m){this.activityHandle=m||this.host;this.controller.startDrag(this,n,l);},stop:function(){this.controller.stopDrag(this);},_dispatch:function(n,l,m){var p=new k(l?l:this,n);if(m){p.weights=m;}return this.fire(p);},mousedown:function(){if(!this._dispatch(b.EVENTS.BEFORE_MOUSE_DOWN)){return;}this._dispatch(b.EVENTS.AFTER_MOUSE_DOWN);},dragstart:function(){var l=g.getXY(this.host);this.context.hostStartX=l[0];this.context.hostStartY=l[1];this.context.hostStartWidth=this.host.clientWidth;this.context.hostStartHeight=this.host.clientHeight;if(this.withProxy&&!this.proxy){this.proxy=this._proxy=this._createProxy();}g.addClass(this.host,this.className.drag);if(this.proxy){this.proxy.style.left=this.context.hostStartX+"px";this.proxy.style.top=this.context.hostStartY+"px";this.proxy.style.width=this.context.hostStartWidth+"px";this.proxy.style.height=this.context.hostStartHeight+"px";g.addClass(this.proxy,this.className.proxydrag);this.activity=this.proxy;}else{this.activity=this.host;}this.behavior.start(this);if(!this._dispatch(b.EVENTS.BEFORE_DRAG_START)){return;}this.behavior.trigger(this);this._dispatch(b.EVENTS.AFTER_DRAG_START);},drag:function(){if(!this._dispatch(b.EVENTS.BEFORE_DRAG)){return;}this.behavior.trigger(this);this._dispatch(b.EVENTS.AFTER_DRAG);},dragend:function(){g.removeClass(this.host,this.className.drag);if(this.proxy){g.removeClass(this.proxy,this.className.proxydrag);this.activity=this.host;}if(!this._dispatch(b.EVENTS.BEFORE_DRAG_END)){return;}this.behavior.trigger(this);this._dispatch(b.EVENTS.AFTER_DRAG_END);},dragenter:function(l,m){g.addClass(this.host,this.className.over);if(this.proxy){g.addClass(this.proxy,this.className.proxyover);}if(!this._dispatch(b.EVENTS.BEFORE_DRAG_ENTER,l,m)){return;}this._dispatch(b.EVENTS.AFTER_DRAG_ENTER,l,m);},dragover:function(l,m){g.addClass(this.host,this.className.over);if(this.proxy){g.addClass(this.proxy,this.className.proxyover);}if(!this._dispatch(b.EVENTS.BEFORE_DRAG_OVER,l,m)){return;}this._dispatch(b.EVENTS.AFTER_DRAG_OVER,l,m);},dragleave:function(l){g.removeClass(this.host,this.className.over);if(this.proxy){g.removeClass(this.proxy,this.className.proxyover);}if(!this._dispatch(b.EVENTS.BEFORE_DRAG_LEAVE,l)){return;}this._dispatch(b.EVENTS.AFTER_DRAG_LEAVE,l);},drophit:function(l,m){g.removeClass(this.host,this.className.over);if(this.proxy){g.removeClass(this.proxy,this.className.proxyover);}if(!this._dispatch(b.EVENTS.BEFORE_DROP_HIT,l,m)){return;}this._dispatch(b.EVENTS.AFTER_DROP_HIT,l,m);},dropmiss:function(){if(!this._dispatch(b.EVENTS.BEFORE_DROP_MISS)){return;}this._dispatch(b.EVENTS.AFTER_DROP_MISS);},before:function(m,l){this.on("before"+m,l);},after:function(m,l){this.on("after"+m,l);}};}(),true);c.Source=b;}();
/*! File: dd-source-behavior.js | Build: 2012-09-22-14:33:28 | Revision: 46060 */
void function(){var f=BB.ObjectH,d=BB.NodeH,c=BB.DomU,a=BB.DD;var b={};b.Move=function(){this.stickX=false;this.stickY=false;this.minX=-Infinity;this.maxX=Infinity;this.minY=-Infinity;this.maxY=Infinity;this.container=null;this._minX=null;this._maxX=null;this._minY=null;this._maxY=null;this.initialize.apply(this,arguments);};f.mix(b.Move.prototype,{initialize:function(g){f.mix(this,g||{},true);},start:function(g){this._minX=this.minX;this._maxX=this.maxX;this._minY=this.minY;this._maxY=this.maxY;if(this.container){var i=d.getXY(this.container);this._minX=i[0]+this.container.clientLeft;this._maxX=this._minX+this.container.clientWidth-g.host.offsetWidth;this._minY=i[1]+this.container.clientTop;this._maxY=this._minY+this.container.clientHeight-g.host.offsetHeight;}},trigger:function(g){var i=[];i[0]=Math.max(Math.min(g.context.hostStartX+g.context.x-g.context.startX,this._maxX),this._minX);i[1]=Math.max(Math.min(g.context.hostStartY+g.context.y-g.context.startY,this._maxY),this._minY);if(!this.stickX){g.activity.style.left=i[0]+"px";}if(!this.stickY){g.activity.style.top=i[1]+"px";}}});b.Resize=function(){this.stickWidth=false;this.stickHeight=false;this.minWidth=0;this.maxWidth=Infinity;this.minHeight=0;this.maxHeight=Infinity;this.container=null;this.direction="rb";this._direction={lt:{x:-1,y:-1},lb:{x:-1,y:1},rb:{x:1,y:1},rt:{x:1,y:-1}};this._minWidth=null;this._maxWidth=null;this._minHeight=null;this._maxHeight=null;this.initialize.apply(this,arguments);};f.mix(b.Resize.prototype,{initialize:function(g){f.mix(this,g||{},true);},start:function(g){this._minWidth=this.minWidth;this._maxWidth=this.maxWidth;this._minHeight=this.minHeight;this._maxHeight=this.maxHeight;if(this.container){var i=d.getXY(this.container);this._maxWidth=i[0]+this.container.clientLeft+this.container.clientWidth-g.context.hostStartX;this._maxHeight=i[1]+this.container.clientTop+this.container.clientHeight-g.context.hostStartY;}},trigger:function(i){var g=[],j=this._direction[this.direction];g[0]=Math.max(Math.min(i.context.hostStartWidth+((i.context.x-i.context.startX)*j.x),this._maxWidth),this._minWidth);g[1]=Math.max(Math.min(i.context.hostStartHeight+((i.context.y-i.context.startY)*j.y),this._maxHeight),this._minHeight);if(!this.stickWidth){i.activity.style.width=g[0]+"px";}if(!this.stickHeight){i.activity.style.height=g[1]+"px";}}});b.RectSelector=function(){this.container=null;this._minX=null;this._maxX=null;this._minY=null;this._maxY=null;this.initialize.apply(this,arguments);};f.mix(b.RectSelector.prototype,{initialize:function(g){f.mix(this,g||{},true);},start:function(g){this._minX=-Infinity;this._maxX=Infinity;this._minY=-Infinity;this._maxY=Infinity;if(this.container){var i=d.getXY(this.container);this._minX=i[0]+this.container.clientLeft;this._maxX=this._minX+this.container.clientWidth;this._minY=i[1]+this.container.clientTop;this._maxY=this._minY+this.container.clientHeight;}},trigger:function(i){var j=[],g=[],k=[];k[0]=Math.max(Math.min(i.context.x,this._maxX),this._minX);k[1]=Math.max(Math.min(i.context.y,this._maxY),this._minY);j[0]=Math.min(i.context.startX,k[0]);j[1]=Math.min(i.context.startY,k[1]);g[0]=Math.abs(i.context.startX-k[0]);g[1]=Math.abs(i.context.startY-k[1]);i.activity.style.left=j[0]+"px";i.activity.style.top=j[1]+"px";i.activity.style.width=g[0]+"px";i.activity.style.height=g[1]+"px";}});a.SourceBehavior=b;a.Drag=function(i,g){var j=new a.Source(i,g);j.behavior=new b.Move(g);return j;};a.Resize=function(i,g){var j=new a.Source(i,g);j.behavior=new b.Resize(g);return j;};a.RectSelector=function(i,g){var j=new a.Source(i,g);j.behavior=new b.RectSelector(g);return j;};}();
/*! File: dd-targetarea.js | Build: 2012-09-22-14:33:28 | Revision: 46060 */
void function(){var g=BB.ObjectH,d=BB.NodeH,b=BB.ArrayH,f=BB.CustEvent,a=BB.DD;var c=function(){this.targets=[];this.triggers=[];this._handlers=[];this._enter=null;this.init.apply(this,arguments);};c.EVENTS={ENTER:"enter",LEAVE:"leave",SWITCH:"switch"};g.mix(c.prototype,{init:function(j){var l=[];for(var k in c.EVENTS){l.push(c.EVENTS[k]);}f.createEvents(this,l);g.mix(this,j||{},true);},dispose:function(){var i=this;b.forEach(this.triggers,function(j){i.removeTrigger(j);});this.triggers.length=this.targets.length=0;},addTarget:function(i){this.targets.push(i);},removeTarget:function(k){var j=b.indexOf(this.targets,k);if(j>-1){this.targets.splice(j,1);}},addTrigger:function(j){var i=this,k={start:function(l){i._start(this,l);},drag:function(l){i._drag(this,l);},end:function(l){i._end(this,l);}};this.triggers.push(j);this._handlers.push(k);j.on("afterdragstart",k.start);j.on("afterdrag",k.drag);j.on("afterdragend",k.end);},removeTrigger:function(k){var j=this;var l=b.indexOf(this.triggers,m);if(l<0){return;}var m=this._handlers[l];this.triggers.splice(l,1);this._handlers.splice(l,1);k.un("afterdragstart",m.start);k.un("afterdrag",m.drag);k.un("afterdragend",m.end);},_start:function(j){this._enter=false;var i=this;b.forEach(this.targets,function(k){if(d.contains(k,j.host)){i._enter=true;}});},_drag:function(l){var i=this,m=[l.context.x,l.context.y],j=d.getRect(l.host),k=1;b.forEach(this.targets,function(n){var q=d.contains(n,l.host)?j.top+((j.bottom-j.top)/2):Infinity;b.forEach(n.childNodes,function(v){if(v.nodeType!=1){return;}var s=d.getRect(v),u=d.marginWidth(v);s.top1=s.top-u[0];s.right1=s.right+u[1];s.bottom1=s.bottom+u[2];s.left1=s.left-u[3];if(m[0]>=s.left1&&m[0]<=s.right1&&m[1]>=s.top1&&m[1]<=s.bottom1){k=0;}else{return;}if(l.host==v){return;}var t=d.previousSibling(v,"*"),r=d.nextSibling(v,"*");if(q>s.top1&&q<s.bottom1&&(t==l.host||r==l.host)){if(!(m[0]>s.left&&m[0]<s.right&&m[1]>s.top&&m[1]<s.bottom)){return;}if(t==l.host){d.insertSiblingAfter(v,l.host);}else{d.insertSiblingBefore(v,l.host);}}else{if(q<s.top1){d.insertSiblingAfter(v,l.host);}else{d.insertSiblingBefore(v,l.host);}}if(i._enter){i._dispatch(c.EVENTS.SWITCH,l);}else{i._enter=true;i._dispatch(c.EVENTS.ENTER,l);}});if(k){var p=d.getRect(n);if(m[0]>p.left&&m[0]<p.right&&m[1]>p.top&&m[1]<p.bottom){k=0;d.appendChild(n,l.host);if(i._enter){i._dispatch(c.EVENTS.SWITCH,l);}else{i._enter=true;i._dispatch(c.EVENTS.ENTER,l);}}}});if(k&&this._enter){this._enter=false;this._dispatch(c.EVENTS.LEAVE,l);}},_end:function(i){},_dispatch:function(i,j){var k=new f(j,i);return this.fire(k);}});a.TargetArea=c;}();
/*! File: panel.js | Build: 2012-09-22-14:33:28 | Revision: 46060 */
(function(){function k(r,q){if(!document.body){throw new Error(["Panel","create error","Document body not found or not loaded!"]);}return this._initPanel.apply(this,arguments);}k.IFRAME_SRC=location.protocol.toLowerCase()!="https:"?"about:blank":function(){var q=document.getElementsByTagName("script");return q[q.length-1].src.match(/^.*[\/\\]/)[0]+"blank.html";}();k.prototype=function(){var t=BB.Dom,s=BB.ObjectH;var r=100;var q=0;return{id:null,useIframe:null,draggable:false,resizable:false,visibility:false,panelRect:{},PANEL_CLASS:"panel",IFRAME_CLASS:"panel-iframe",INNER_CLASS:"panel-content",_panel:null,_content:null,_iframe:null,_initialized:false,_initPanel:function(v,u){if(this._initialized){return this;}if(t.isElement(v)){this.renderPanel(v);s.mix(this,u||{},true);}else{s.mix(this,v||{},true);this._createPanelBox();}this.setPanelVisible(false);this._initialized=true;if(!this._panel.id){this._panel.id=(this.id||"BAIDU_PANEL_"+(q++));}return this;},_createPanelBox:function(){this._panel=t.create('<div class="'+this.PANEL_CLASS+'"></div>');this._content=t.create('<div class="'+this.INNER_CLASS+'"></div>');this._panel.appendChild(this._content);if(this.useIframe){this._createIframe();}document.body.appendChild(this._panel);},setStyle:function(v,u){t.setStyle(this._panel,v,u);if(this._iframe){t.setStyle(this._iframe,v,u);}return this;},addClassName:function(u){t.addClass(this._panel,u);if(this._iframe){t.addClass(this._iframe,u);}},resetClassName:function(){this._panel.className=this.PANEL_CLASS;},getPanel:function(){return this._panel;},getIframe:function(){return this._iframe;},_createIframe:function(){this._iframe=t.create('<iframe class="'+this.IFRAME_CLASS+'" frameborder="0" src="'+k.IFRAME_SRC+'"></iframe>');this._panel.appendChild(this._iframe);},_chkPosCanbeFixed:function(){return !BB.Env.ie||(BB.Env.ie&&BB.Env.version>6);},_chkIframe:function(){var u=!!window.ActiveXObject&&((BB.Env.version<7&&document.getElementsByTagName("select").length)||document.getElementsByTagName("object").length);return u;},saveRect:function(u,A,v,z){u=parseInt(u,10);A=parseInt(A,10);v=parseInt(v,10);z=parseInt(z,10);if(!isNaN(u)){this.panelRect.left=u;}if(!isNaN(A)){this.panelRect.top=A;}if(!isNaN(v)){this.panelRect.width=v;}if(!isNaN(z)){this.panelRect.height=z;}return this.panelRect;},setPanelRect:function(u,A,v,z){t.setInnerRect(this._panel,u,A,v,z);if(z==null&&v!=null){z=this.getPanelAutoHeight(v);}this.saveRect(u,A,v,z);return this;},setPanelSize:function(u,v){this.saveRect(null,null,u,v);t.setSize([this._panel],u,v);return this;},setPanelXY:function(u,v){this.saveRect(u,v);t.setXY(this._panel,u,v);return this;},setPanelFullscreen:function(){var A=t.getDocRect();var u,B,v,z;u=B=0;v=A.scrollWidth;z=A.scrollHeight;t.setRect(this._panel,u,B,v,z);return this;},getPanelAutoHeight:function(v){var u=this._panel;var x=t.getStyle(u,"display");t.setStyle(u,"width",v+"px");if(x=="none"){t.setStyle(u,"display","block");}var C=t.paddingWidth(u);var z=t.borderWidth(u);var B=C[0]+C[2]+z[0]+z[2];var A=u.offsetHeight-B;t.setStyle(u,"display",x);return A;},setPanelCenter:function(z,A){if(!isNaN(parseInt(z,10))){A=this.getPanelAutoHeight(z);}this.saveRect(null,null,z,A);var B=t.getDocRect();var v=parseInt((B.width-z)/2);var C=parseInt((B.height-A)/2);if(v<0){v=0;}if(C<0){C=0;}var u=this.getPanelPosition();if("fixed"!=u){v=v+B.scrollX;C=C+B.scrollY;if(v<=B.scrollX){v=B.scrollX;}if(C<=B.scrollY){C=B.scrollY;}}t.setRect(this._panel,v,C);return this;},getPanelPosition:function(){return t.getStyle(this._panel,"position").toLowerCase();},appendToPanel:function(u){this._panel.appendChild(u);},appendToContent:function(u){this._content.appendChild(u);},showPanel:function(v,E,z,B,A){A=t.$(A);if(t.isElement(A)){var D=t.getRect(A);var u=this.getPanelPosition();v=parseInt(v,10)||0;E=parseInt(E,10)||0;v+=D.left;E+=D.top;if("fixed"==u){var C=t.getDocRect();v-=C.scrollX;E-=C.scrollY;}}this.setPanelRect.apply(this,arguments);this.setPanelVisible(true);},autoAdjustPanelPosition:function(){var D=t.getRect(this._panel);var A=t.borderWidth(this._panel);var v=this.getPanelPosition();var C=t.getDocRect();var u=y=0;var z=C.width,B=C.height;if("fixed"!=v){u=C.scrollX;y=C.scrollY;}else{if(BB.Env.ie&&"fixed"==v){D.left-=C.scrollX;D.top-=C.scrollY;D.right-=C.scrollX;D.bottom-=C.scrollY;}}if(D.left<u){this.setStyle({left:u+"px"});}if(D.top<y){this.setStyle({top:y+"px"});}if(D.right>z+u){this.setStyle({left:(z+u-D.width-A[1]-A[3])+"px"});}if(D.bottom>B+y){this.setStyle({top:(B+y-D.height-A[0]-A[2])+"px"});}},setPanelVisible:function(u,v){u=(u===false?"none":"block");if("block"===u&&!v){t.setStyle(this._panel,"zIndex",r++);}t.setStyle(this._panel,"display",u);},hidePanel:function(){this.setPanelVisible(false);},renderPanel:function(u){var v=t.query("."+this.INNER_CLASS,u);if(!v||!t.isElement(v[0])){throw new Error(["Panel","render error","Panel inner is not a HTMLElement!"]);}this._panel=u;this._content=v[0];return this;},detectPanel:function(){if(!this._panel||!t.$(this._panel.id)){alert('\n""\n\n""FAQ');this.dispose();return false;}return true;},disposePanel:function(){this._iframe=this._content=this._panel=null;if("function"==typeof CollectGarbage){CollectGarbage();}},detect:function(){return this.detectPanel();},show:function(){if(!this.detect()){return false;}this.showPanel();if(!this.detect()){return false;}return true;},render:function(){this.renderPanel.apply(this,arguments);},contains:function(u){return t.contains(this._panel,u);},hide:function(){return this.hidePanel();},dispose:function(){return this.disposePanel();},isVisible:function(){return this.visibility;}};}();var m=BB.ClassH.extend(function(r,q){arguments.callee.$super.apply(this,arguments);BB.CustEvent.createEvents(this,"windowresize,beforeshow,aftershow,beforehide,afterhide");this._initBaseLayer.apply(this,arguments);c.push(this);return this;},k,false);BB.ObjectH.mix(m.prototype,function(){var s=BB.Dom,r=BB.ObjectH,q=BB.CustEvent;return{center:false,shadow:false,position:"absolute",cue:false,corner:false,resizable:false,draggable:!!BB.Drag,dragProxy:null,dragProxyClass:"drag-proxy",dragProxyClassDragging:"proxy-dragging",withDragProxy:false,buttons:null,header:true,headerClassDrag:"panel-drag-enabled",body:true,footer:true,className:"panel-t2",width:null,height:null,left:null,top:null,useIframe:null,close:false,useEscKey:false,autoPosition:true,caption:"",visibility:false,content:"",_header:null,_body:null,_footer:null,_close:null,_resize:null,_shadow:null,_cue:null,_oDD:null,_corners:[],_initialized:false,_timer:null,_delay:300,BD_CLASS:"bd",FT_CLASS:"ft",HD_CLASS:"hd",SHADOW_CLASS:"sd",CLOSE_CLASS:"close",RESIZE_CLASS:"resize",ESC_KEY_CODE:27,_initBaseLayer:function(u,t){this._initialized=false;if(s.isElement(u)){this.render(u);r.mix(this,t||{},true);}else{r.mix(this,u||{},true);this.applyConfig(u);}this._addPopupEvent();this._initialized=true;return this;},getPopup:function(){return this._panel;},_chkPosition:function(){var t=this.position;if("fixed"==t.toLowerCase()&&!this._chkPosCanbeFixed()){t="absolute";}return t;},_addPopupEvent:function(){this.initResizable();if(this.draggable){this.initDraggable();}var t=this;var u=function(){t._timer=setTimeout(function(){clearTimeout(t._timer);if(!t.isVisible()){return;}t.fire("windowresize");},t._delay);};var v=function(x){t.dispose();};if(!BB.Env.firefox){s.on(window,"unload",v);}s.on(window,"resize",u);},removeElements:function(){BB.ArrayH.map([this._corners[0],this._corners[1],this._resize,this._shadow,this._cue,this._close],function(t){if(t&&t.parentNode){s.removeNode(t);}});if(this._footer){this._footer.innerHTML="";}},createContainer:function(){if(this._initialized==false){var t=this._chkPosition();if(this.useIframe!=null){useIframe=this.useIframe;}else{useIframe=this._chkIframe();}this.setStyle("position",t);if(this.header){this._header=s.create('<div class="'+this.HD_CLASS+'"></div>');this.appendToContent(this._header);}if(this.body){this._body=s.create('<div class="'+this.BD_CLASS+'"></div>');this.appendToContent(this._body);}if(this.footer){this._footer=s.create('<div class="'+this.FT_CLASS+'"></div>');this.appendToContent(this._footer);}}this.resetClassName();this.addClassName(this.className);},appendToBody:function(t){this._body.appendChild(t);},appendToHeader:function(t){this._header.appendChild(t);},appendToFooter:function(t){this._footer.appendChild(t);},initDraggable:function(){var u=this;if(!this.header){return;}s.addClass(this._header,this.headerClassDrag);var t=0,x=0;if(this.shadow){t=this._shadow.offsetLeft;x=this._shadow.offsetTop;}var v=new BB.SimpleDrag({activeDelay:0,withProxy:this.withDragProxy,CLASS_PROXY_DRAGGING:this.dragProxyClassDragging,CLASS_PROXY:this.dragProxyClass,container:function(){var z=s.getDocRect();z.left=z.scrollX;z.right=z.scrollX+z.width-t;z.top=z.scrollY;z.bottom=z.scrollY+z.height-x;return z;}},{source:this._panel,handle:this._header,proxy:this.dragProxy});},initResizable:function(){},applyConfig:function(t){this.removeElements();this.createContainer();this.createButtons();this.createCorners();this.createDirArrow();this.createShadow();this.createCloseBtn();if(this.caption){this.setCaption(this.caption);}if(this.content){this.setContent(this.content);}return this;},createButtons:function(){if(this.buttons&&this._footer){var x=this.buttons;var t=x.length;for(var v=0;v<t;v++){var u=s.create("<button></button>");s.set(u,x[v]);s.appendChild(this._footer,u);}}},createCloseBtn:function(){if(this.close){var t=this;var u=function(){t.hide();};this._close=s.create('<span class="'+this.CLOSE_CLASS+'"></span>');this.appendToPanel(this._close);s.on(this._close,"click",u);}},createShadow:function(){if(this.shadow){this._shadow=s.create('<span class="'+this.SHADOW_CLASS+'"></span>');this.appendToPanel(this._shadow);}},createCorners:function(){if(this.corner){this._corners[0]=s.create('<span class="co1"></span>');this._corners[1]=s.create('<span class="co2"></span>');this._corners[0].innerHTML=this._corners[1].innerHTML="<span></span>";this.appendToPanel(this._corners[0]);this.appendToPanel(this._corners[1]);}},createDirArrow:function(){if(this.cue){this._cue=s.create('<span class="cue"></span>');this.appendToPanel(this._cue);}},setContent:function(t){if(typeof t=="object"){this._body.innerHTML="";this.appendToBody(t);}else{this._body.innerHTML=t;}return this._body;},setCaption:function(t){if(this._header){this._header.innerHTML="<h3>"+t+"</h3>";}},setHeader:function(t){this.setCaption(t);},setFooter:function(t){if(this._footer){this._footer.innerHTML=t;}},setPopupCenter:function(t,u){this.setPanelCenter(t,u);return this;},showPopup:function(t,A,u,z,v){t=t||this.left;A=A||this.top;u=u||this.width;z=z||this.height;this.showPanel(t,A,u,z,v);if(this.center&&!s.isElement(v)){t=t||u||this.panelRect.width;A=A||z||this.panelRect.height;this.setPopupCenter(t,A);}if(!this.center&&this.autoPosition){this.adjustPosition();}if(isNaN(parseInt(u,10))){u=this._panel.offsetWidth;if(this._shadow){s.setStyle(this._shadow,"width",u);}}return this;},renderPopup:function(u){var D=this;var x=this._chkPosition();this.setStyle("position",x);var t=parseInt(s.getCurrentStyle(u,"width"),10)||0;if(t){this.width=t;}var C=s.query("."+this.SHADOW_CLASS,u);var v=s.query("."+this.HD_CLASS,u);var z=s.query("."+this.BD_CLASS,u);var B=s.query("."+this.FT_CLASS,u);var E=s.query("."+this.CLOSE_CLASS,u);if(!z){throw new Error(["Popup","render error","Panel body HTMLElement can not be finded!"]);}this._shadow=C?C[0]:null;this._header=v?v[0]:null;this._body=z?z[0]:null;this._footer=B?B[0]:null;this._close=E?E[0]:null;if(this._close){var A=function(){D.hide();};s.on(this._close,"click",A);}return this;},hidePopup:function(){this.hidePanel();return this;},getRect:function(){return this.panelRect;},getBounds:function(){return this.getRect();},setPopupRect:function(){return this.setPanelRect.apply(this,arguments);},adjustPosition:function(){this.autoAdjustPanelPosition();},disposePopup:function(){if(this){this.disposePanel();}this._header=this._body=this._footer=null;this._cue=this._shadow=this._resize=this._close=null;if("function"==typeof CollectGarbage){CollectGarbage();}},detectPopup:function(){var t=this.detectPanel();if(!t){this.dispose();}return t;},show:function(){if(!this.detect()){return false;}if(!this.fire("beforeshow")){return false;}this.showPopup.apply(this,arguments);this.visibility=true;this.fire("aftershow");if(!this.detect()){return false;}return true;},detect:function(){return this.detectPopup();},hide:function(){if(!this.detect()){return false;}if(!this.fire("beforehide")){return false;}this.hidePopup();this.visibility=false;this.fire("afterhide");if(!this.detect()){return false;}return true;},isVisible:function(){return this.visibility;},render:function(){return this.renderPopup.apply(this,arguments);},dispose:function(){this.disposePopup();}};}(),true);var p=BB.ClassH.extend(function(q){arguments.callee.$super.apply(this,arguments);BB.CustEvent.createEvents(this,"blur,aftershowtimer,afterhidetimer");this._addLayerPopupListener();if(this.timeoutListener){this._initTimeoutListener();}return this;},m,false);BB.ObjectH.mix(p.prototype,function(){var r=BB.Dom,q=BB.CustEvent;return{hideTimeout:500,showTimeout:500,hideTimer:null,timeoutListener:false,_isInitTimeoutLsr:false,showTimer:null,showTimerEvents:"mouseover",hideTimerEvents:"mouseout",_addLayerPopupListener:function(){var s=this;var t=function(v){var u=v.target;if(!s.contains(u)&&s.visibility){if(s.visibility){s.fire("blur");s.hide();}}};r.on(document,"mousedown",t);r.on(document,"keyup",t);},_initTimeoutListener:function(){if(!this._isInitTimeoutLsr){var s=this;r.on(this.getPopup(),this.showTimerEvents,function(){if(!s.fire("aftershowtimer")){return;}s.clearAllTimeout();});r.on(this.getPopup(),this.hideTimerEvents,function(){if(!s.fire("afterhidetimer")){return;}s.delayHide();});this._isInitTimeoutLsr=true;}},delayHide:function(t){this._initTimeoutListener();this.hideTimeout=parseInt(t,10)||this.hideTimeout;this.clearAllTimeout();var s=this;this.hideTimer=setTimeout(function(){s.hide();},this.hideTimeout);},delayShow:function(){this._initTimeoutListener();var s=this;var t=arguments;this.clearAllTimeout();this.showTimer=setTimeout(function(){s.show.apply(s,t);},this.showTimeout);},clearAllTimeout:function(){clearTimeout(this.hideTimer);clearTimeout(this.showTimer);},show:function(){if(!this.detect()){return false;}if(!this.fire("beforeshow")){return false;}this.clearAllTimeout();this.showPopup.apply(this,arguments);this.visibility=true;this.fire("aftershow");if(!this.detect()){return false;}return true;},hide:function(){if(!this.fire("beforehide")){return false;}this.clearAllTimeout();this.hidePopup();this.visibility=false;this.fire("afterhide");return true;}};}(),true);var j=BB.ClassH.extend(function(r,q){r=r||{};q=q||{};this._initDialog(r,q);return this;},m,false);BB.ObjectH.mix(j.prototype,{close:true,modal:true,center:true,shadow:true,useEscKey:true,useIframe:null,header:true,body:true,footer:true,content:"",caption:"",className:"panel-t1",mask:null,MASK_CLASS:"mask",_initDialog:function(r,q){if(BB.Dom.isElement(r)){this.mask=new g({useIframe:q.useIframe});q.className=q.className||this.className;q.useIframe=false;}else{this.mask=new g({useIframe:r.useIframe});r.className=r.className||this.className;r.useIframe=false;}j.$super.call(this,r,q);return this;},setMaskFullscreen:function(){this.mask.setPanelFullscreen();},setDialogCenter:function(q,u,r,t,s){this.setPopupCenter.apply(this,arguments);},showDialog:function(q,u,r,t,s){if(this.modal){this.showMask();}else{this.hideMask();}this.showPopup.apply(this,arguments);return this;},setDialogRect:function(){return this.setPopupRect.apply(this,arguments);},showMask:function(){this.mask.show.apply(this.mask,arguments);return this.mask;},hideMask:function(){this.mask.hide();return this.mask;},hideDialog:function(){this.hidePopup();this.hideMask();},show:function(){if(!this.detect()){return false;}if(!this.fire("beforeshow")){return false;}this.showDialog.apply(this,arguments);this.visibility=true;this.fire("aftershow");if(!this.detect()){return false;}return true;},hide:function(){if(!this.fire("beforehide")){return false;}this.hideDialog();this.visibility=false;this.fire("afterhide");return true;},dispose:function(){this.disposePopup();this.mask.dispose();}},true);var i=function(){var q=null;return{getInstance:function(r){if(q){return q;}return new r();}};}();var g=BB.ClassH.extend(function(r,q){BB.CustEvent.createEvents(this,"beforeshow,aftershow");return this._initMask.apply(this,arguments);},k,false);BB.ObjectH.mix(g.prototype,function(){var r=BB.Dom,q=BB.ObjectH;return{_scrollTimer:null,_resizeTimer:null,scrollInterval:50,resizeInterval:50,leftOffset:200,topOffset:200,rightOffset:0,bottomOffset:200,MASK_CLASS:"mask",_initMask:function(t){t=t||{};t.useIframe=t.useIframe==null?this._chkIframe():t.useIframe;q.mix(this,t,true);this._addMaskEvent();g.$super.call(this,t);var s=this._chkPosCanbeFixed()?"fixed":"absolute";this.addClassName(this.MASK_CLASS);this.setStyle("position",s);return this;},_addMaskEvent:function(){var s=this;if(!this._chkPosCanbeFixed()){r.on(window,"scroll",function(){clearTimeout(s._scrollTimer);s._scrollTimer=setTimeout(function(){clearTimeout(s._scrollTimer);s.adaptBounds();},s.scrollInterval);});r.on(window,"resize",function(){clearTimeout(s._resizeTimer);s._resizeTimer=setTimeout(function(){clearTimeout(s._resizeTimer);s.adaptBounds();},s.resizeInterval);});}},adaptBounds:function(){var u=this.getPanel();if(!u){return;}var t=r.getStyle(u,"position").toLowerCase();if("fixed"!=t){var v=r.getDocRect();var z=r.getRect(this.getPanel());var s=y=w=h=0;s=v.scrollX-this.leftOffset<=0?0:v.scrollX-this.leftOffset;y=v.scrollY-this.topOffset<=0?0:v.scrollY-this.topOffset;w=this.rightOffset;h=this.bottomOffset;w+=v.width;h+=v.height;if(z.width>w){w=null;}if(z.height>h){h=null;}this.setPanelRect(s,y,w,h);}else{this.setStyle("width","100%");this.setStyle("height","100%");this.setStyle("left","0");this.setStyle("top","0");}},show:function(){if(!this.detect()){return false;}if(!this.fire("beforeshow")){return false;}this.showPanel.apply(this,arguments);this.adaptBounds();this.visibility=true;if(!this.detect()){return false;}this.fire("aftershow");return true;}};}(),true);var d={WARNING:"bb-confirm-warning",SUCCESS:"bb-confirm-success",FAILURE:"bb-confirm-failure",NULL:"bb-confirm-null"};var b={OK:{key:"OK",text:"",retVal:1,cls:"mb-btn-ok"},CANCEL:{key:"CANCEL",text:"",retVal:2,cls:"mb-btn-cancel"},ABORT:{key:"ABORT",text:"",retVal:3,cls:"mb-btn-abort"},RETRY:{key:"RETRY",text:"",retVal:4,cls:"mb-btn-retry"},IGNORE:{key:"IGNORE",text:"",retVal:5,cls:"mb-btn-ignore"},YES:{key:"YES",text:"&nbsp;&nbsp;",retVal:6,cls:"mb-btn-yes"},NO:{key:"NO",text:"&nbsp;&nbsp;",retVal:7,cls:"mb-btn-no"}};var a=BB.ClassH.extend(function(r,q){arguments.callee.$super.apply(this,arguments);BB.CustEvent.createEvents(this,"close");return this._initMessageBox.apply(this,arguments);},j,false);BB.ObjectH.mix(a.prototype,{icon:d.WARNING,singleton:false,focusButton:null,header:false,className:"panel-t6",position:"fixed",width:500,lazyShow:false,eventArgs:{},buttons:[b.OK],_contentBox:null,_contentHeader:null,_contentBody:null,_initMessageBox:function(){this._initContentBox();if(this.caption){this.setCaption(this.caption);}if(this.content){this.setContent(this.content);}if(!this.lazyShow){this.show();}return this;},_initContentBox:function(){var r=this.buttons,q=this;this._contentBox=BB.Dom.create('<div class="'+this.icon+'"></div>');this._contentHeader=document.createElement("h4");this._contentBody=document.createElement("div");this._contentBox.appendChild(this._contentHeader);this._contentBox.appendChild(this._contentBody);this._body.appendChild(this._contentBox);if(this.buttons&&this.buttons.length){this._contentFooter=BB.Dom.create('<p class="submit"></p>');this._contentBox.appendChild(this._contentFooter);}new function s(){if(!r||!r.length){return;}for(var t=0;t<r.length;t++){if("key" in r[t]&&"text" in r[t]&&"retVal" in r[t]){q[r[t].key]=BB.Dom.create('<button class="mb-button '+r[t].cls+'"></button>');var u=BB.Dom.create("<span>&nbsp;&nbsp;</span>");q._contentFooter.appendChild(q[r[t].key]);q._contentFooter.appendChild(u);q[r[t].key].innerHTML=r[t].text;(function(v){BB.Dom.on(q[r[v].key],"click",function(x){q.eventArgs={evt:x,retVal:r[v].retVal};q.hide();});})(t);}}};},createButtons:function(){},showDialog:function(q,u,r,t,s){if(this.modal){this.showMask();}else{this.hideMask();}this.showPopup.apply(this,arguments);if(this.focusButton&&this.focusButton.key&&this[this.focusButton.key]){this[this.focusButton.key].focus();}return this;},hide:function(){var q=new BB.CustEvent(this,"close");BB.ObjectH.mix(q,this.eventArgs);if(!this.fire(q)){return false;}j.prototype.hide.call(this);if(this.singleton){this.dispose();}return true;},setCaption:function(q){if(this._contentHeader){this._contentHeader.innerHTML=q;}},setContent:function(q){if(!this._contentBody){return false;}if(BB.Dom.isElement(q)){this._contentBody.appendChild(q);}else{this._contentBody.innerHTML=q;}return true;}},true);BB.ObjectH.mix(a,{alert:function(q){var r={caption:"",content:"",singleton:true,buttons:[b.OK],focusButton:b.OK};r=BB.ObjectH.mix(r,q,true);return new a(r);},confirm:function(q){var r={caption:"",content:"",singleton:true,buttons:[b.OK,b.CANCEL],focusButton:b.OK};r=BB.ObjectH.mix(r,q,true);return new a(r);}},true);var n=function(q){this.constructor=arguments.callee;this.manager=q;};n.CLASSLIST={messagebox:a,layerpopup:p,dialog:j};n.prototype=function(){return{create:function(s){s=new String(s).toLowerCase();if(n.CLASSLIST[s]){var r=Array.prototype.slice.call(arguments,1);var u=n.CLASSLIST[s];var t=function(){u.apply(this,r);};t.prototype=u.prototype;var q=new t;this.manager.push(q);return q;}else{}}};}();var l=function(){this.constructor=arguments.callee;this.list=[];BB.CustEvent.createEvents(this,"esc");this.bindListener();};l.prototype=function(){return{ESC_KEY_CODE:27,bindListener:function(){var q=this;var r=function(t){var s=t.keyCode;if(s==q.ESC_KEY_CODE){q.fire("esc");}};BB.Dom.on(document,"keydown",r);return this;},push:function(r){var q=this;r.show=function(s){return function(){q.moveLast(r);return s.apply(this,arguments);};}(r.show);this.moveLast(r);return this;},moveLast:function(q){var r=BB.ArrayH.indexOf(this.list,q);if(r==-1){this.list.push(q);return this;}if(r<this.list.length-1){this.list.splice(r,1);this.list.push(q);}return this;}};}();var c=new l();var f=new n(c);c.on("esc",function(){for(var q=c.list.length-1;q>-1;--q){if(c.list[q].visibility){c.list[q].hide();break;}}});BB.provide("Panel",k);BB.provide("BaseLayer",m);BB.provide("LayerPopup",p);BB.provide("Dialog",j);BB.provide("Singleton",i);BB.provide("Mask",g);BB.provide("MB_ICON",d);BB.provide("MB_BUTTON",b);BB.provide("MessageBox",a);BB.provide("PanelFactory",n);BB.provide("PanelManager",l);BB.provide("panelManager",c);BB.provide("panelFactory",f);})();
/*! File: panel.retouch.sns.js | Build: 2012-09-22-14:33:28 | Revision: 46060 */
BB.ObjectH.mix(MessageBox,{alert:function(a){var b={width:480,caption:"",content:"",singleton:true,buttons:[]};b=BB.ObjectH.mix(b,a,true);return new MessageBox(b);},confirm:function(a){var b={width:420,caption:"",content:"",singleton:true,buttons:[MB_BUTTON.OK,MB_BUTTON.CANCEL],focusButton:MB_BUTTON.OK};b=BB.ObjectH.mix(b,a,true);return new MessageBox(b);},tips:function(a){var b={width:300,close:false,className:"panel-t6 panel-mb-tips",icon:MB_ICON.SUCCESS,caption:"",content:"",singleton:true,buttons:[],onaftershow:function(){var c=this;setTimeout(function(){c.isVisible()&&c.hide();},a.showTime||1000);}};b=BB.ObjectH.mix(b,a,true);return new MessageBox(b);}},true);
/*! File: switch.js | Build: 2012-09-22-14:33:28 | Revision: 46060 */
void function(){var d=BB.ObjectH,b=BB.ClassH,m=BB.CustEvent,g=BB.EventTargetH,l=BB.EventH,i=BB.DomU,j=BB.NodeH;var a=function(){this.list=[];this.index=-1;this.initialize.apply(this,arguments);};a.EVENTS={beforeswitch:"beforeswitch",afterswitch:"afterswitch",beforerepeatswitch:"beforerepeatswitch",afterrepeatswitch:"afterrepeatswitch"};d.mix(a.prototype,function(){return{initialize:function(n){var q=[];for(var p in a.EVENTS){q.push(a.EVENTS[p]);}m.createEvents(this,q);d.mix(this,n||{},true);},insert:function(p,n){n=Math.max(Math.min(this.list.length),0);if(n<this.index){++this.index;}this.list.splice(n,0,p);return p;},remove:function(p){if(!this.list.length){return null;}p=Math.max(Math.min(this.list.length-1),0);var n=this.list[this.index];if(p<this.index){--this.index;}else{if(p==this.index){this.index=-1;}}this.list.splice(p,1);return n;},switchTo:function(n){if(!(this.list.length&&n<this.list.length)){return;}this.index=n;},indexOf:function(q){for(var p=0,n=this.list.length;p<n;++p){if(this.list[p]==q){return p;}}return -1;},item:function(n){if(this.list.length==0||n<0){return null;}return this.list[n%this.list.length]||null;},getCurrent:function(){return this.item(this.index);},getLast:function(){return this.item(this.list.length-1);},getFirst:function(){return this.item(0);},_dispatch:function(p,r,q){var n=new m(this,p);d.mix(n,{from:this.item(r),to:this.item(q)});return this.fire(n);},dispatchBeforeSwitch:function(p,n){return this._dispatch(a.EVENTS.beforeswitch,p,n);},dispatchAfterSwitch:function(p,n){return this._dispatch(a.EVENTS.afterswitch,p,n);},dispatchBeforeRepeatSwitch:function(p,n){return this._dispatch(a.EVENTS.beforerepeatswitch,p,n);},dispatchAfterRepeatSwitch:function(p,n){return this._dispatch(a.EVENTS.afterrepeatswitch,p,n);}};}());var k=function(){this.nav=null;this.content=null;this.disabled=false;this.events=[];this.cancelDelayEvents=[];this.immediateEvents=[];this.handlers={};this.initialize.apply(this,arguments);};d.mix(k.prototype,function(){return{initialize:function(n){d.mix(this,n,true);}};}());k.parse=function(n){return n.nav&&new this(n)||null;};var c=b.extend(function(){this.events=["click"];this.cancelDelayEvents=[];this.immediateEvents=[];this.behavior=null;this.host=null;this.nav=null;this.content=null;this.selector={nav:null,content:null};this.className={host:null,nav:null,content:null,navItemSelected:null,navItemUnSelected:null,contentItemSelected:null,contentItemUnSelected:null};this.preventDefault=true;this.stopPropagation=false;this.delayTime=0;this.step=1;this.interval=3000;this.autoPlay=false;this._handlers={preventdefault:null,mouseenter:null,mouseleave:null};this._playTimer=null;this._delayTimer=null;this._playing=false;this._super=arguments.callee.$super;this._proto=this._super.prototype;this._super.apply(this,arguments);},a,false);c.EVENTS={afterrender:"afterrender",afterdispose:"afterdispose"};d.mix(c.prototype,function(){return{initialize:function(s,p){var n=this;var r=[];for(var q in c.EVENTS){r.push(c.EVENTS[q]);}m.createEvents(this,r);this._handlers.preventdefault=function(t){l.preventDefault(t);};this._handlers.mouseenter=function(t){n.pause();};this._handlers.mouseleave=function(t){n.resume();};this._proto.initialize.call(this,p);this.host=s;this.nav=this.nav||i.query("."+this.className.nav,this.host)[0],this.content=this.content||i.query("."+this.className.content,this.host)[0];g.on(this.host,"mouseenter",this._handlers.mouseenter);g.on(this.host,"mouseleave",this._handlers.mouseleave);},render:function(q){d.mix(this,q||{},true);var t=i.query(this.selector.nav,this.nav),s=i.query(this.selector.content,this.content),p=t.length,r=0,n=null;for(;r<p;++r){this.add({nav:t[r],content:s[r]||null});if(j.hasClass(t[r],this.className.navItemSelected)){n=r;}}this.fire(c.EVENTS.afterrender);if(n!=null){this.to(n);}if(this.autoPlay){this.play();}},dispose:function(){g.un(this.host,"mouseenter",this._handlers.mouseenter);g.un(this.host,"mouseleave",this._handlers.mouseleave);if(this.autoPlay){this.stop();}while(this.list.length){this.remove(this.list.length-1);}this.fire(c.EVENTS.afterdispose);},insert:function(p,n){if(!(p=k.parse(p))){return null;}this._proto.insert.apply(this,arguments);this._addListener(p);return p;},add:function(n){return this.insert(n,this.list.length);},remove:function(n){var p=this._proto.remove.apply(this,arguments);if(!p){return null;}this._unListener(p);return p;},_addListener:function(s){var n=this,r=s.events.length?s.events:this.events;if(this.preventDefault){g.on(s.nav,"click",this._handlers.preventdefault);}for(var p=r.length,q=0;q<p;++q){void function(t){g.on(s.nav,t,s.handlers[t]=function(u){if(n.preventdefault){l.preventdefault(u);}if(n.stopPropagation){l.stopPropagation(u);}if(n.delayTime){if(n._delayTimer){clearTimeout(n._delayTimer);}n._delayTimer=setTimeout(function(){n._delayTimer=null;n.to(n.indexOf(s),t);},n.delayTime);}else{n.to(n.indexOf(s),t);}});}(r[q]);}if(this.delayTime){r=s.cancelDelayEvents.length?s.cancelDelayEvents:this.cancelDelayEvents;for(var p=r.length,q=0;q<p;++q){void function(t){g.on(s.nav,t,s.handlers["delay."+t]=function(u){if(n.delayTime){if(n._delayTimer){clearTimeout(n._delayTimer);n._delayTimer=null;}}});}(r[q]);}}r=s.immediateEvents.length?s.immediateEvents:this.immediateEvents;for(var p=r.length,q=0;q<p;++q){void function(t){g.on(s.nav,t,s.handlers[t]=function(u){if(n.preventdefault){l.preventdefault(u);}if(n.stopPropagation){l.stopPropagation(u);}if(n.delayTime&&n._delayTimer){clearTimeout(n._delayTimer);n._delayTimer=null;}n.to(n.indexOf(s),t);});}(r[q]);}},_unListener:function(r){var q=this.events,p=0;if(this.preventDefault){g.un(r.nav,"click",this._handlers.preventdefault);}for(var n=q.length,p=0;p<n;++p){g.un(r.nav,q[p],r.handlers[q[p]]);}q=r.cancelDelayEvents.length?r.cancelDelayEvents:this.cancelDelayEvents;for(var n=q.length,p=0;p<n;++p){g.un(r.nav,q[p],r.handlers["delay."+q[p]]);}q=r.immediateEvents.length?r.immediateEvents:this.immediateEvents;for(var n=q.length,p=0;p<n;++p){g.un(r.nav,q[p],r.handlers[q[p]]);}},to:function(n,p){if(!(this.list.length&&n<this.list.length)){return;}return this.behavior.trigger({type:p||"call",context:this,index:n});},prev:function(n){this.to((this.list.length+this.index-this.step)%this.list.length,n);},next:function(n){this.to((this.list.length+this.index+this.step)%this.list.length,n);},play:function(){this._playing=true;this.resume();},stop:function(){this.pause();this._playing=false;},resume:function(){if(!this._playing||this._playTimer){return;}var n=this;this._playTimer=setInterval(function(){n.next("autoplay");},this.interval);},pause:function(){if(!this._playing||!this._playTimer){return;}clearInterval(this._playTimer);this._playTimer=null;},reset:function(){if(this._delayTimer){clearTimeout(this._delayTimer);}this.behavior.reset(this);},setClass:function(n,r){var s=this.item(n),q,p,t;if(r=="content"){q=this.className.contentItemSelected,p=this.className.contentItemUnSelected,t="content";}else{q=this.className.navItemSelected,p=this.className.navItemUnSelected,t="nav";}if(s[t]){j.replaceClass(s[t],p,q);}},clearClass:function(s){var n=this.list.length,q=0,r,p,t;if(s=="content"){r=this.className.contentItemSelected,p=this.className.contentItemUnSelected,t="content";}else{r=this.className.navItemSelected,p=this.className.navItemUnSelected,t="nav";}for(;q<n;++q){if(this.list[q][t]){j.replaceClass(this.list[q][t],r,p);}}},before:function(p,n){this.on("before"+p,n);},after:function(p,n){this.on("after"+p,n);}};}(),true);var f={};BB.provide("Switch",{Switch:a,ElementSwitchItemEntity:k,ElementSwitch:c,SwitchBehavior:f});}();
/*! File: tabview.js | Build: 2012-09-22-14:33:28 | Revision: 46060 */
void function(){var b=BB.ObjectH,a=BB.Switch;a.SwitchBehavior.Tabs=function(){this.initialize.apply(this,arguments);};b.mix(a.SwitchBehavior.Tabs.prototype,function(){return{initialize:function(c){b.mix(this,c||{},true);},_change:function(c,f,d){if(!c.dispatchBeforeSwitch(f,d)){return;}c.clearClass("nav");c.setClass(d,"nav");c.clearClass("content");c.setClass(d,"content");c.switchTo(d);c.dispatchAfterSwitch(f,d);},_repeat:function(c,f,d){if(!c.dispatchBeforeRepeatSwitch(f,d)){return;}c.clearClass("nav");c.setClass(d,"nav");c.clearClass("content");c.setClass(d,"content");c.switchTo(d);c.dispatchAfterRepeatSwitch(f,d);},trigger:function(d){var c=d.context,g=c.index,f=d.index;if(g==f){this._repeat(c,g,f);}else{this._change(c,g,f);}},reset:function(c){c.clearClass("nav");c.clearClass("content");c.switchTo(-1);}};}());a.TabView=function(d,c){c=b.mix(b.mix({},c||{}),{selector:a.TabView.Config.TABS_SELECTOR,className:a.TabView.Config.TABS_CLASS_NAME});c.behavior=new a.SwitchBehavior.Tabs;return new a.ElementSwitch(d,c);};a.TabView.Config={TABS_SELECTOR:{nav:">*",content:">*"},TABS_CLASS_NAME:{host:"switch-tabs",nav:"switch-nav",content:"switch-content",navItemSelected:"selected",navItemUnSelected:"unselected",contentItemSelected:"selected",contentItemUnSelected:"unselected"}};}();
/*! File: slide.js | Build: 2012-09-22-14:33:28 | Revision: 46060 */
void function(){var f=BB.ObjectH,d=BB.NodeH,a=BB.Anim,c=BB.ScrollAnim,b=BB.Switch;b.SwitchBehavior.Fade=function(){this.easing=null;this.animInterval=500;this._cache={from:null};this.initialize.apply(this,arguments);};f.mix(b.SwitchBehavior.Fade.prototype,function(){return{initialize:function(g){f.mix(this,g||{},true);},_play:function(l,i){var g=this._cache,k=g.from,j=null;if(k==l){i();return;}if(k){if(k.__fadeAnim&&k.__fadeAnim.isPlay()){k.__fadeAnim.pause();j=1-k.__fadeAnim.step();k.__fadeAnim.stop();}d.setStyle(k.content,{zIndex:9});k.__fadeAnim=new a(k.content,{opacity:{from:1,to:0}},this.animInterval,this.easing);k.__fadeAnim.on("suspend",function(){d.setStyle(k.content,{zIndex:0});});k.__fadeAnim.on("suspend",function(){d.setStyle(k.content,{zIndex:0});});k.__fadeAnim.play();if(j!=null){k.__fadeAnim.step(j);}}g.from=l;j=null;if(l.__fadeAnim&&l.__fadeAnim.isPlay()){l.__fadeAnim.pause();j=1-l.__fadeAnim.step();l.__fadeAnim.stop();}d.setStyle(l.content,{zIndex:0});l.__fadeAnim=new a(l.content,{opacity:{from:0,to:1}},this.animInterval,this.easing);l.__fadeAnim.on("suspend",function(){d.setStyle(l.content,{zIndex:9});i();});l.__fadeAnim.play();if(j!=null){l.__fadeAnim.step(j);}},_change:function(g,j,i){if(!g.dispatchBeforeSwitch(j,i)){return;}g.clearClass("nav");g.setClass(i,"nav");this._play(g.item(i),function(){g.clearClass("content");g.setClass(i,"content");g.switchTo(i);g.dispatchAfterSwitch(j,i);});},_repeat:function(g,j,i){if(!g.dispatchBeforeRepeatSwitch(j,i)){return;}g.clearClass("nav");g.setClass(i,"nav");this._play(g.item(i),function(){g.clearClass("content");g.setClass(i,"content");g.switchTo(i);g.dispatchAfterRepeatSwitch(j,i);});},trigger:function(i){var g=i.context,k=g.index,j=i.index;if(k==j){this._repeat(g,k,j);}else{this._change(g,k,j);}},reset:function(i){var g=this._cache;if(g.from){if(g.from.__fadeAnim&&g.from.__fadeAnim.isPlay()){g.from.__fadeAnim.stop();}d.setStyle(g.from.content,{opacity:0});g.from=null;}i.clearClass("nav");i.clearClass("content");i.switchTo(-1);}};}());b.SwitchBehavior.Scroll=function(){this.config={top:"scrollTop",left:"scrollLeft"};this.direction="top";this.easing=null;this.animInterval=500;this._cache={from:null,anim:null};this.initialize.apply(this,arguments);};f.mix(b.SwitchBehavior.Scroll.prototype,function(){return{initialize:function(g){f.mix(this,g||{},true);},_play:function(j,m,l,k){var g=this._cache,i={};i[this.config[this.direction]]={to:d.getSize(m.content).height*j};if(g.anim&&g.anim.isPlay()){g.anim.stop();}g.anim=new c(l,i,this.animInterval,this.easing);g.anim.on("suspend",function(){k();});g.anim.play();},_change:function(g,j,i){if(!g.dispatchBeforeSwitch(j,i)){return;}g.clearClass("nav");g.setClass(i,"nav");this._play(i,g.item(i),g.content,function(){g.clearClass("content");g.setClass(i,"content");g.switchTo(i);g.dispatchAfterSwitch(j,i);});},_repeat:function(g,j,i){if(!g.dispatchBeforeRepeatSwitch(j,i)){return;}g.clearClass("nav");g.setClass(i,"nav");this._play(i,g.item(i),g.content,function(){g.clearClass("content");g.setClass(i,"content");g.switchTo(i);g.dispatchAfterRepeatSwitch(j,i);});},trigger:function(i){var g=i.context,k=g.index,j=i.index;if(k==j){this._repeat(g,k,j);}else{this._change(g,k,j);}},reset:function(i){var g=this._cache;if(g.from){if(g.anim&&g.anim.isPlay()){g.anim.stop();}g.from=g.anim=null;}i.content[this.config[this.direction]]=0;i.clearClass("nav");i.clearClass("content");i.switchTo(-1);}};}());b.Slide=function(i,g){g=f.mix(f.mix({},g||{}),{autoPlay:true});if(g.effect=="scroll"){g.behavior=new b.SwitchBehavior.Scroll(g);g=f.mix(g,{selector:b.Slide.Config.SCROLL_SELECTOR,className:b.Slide.Config.SCROLL_CLASS_NAME});}else{g.behavior=new b.SwitchBehavior.Fade(g);g=f.mix(g,{selector:b.Slide.Config.FADE_SELECTOR,className:b.Slide.Config.FADE_CLASS_NAME});}return new b.ElementSwitch(i,g);};b.Slide.Config={FADE_SELECTOR:{nav:">*",content:">*"},FADE_CLASS_NAME:{host:"switch-fade",nav:"switch-nav",content:"switch-content",navItemSelected:"selected",navItemUnSelected:"unselected",contentItemSelected:"selected",contentItemUnSelected:"unselected"},SCROLL_SELECTOR:{nav:">*",content:">*"},SCROLL_CLASS_NAME:{host:"switch-scroll",nav:"switch-nav",content:"switch-content",navItemSelected:"selected",navItemUnSelected:"unselected",contentItemSelected:"selected",contentItemUnSelected:"unselected"}};}();
/*! File: scroll.js | Build: 2012-09-22-14:33:28 | Revision: 46060 */
void function(){var d=BB.ObjectH,i=BB.NodeH,a=BB.NodeW,k=BB.CustEvent,f=BB.EventTargetH,j=BB.EventH,g=BB.DomU,c=BB.Switch,b=BB.ScrollAnim;c.Scroll=function(){this._switch=null;this.panel=null;this.prev=null;this.next=null;this.vertical=false;this.autoWidth=true;this.preventDefault=true;this.easing=null;this.interval=200;this.events={"in":"mousedown",out:"mouseup"};this.className={scroll:"switch-scroll",scrolled:"switch-scrolled",active:"switch-scroll-active",panel:"switch-scroll-panel",prev:"switch-scroll-prev",next:"switch-scroll-next"};this._handlers={render:null,dispose:null,_switch:null,prev:null,next:null,previn:null,prevout:null,nextin:null,nextout:null};this._anim=null;this._timer=null;this.initialize.apply(this,arguments);return this._switch;};d.mix(c.Scroll.prototype,function(){return{initialize:function(m,l){this._switch=m;this._switch.scroll=this;d.mix(this,l||{},true);this._addListener();},dispose:function(){this._unListener();this._unTriggerHandler();delete this._switch.scroll;},render:function(l){l=l||{};this.panel=l.panel||i.ancestorNode(this._switch.nav,"."+this.className.panel);this.prev=l.prev||g.query("."+this.className.prev,this._switch.host)[0];this.next=l.next||g.query("."+this.className.next,this._switch.host)[0];this._addTriggerHandler();this._autoWidth();this.refresh();},_autoWidth:function(){if(!this.vertical&&this.autoWidth){var s,q=this._switch.list,m=q.length,r=0,p=0,n=0;for(;n<m;++n){s=q[n].nav;r=a.marginWidth(s);p+=s.offsetWidth+r[1]+r[3];}i.setInnerSize(this._switch.nav,p);}},_addListener:function(){var l=this;this._switch.after("render",this._handlers.render=function(){l.render();});this._switch.after("dispose",this._handlers.dispose=function(){l.dispose();});this._switch.after("switch",this._handlers._switch=function(m){l.move(m.to.nav);});},_unListener:function(){this._switch.un("afterrender",this._handlers.render);this._switch.un("afterdispose",this._handlers.dispose);this._switch.un("afterswitch",this._handlers._switch);},_addTriggerHandler:function(){var l=this;f.on(this.prev,"click",this._handlers.prev=function(m){if(l.preventDefault){j.preventDefault(m);}});f.on(this.next,"click",this._handlers.next=function(m){if(l.preventDefault){j.preventDefault(m);}});f.on(this.prev,this.events["in"],this._handlers.previn=function(m){l.intoView(-1);if(l._timer){clearInterval(l._timer);}l._timer=setInterval(function(){l.intoView(-1);},l.interval+100);});f.on(this.prev,this.events.out,this._handlers.prevout=function(m){if(l._timer){clearInterval(l._timer);l._timer=null;}});f.on(this.next,this.events["in"],this._handlers.nextin=function(m){l.intoView(1);if(l._timer){clearInterval(l._timer);}l._timer=setInterval(function(){l.intoView(1);},l.interval+100);});f.on(this.next,this.events.out,this._handlers.nextout=function(m){if(l._timer){clearInterval(l._timer);l._timer=null;}});},_unTriggerHandler:function(){f.un(this.prev,"click",this._handlers.prev);f.un(this.next,"click",this._handlers.next);f.un(this.prev,this.events["in"],this._handlers.previn);f.un(this.next,this.events.out,this._handlers.nextin);f.un(this.prev,this.events["in"],this._handlers.prevout);f.un(this.next,this.events.out,this._handlers.nextout);},intoView:function(t){if(this._switch.index==-1){return;}var m=i.getRect(this.panel),r=null,q=0,p=this._switch.list.length,s;for(;q<p;++q){s=i.getRect(this._switch.list[q].nav);if(this.vertical){if(m.top<=s.top&&m.top+m.height>=s.top+s.height){break;}}else{if(m.left<=s.left&&m.left+m.width>=s.left+s.width){break;}}}for(;q<p&&q>=0;q+=t){s=i.getRect(this._switch.list[q].nav);if(this.vertical){if(m.top>s.top||m.top+m.height<s.top+s.height){r=this._switch.list[q].nav;break;}}else{if(m.left>s.left||m.left+m.width<s.left+s.width){r=this._switch.list[q].nav;break;}}}if(r){this.move(r);}},moveTo:function(p){var l=this,n=null;if(this._anim&&this._anim.isPlay()){this._anim.pause();n=1-this._anim.step();this._anim.stop();}var m={};if(this.vertical){m.scrollTop={to:p};}else{m.scrollLeft={to:p};}this._anim=new b(this.panel,m,this.interval,this.easing);this._anim.on("suspend",function(){l.refresh();});this._anim.play();if(n!=null){this._anim.step(n);}},move:function(m){var l=i.getRect(this.panel),p=i.getRect(m);p.top+=this.panel.scrollTop;var n;if(this.vertical){if(l.top>p.top){n=this.panel.scrollTop+p.top-l.top;}else{if(l.top+l.height<p.top+p.height){n=this.panel.scrollTop+p.top+p.height-l.top-l.height;}}}else{if(l.left>p.left){n=this.panel.scrollLeft+p.left-l.left;}else{if(l.left+l.width<p.left+p.width){n=this.panel.scrollLeft+p.left+p.width-l.left-l.width;}}}this.moveTo(n);},refresh:function(){var r=this._switch.list;if(r.length==0){return;}var l=i.getRect(this.panel),p=i.getRect(r[0].nav).left,q=i.getRect(r[r.length-1].nav).right,n=i.getRect(r[0].nav).top,m=i.getRect(r[r.length-1].nav).bottom;if(this.vertical){if(this._switch.nav.offsetHeight>this.panel.offsetHeight){i.addClass(this.panel,this.className.active);if(l.top<=n){i.replaceClass(this.prev,this.className.scroll,this.className.scrolled);}else{i.replaceClass(this.prev,this.className.scrolled,this.className.scroll);}if(l.bottom>=m){i.replaceClass(this.next,this.className.scroll,this.className.scrolled);}else{i.replaceClass(this.next,this.className.scrolled,this.className.scroll);}}}else{if(this._switch.nav.offsetWidth>this.panel.offsetWidth){i.addClass(this.panel,this.className.active);if(l.left<=p){i.replaceClass(this.prev,this.className.scroll,this.className.scrolled);}else{i.replaceClass(this.prev,this.className.scrolled,this.className.scroll);}if(l.right>=q){i.replaceClass(this.next,this.className.scroll,this.className.scrolled);}else{i.replaceClass(this.next,this.className.scrolled,this.className.scroll);}}}}};}(),true);}();
/*! File: interface.js | Build: 2012-09-22-14:33:27 | Revision: 46060 */
BB.provide("Interface",{richClass:function(b){var a=function(c){this.prop=this._createProperty();BB.ObjectH.mix(this.prop,c,true);if(this.get("autoLoad")){this.init();}return this;};BB.ObjectH.mix(a.prototype,{set:function(d,c){this.prop[d]=c;return this;},get:function(c){return this.prop[c];},init:function(){BB.CustEvent.createEvents(this,this._EVENT);for(var c in this.prop){var d=this.prop[c];d&&(typeof(d)=="object"||typeof(d)=="function")&&("init" in this.prop[c])&&this.prop[c].init();}if("_init" in this){this._init();}return this;},destroy:function(){for(var c in this.prop){var d=this.prop[c];d&&(typeof(d)=="object"||typeof(d)=="function")&&("destroy" in this.prop[c])&&this.prop[c].destroy();}if("_destroy" in this){this._destroy();}}},true);BB.ObjectH.mix(a.prototype,b||{},true);return a;}});
/*! File: ctal.js | Build: 2012-09-22-14:33:27 | Revision: 46060 */
BB.provide("CTAL",BB.Interface.richClass({_createProperty:function(){return{isShown:false,target:null,container:null,layer:null,rect:null,referEl:null,content:null,showEvent:{},hideEvent:{},autoLoad:false};},_EVENT:["show","hide","render"],_init:function(){this.set("target",BB.NodeW(this.get("target")).first());this.set("referEl",BB.NodeW(this.get("referEl")||this.get("target")).first());var i=this;var c=BB.NodeW(this.get("container"));if(c&&c.first()){c=c.first();c.setContent=function(j){this.html("");this.appendChild(j);};c.showPopup=function(){this.show();};c.hidePopup=c.hide;this.set("layer",c);}if(!this.get("layer")){this.set("layer",new BB.LayerPopup({autoPosition:false}));}if(!this.get("rect")){this.set("rect",{x:null,y:this.get("target").get("offsetHeight"),w:null,h:null});}var a=this.get("target");try{var f=this.get("showEvent");for(var b in f){a.on(b,function(){i.show();},true);}var d=this.get("showEvent");for(var b in d){a.on(b,function(){i.hide();},true);}}catch(g){}},isShown:function(){return this.get("isShown");},show:function(b,a){if(!this.isShown()){b=b||this.get("rect");this.get("layer").showPopup(b.x,b.y,b.w,b.h,a||this.get("referEl").core);this.set("isShown",true);this.fire("show");}return this;},render:function(a){this.get("layer").setContent(a||this.get("content"));this.fire("render");return this;},hide:function(){if(this.isShown()){this.get("layer").hidePopup();this.set("isShown",false);this.fire("hide");}return this;}}));
/*! File: data.js | Build: 2012-09-22-14:33:27 | Revision: 46060 */
BB.provide("Data",BB.Interface.richClass({_createProperty:function(){return{root:"",url:null,urlParam:{},type:["jsonp","json","array","xml"],handler:function(a){if(a.constructor&&a.constructor==Array){return a;}else{return[a];}},filter:function(){return this.get("data");},source:[],data:[],capacity:-1,autoLoad:false,_req:{cancel:function(){}}};},_init:function(){if(this.get("autoLoad")){return this.read();}},_EVENT:["datachange","itemadd","itemdelete","overflow"],filter:function(c){var d=this.get("type");for(var b in c){c[b]=encodeURIComponent(c[b]);}if(d=="jsonp"){this.read({url:BB.StringH.tmpl(c.url||this.get("url"),c)});}else{if(d=="array"||d=="json"||d=="xml"){var a=this.get("filter").apply(this,arguments);this.set("data",a).fire("datachange",{data:this.get("data")});}}},_callbackHandler:function(){var a=this;return function(){var b=a.get("handler").apply(a,arguments);a.set("data",b).set("source",b).fire("datachange",{data:a.get("data")});};},read:function(c){var f=this.get("type");var g=this.get("_req");if(f=="jsonp"){var d=this._callbackHandler();if(c){c.onsuccess=d;c.dataType="jsonp";g.cancel();g=new BB.Ajax(c);g.request();this.set("_req",g);}else{g.cancel();g=new BB.Ajax.getJSONP(this.get("url"),this.get("urlParam"),d);this.set("_req",g);}}else{if(f=="array"||f=="json"||f=="xml"){c=c||{};if("url" in c){c.onsuccess=this._callbackHandler();g.cancel();g=new BB.Ajax(c);g.request();this.set("_req",g);}else{g.cancel();g=new BB.Ajax({url:this.get("url"),method:this.get("method"),onsuccess:this._callbackHandler(),data:this.get("urlParam")});g.request();this.set("_req",g);}if((!("url" in c)&&("data" in c))||(!this.get("url")&&this.get("data").length>0)){var a;if(!("url" in c)&&("data" in c)){a=c.data;}else{a=this.get("data");}if(f=="xml"){a=BB.JSON.xmlToJSON(a);}a=this.get("handler").apply(this,[a]);var b=this.get("root");if("root" in a[0]){if(a[0][b].constructor&&a[0][b].constructor==Array){a=a[0][b];}else{a=[a[0][b]];}}this.set("data",a).set("source",a).fire("datachange",{data:o.get("data")});}}}return this;},getItem:function(a){if(a>this.getLength()-1){return false;}return this.get("data")[a];},addItem:function(a,b){var c=this.get("data").splice(a,0,b);this.set("data",c).set("source",c);this.fire("itemadd",this.getItem(a));return this;},deleteItem:function(a){var b=this.getItem(a);if(b){var c=this.get("data").splice(a,1);this.set("data",c).set("source",c);this.fire("itemdelete",b);}return this;},getLength:function(){return this.get("data").length;}}));
/*! File: keyboard.listener.js | Build: 2012-09-22-14:33:27 | Revision: 46060 */
var _keyboardControlKey={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"caps lock":20,escape:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,"num lock":144,"char":-1};BB.provide("ManageKeyboard",BB.Interface.richClass({_createProperty:function(){return{target:null,_controlKey:_keyboardControlKey,autoLoad:true};},_EVENT:BB.ObjectH.keys(_keyboardControlKey),_isControlKey:function(c){var b=this.get("_controlKey");for(var a in b){if(b[a]==c){return a;}}return false;},_init:function(){this.set("target",BB.NodeW(this.get("target")).first());var a=this;this.get("target").on("keydown",function(b){a._keyEventHandler(b);});return true;},_destory:function(){delete this.prop.target;},_keyEventHandler:function(a){var b=this._isControlKey(a.keyCode);if(b){this.fire(b,a);}else{this.fire("char",a);}}}));BB.ObjectH.mix(BB.NodeW.prototype,{listenKeyboard:function(a){var d=this.first().core;d._keyboardListener=new BB.ManageKeyboard(BB.ObjectH.mix(a||{},{target:d}));var b=this.on;var c=this.un;var f=this.fire;this.on=function(j,i){var g=this.first().core;if(j.split(",")[0] in _keyboardControlKey){g._keyboardListener.on.apply(g._keyboardListener,arguments);}else{b.apply(this,arguments);}return this;};this.un=function(j,i){var g=this.first().core;if(j in _keyboardControlKey){g._keyboardListener.un.apply(g._keyboardListener,arguments);}else{c.apply(this,arguments);}return this;};this.fire=function(i){var g=this.first().core;if(i in _keyboardControlKey){g._keyboardListener.fire.apply(g._keyboardListener,arguments);}else{f.apply(this,arguments);}return this;};return this;}},false);
/*! File: propertychange.listener.js | Build: 2012-09-22-14:33:27 | Revision: 46060 */
BB.provide("PropertyChange",BB.Interface.richClass({_createProperty:function(){return{isTimerOn:false,target:null,value:"",property:"value",interval:50,timer:null,autoLoad:true};},_EVENT:["propertychange"],_init:function(){this._EVENT[0]=this.get("property")+"change";BB.CustEvent.createEvents(this,this._EVENT);},stopListen:function(){if(this.get("isTimerOn")){clearInterval(this.get("timer"));this.set("isTimerOn",false);}return true;},startListen:function(){if(!this.get("isTimerOn")){var a=this;a.set("value",a.get("target").get(a.get("property")));var b=window.setInterval(function(){var d=a.get("target").get(a.get("property"));var c=a.get("value");if(c!=d){a.set("value",d).fire(a._EVENT[0],{oldValue:c,newValue:d});}},a.get("interval"));this.set("timer",b).set("isTimerOn",true);}return true;}}));BB.ObjectH.mix(BB.NodeW.prototype,{listenPropertyChange:function(a){var d=this.first().core;d._propertyChangeListener=new PropertyChange(BB.ObjectH.mix({target:BB.NodeW(d)},a,true));var b=this.on;var c=this.un;var f=this.fire;this.on=function(j,i){var g=this.first().core;if(j==g._propertyChangeListener._EVENT[0]){g._propertyChangeListener.on.apply(g._propertyChangeListener,arguments);}else{b.apply(this,arguments);}return this;};this.un=function(j,i){var g=this.first().core;if(j==g._propertyChangeListener._EVENT[0]){g._propertyChangeListener.un.apply(g._propertyChangeListener,arguments);}else{c.apply(this,arguments);}return this;};this.fire=function(i){var g=this.first().core;if(i==g._propertyChangeListener._EVENT[0]){g._propertyChangeListener.fire.apply(g._propertyChangeListener,arguments);}else{f.apply(this,arguments);}return this;};this.startListenPropertyChange=function(){this.first().core._propertyChangeListener.startListen();return this;};this.isListeningPropertyChange=function(){return this.first().core._propertyChangeListener.get("isTimerOn");};this.stopListenPropertyChange=function(){this.first().core._propertyChangeListener.stopListen();return this;};return this;}},false);
/*! File: listview.js | Build: 2012-09-22-14:33:27 | Revision: 46060 */
BB.provide("ListView",BB.Interface.richClass({_createProperty:function(){return{template:"",render:null,data:null,style:{selectClass:"focused",disableClass:"disabled",focusClass:"selected",touchClass:"touched"},container:BB.NodeW(document.createElement("ul")),items:[],focusIndex:-1,selectIndex:[]};},_EVENT:["render","itemfocus","itemblur","itemselect","itemtouch","itemdrag","itemdeselect","itemshow","itemhide","itemdisable","itemenable"],_init:function(){this.set("container",BB.NodeW(this.get("container")).first());var a=this;var b=this.get("data");if(b!==null){this.bindData(b);}return true;},bindData:function(b){var a=this;this.set("data",b).get("data").on("datachange",function(c){a.render(c.data);});},render:function(c){this.set("focusIndex",-1);var b=this.get("items");for(var d=0;d<b.length;d++){b[d].un();}b.length=0;var f=this.get("container");f.set("innerHTML","");var l=[];for(var d=0,g=c.length;d<g;d++){l[d]=false;}this.set("selectIndex",l);var a=this.get("template");var k=this.get("render");if(k!==null){f=BB.NodeW(k.apply(this,[c]));}else{if(a!=""){f=BB.NodeW(BB.Dom.create(BB.StringH.trim(BB.Tmpl(this.get("template"))({data:c}))));}}this.set("container",f);var j=f.query(".listview-item");for(var d=0,g=j.length;d<g;d++){b[d]=j.item(d);this._initItem(d);}this.fire("render",{data:c,ui:this.get("container")});return this;},_initItem:function(a){var c=this.getItem(a);if(c){var b=this.get("style");var d=c.data;if(b.disableClass in d){this.disableItem(a);}else{this.enableItem(a);}if(b.focusClass in d){this.focusItem(a);}if(b.selectClass in d){this.selectItem(a);}}},_bindEventToItem:function(b,a){var c=this;b.on("mouseover",function(d){c.focusItem(a,d);}).on("mouseout",function(d){c.blurItem(a,d);}).on("mousedown",function(d){c.touchItem(a,d);}).on("click",function(d){c.selectItem(a,d);});},disableItem:function(a){var b=this.getItem(a);if(b){b.ui.un();b.ui.addClass(this.get("style").disableClass);this.fire("itemdisable",{index:a});}return this;},enableItem:function(a){var b=this.getItem(a);if(b){this._bindEventToItem(b.ui,a);b.ui.removeClass(this.get("style").disableClass);this.fire("itemenable",{index:a});}return this;},getItem:function(a){var b=this.get("items");if(a<0||a>=b.length){return false;}return{index:a,ui:b[a],data:this.get("data").getItem(a)};},getLength:function(){return this.get("items").length;},getFocusItem:function(){var a=this.get("focusIndex");return this.getItem(a);},getSelectedItem:function(){var b=[];var d=this.get("selectIndex");for(var c=0,a=d.length;c<a;c++){b.push(this.getItem(c));}return b;},selectItem:function(a,b){var c=this.getItem(a);if(c){c.ui.addClass(this.get("style").selectClass);this.get("selectIndex")[a]=true;c.event=b||null;this.fire("itemselect",c);}return this;},touchItem:function(a,b){var c=this.getItem(a);if(c){c.ui.addClass(this.get("style").touchClass);c.event=b||null;this.fire("itemtouch",c);}return this;},deselectItem:function(a,b){var c=this.getItem(a);if(c){c.ui.removeClass(this.get("style").selectClass);this.get("selectIndex")[a]=false;c.event=b||null;this.fire("itemdeselect",c);}return this;},focusItem:function(c,d){var f=this.getItem(c);var b=this.get("container").query(".container-item").first();if(f){if(b){cBottom=b.getRect().bottom;iBottom=f.ui.getRect().bottom;if(iBottom>cBottom){b.core.scrollTop+=iBottom-cBottom;}cBottom=b.getRect().top;iBottom=f.ui.getRect().top;if(iBottom<cBottom){b.core.scrollTop+=iBottom-cBottom;}}var a=this.get("focusIndex");if(a!=-1){this.blurItem(a);}f.ui.addClass(this.get("style").focusClass);f.event=d||null;this.set("focusIndex",c).fire("itemfocus",f);}return this;},blurItem:function(a,b){var d=this.getItem(a);if(d){var c=this.get("focusIndex");if(c!=a){this.blurItem(c);}d.ui.removeClass(this.get("style").focusClass);d.event=b||null;this.set("focusIndex",-1).fire("itemblur",d);}return this;},hideItem:function(a,b){var c=this.getItem(a);if(c){c.ui.set("_list_view_display",c.ui.getStyle("display")||"").setStyle("display","none");c.event=b||null;this.fire("itemhide",c);}return this;},showItem:function(a,b){var c=this.getItem(a);if(c){c.ui.setStyle("display",c.ui.get("_list_view_display")||"");c.event=b||null;this.fire("itemshow",c);}return this;}}));
/*! File: suggest.js | Build: 2012-09-22-14:33:27 | Revision: 46060 */
BB.provide("Suggest",BB.Interface.richClass({_createProperty:function(){return{autoFocusFirstItem:true,index:-1,input:"",combo:null,view:null,data:null,target:null,_interval:1000,keywordFilter:function(a){return a;},_disabled:false,autoLoad:true,sugempty:false};},_EVENT:["suggest","indexchange","focus","blur"],_init:function(){var b=0;var g=this;var f=this.get("view");var d=this.get("combo");var i=this.get("data");var c=d.get("layer")._content?d.get("layer")._content:d.get("layer").core;f.bindData(i);var a=d.get("target").first().listenKeyboard().listenPropertyChange({property:"value",interval:this.get("_interval")});d.set("target",a);g.set("target",a);a.on("up",function(k){(new EventW(k.getEvent())).preventDefault();if(d.isShown()){var j=f.get("focusIndex");f.blurItem(j);if(j>-1){j--;}else{j=f.getLength()-1;}g.set("index",j).fire("indexchange",{index:j});f.focusItem(j);a.stopListenPropertyChange();}}).on("down",function(k){(new EventW(k.getEvent())).preventDefault();if(d.isShown()){var j=f.get("focusIndex");f.blurItem(j);if(j<f.getLength()-1){j++;}else{j=-1;}g.set("index",j).fire("indexchange",{index:j});f.focusItem(j);a.stopListenPropertyChange();}else{g.suggest(a.get("value"));}}).on("escape",function(j){if(d.isShown()){a.set("value",g.get("input"));d.hide();(new EventW(j.getEvent())).preventDefault();}}).on("enter,space",function(j){if(d.isShown()&&f.get("focusIndex")!=-1){f.selectItem(f.get("focusIndex"));(new EventW(j.getEvent())).preventDefault();a.core.blur();}d.hide();}).on("char,backspace",function(j){if(!a.isListeningPropertyChange()){a.startListenPropertyChange();}}).on("focus",function(j){if(b==0){if(a.get("value")!==""||g.get("sugempty")){!d.isShown()&&g.suggest();}g.fire("focus",j);}else{b=0;}a.startListenPropertyChange();}).on("blur",function(j){if(b==0){d.hide();g.fire("blur",j);}else{b=j;}a.stopListenPropertyChange();}).on("valuechange",function(j){g.set("input",j.newValue);g.suggest(j.newValue);});W(c).on("mousedown",function(j){b=1;}).on("mouseleave",function(j){if(b!=0){if(d.prop.isShown){a.core.focus();}else{g.fire("blur",b);b=0;}}});d.on("render",function(){if(g.get("autoFocusFirstItem")){f.focusItem(0);}});f.on("render",function(j){if(f.getLength()>0){d.render(j.ui.core).show();}else{d.hide();}});},suggest:function(a){if(this.get("_disabled")){return this;}a=a||this.get("target").get("value");this.set("input",a);a=this.get("keywordFilter")(a);if(a!==false){this.get("data").filter({query:BB.StringH.trim(a)});}return this;},enable:function(){this.set("_disabled",false);},disable:function(){this.set("_disabled",true);}}));
/*! File: wrap.sns.js | Build: 2012-09-22-14:33:27 | Revision: 46060 */
BB.Suggest.Sns=function(d){var c={template:'<li class="item"><span class="key">{display}</span><span class="val">{val}</span></li>',_interval:200,handler:function(g){if(g.err=="mcphp.ok"){g.data.r.keyword=g.data.keyword;return g.data.r;}else{return[];}},referEl:null,render:null,autoFocusFirstItem:false};BB.ObjectH.mix(c,d,true);var a=NodeW(c.target).first();var f=null;if(c.url){f=new Data({type:"jsonp",url:c.url,handler:c.handler});}else{f=new Data({type:"array",data:c.data});}var b=new BB.Suggest({combo:new BB.CTAL({target:a,rect:c.rect,referEl:c.referEl,container:c.container}),view:new BB.ListView({template:c.template,render:c.render}),data:f,autoFocusFirstItem:c.autoFocusFirstItem});b.on("indexchange",function(g){if(g.index!=-1){a.set("value",b.get("view").getItem(g.index).data.val);}else{a.set("value",b.get("input"));}});b.get("view").on("itemselect",function(g){a.set("value",g.data.val);b.set("input",g.data.val);b.get("target").stopListenPropertyChange();b.get("combo").hide();});return b;};
/*! File: at.event.listener.js | Build: 2012-09-22-14:33:27 | Revision: 46060 */
var _atKeyboardControlKey={backspaceAt:8,tabAt:9,enterAt:13,shiftAt:16,ctrlAt:17,altAt:18,"caps lockAt":20,escapeAt:27,spaceAt:32,"page upAt":33,"page downAt":34,endAt:35,homeAt:36,leftAt:37,upAt:38,rightAt:39,downAt:40,insertAt:45,deleteAt:46,f1At:112,f2At:113,f3At:114,f4At:115,f5At:116,f6At:117,f7At:118,f8At:119,f9At:120,f10At:121,f11At:122,f12At:123,"num lockAt":144,charAt:-1,backspaceNoAt:8,tabNoAt:9,enterNoAt:13,shiftNoAt:16,ctrlNoAt:17,altNoAt:18,"caps lockNoAt":20,escapeNoAt:27,spaceNoAt:32,"page upNoAt":33,"page downNoAt":34,endNoAt:35,homeNoAt:36,leftNoAt:37,upNoAt:38,rightNoAt:39,downNoAt:40,insertNoAt:45,deleteNoAt:46,f1NoAt:112,f2NoAt:113,f3NoAt:114,f4NoAt:115,f5NoAt:116,f6NoAt:117,f7NoAt:118,f8NoAt:119,f9NoAt:120,f10NoAt:121,f11NoAt:122,f12NoAt:123,"num lockNoAt":144,charNoAt:-1,changeAt:-1,focusAt:-1,blurAt:-1};BB.provide("ManageAtEvent",BB.Interface.richClass({_createProperty:function(){return{target:null,hasAt:false,value:null,_controlKey:_atKeyboardControlKey,autoLoad:true};},_EVENT:BB.ObjectH.keys(_atKeyboardControlKey),_isControlKey:function(d,b){var c=this.get("_controlKey");for(var a in c){if((c[a]==d)&&!((a.slice(-1,-4)!="NoAt")^b)){return a;}}return false;},_init:function(){this.set("target",BB.NodeW(this.get("target")).first());var a=this;this.get("target").on("keydown",function(b){a._keyEventHandler(b,a.get("hasAt"));}).on("blur",function(b){a.fire("blurAt",b);});this.get("target")[0].AtFriends.on("matchFriends",function(b){if(a.get("hasAt")){var c=a.get("value");if(c.left!=b.left||c.top!=b.top){a.fire("blurAt",c);a.fire("focusAt",b);}else{if(c.key!=b.key){a.set("value",b);a.fire("changeAt",b);}}}else{a.set("value",b);a.fire("focusAt",b);a.set("hasAt",true);}});this.get("target")[0].AtFriends.on("unMatchFriends",function(b){if(a.get("hasAt")){a.fire("blurAt",b);a.set("hasAt",false);}});return true;},_destory:function(){delete this.prop.target;},_keyEventHandler:function(a,c){var b=this._isControlKey(a.keyCode,c);if(b){this.fire(b,a);}else{this.fire("char"+(c?"At":"NoAt"),a);}}}));BB.ObjectH.mix(BB.NodeW.prototype,{listenAtEvent:function(a){var d=this.first().core;d._keyboardListener=new BB.ManageAtEvent(BB.ObjectH.mix(a||{},{target:d}));var b=this.on;var c=this.un;var f=this.fire;this.on=function(j,i){var g=this.first().core;if(j in _atKeyboardControlKey){g._keyboardListener.on.apply(g._keyboardListener,arguments);}else{b.apply(this,arguments);}return this;};this.un=function(j,i){var g=this.first().core;if(j in _atKeyboardControlKey){g._keyboardListener.un.apply(g._keyboardListener,arguments);}else{c.apply(this,arguments);}return this;};this.fire=function(i){var g=this.first().core;if(i in _atKeyboardControlKey){g._keyboardListener.fire.apply(g._keyboardListener,arguments);}else{f.apply(this,arguments);}return this;};return this;}},false);
/*! File: suggest.at.js | Build: 2012-09-22-14:33:27 | Revision: 46060 */
BB.provide("Suggest_At",BB.Interface.richClass({_createProperty:function(){return{autoFocusFirstItem:true,index:-1,input:"",combo:null,view:null,data:null,target:null,_interval:1000,keywordFilter:function(a){return a;},_disabled:false,autoLoad:true,sugempty:false};},_EVENT:["suggest","indexchange"],_init:function(){var b=0;var g=this;var f=this.get("view");var d=this.get("combo");var i=this.get("data");var c=d.get("layer")._content?d.get("layer")._content:d.get("layer").core;f.bindData(i);var a=d.get("target").first().listenAtEvent();d.set("target",a);g.set("target",a);a.on("upAt",function(k){(new EventW(k.getEvent())).preventDefault();if(d.isShown()){var j=f.get("focusIndex");f.blurItem(j);if(j>-1){j--;}else{j=f.getLength()-1;}g.set("index",j).fire("indexchange",{index:j});f.focusItem(j);}}).on("downAt",function(k){(new EventW(k.getEvent())).preventDefault();if(d.isShown()){var j=f.get("focusIndex");f.blurItem(j);if(j<f.getLength()-1){j++;}else{j=-1;}g.set("index",j).fire("indexchange",{index:j});f.focusItem(j);}else{g.suggest(g.get("input"));}}).on("escapeAt",function(j){if(d.isShown()){d.hide();(new EventW(j.getEvent())).preventDefault();}}).on("enterAt",function(j){if(d.isShown()){f.selectItem(f.get("focusIndex"));(new EventW(j.getEvent())).preventDefault();d.hide();}}).on("focusAt",function(k){if(b==0){var j=g.get("combo").get("target").getRect();g.get("combo").set("rect",{x:k.left-j.left,y:k.top-j.top});if(k.key!==""||this.get("sugempty")){g.suggest(k.key);}}else{b=0;}}).on("blurAt",function(j){if(b==0){d.hide();}else{b=j;}}).on("changeAt",function(j){g.suggest(j.key);});W(c).on("mousedown",function(j){b=1;}).on("mouseleave",function(j){if(b!=0){if(d.prop.isShown){a.core.focus();if(b!=0){a.core.AtFriends.fire("matchFriends");}}else{b=0;}}});d.on("render",function(){if(g.get("autoFocusFirstItem")){f.focusItem(0);}});f.on("render",function(j){if(f.getLength()>0){d.render(j.ui.core).show();}else{d.hide();}});},suggest:function(a){if(this.get("_disabled")){return this;}this.set("input",a);a=this.get("keywordFilter")(a);if(a!==false){this.get("data").filter({query:BB.StringH.trim(a)});}return this;},setValue:function(){},enable:function(){this.set("_disabled",false);},disable:function(){this.set("_disabled",true);}}));
/*! File: wrap.at.js | Build: 2012-09-22-14:33:27 | Revision: 46060 */
BB.SuggestAt=function(d){var c={template:'<li class="item"><span class="key">{display}</span><span class="val">{val}</span></li>',_interval:200,handler:function(g){if(g.err=="ok"){g.r.keyword=g.keyword;return g.r;}else{return[];}},referEl:null,render:null};BB.ObjectH.mix(c,d,true);var a=NodeW(c.target).first();var f=null;if(c.url){f=new Data({type:"jsonp",url:c.url,handler:c.handler});}else{f=new Data({type:"array",data:c.data});}var b=new BB.Suggest_At({combo:new BB.CTAL({target:c.target,rect:c.rect,referEl:c.referEl}),view:new BB.ListView({template:c.template,render:c.render}),data:f});b.get("view").on("itemselect",function(g){b.setValue(g.data.val,b.get("input"));b.set("input",g.data.val);b.get("combo").hide();});return b;};
/*! File: cookie.js | Build: 2012-09-22-14:33:28 | Revision: 46060 */
(function(){function a(){return this.init.apply(this,arguments);}a.prototype=(function(){return{init:function(b){b=b||{};this.path=b.path||"/";this.domain=b.domain||"";if(b.expires===undefined){this.expires=1000*60*60*24*365;}else{this.expires=b.expires;}this.secure=b.secure||"";},set:function(c,d){var b=new Date();if(typeof(this.expires)=="number"){b.setTime(b.getTime()+this.expires);}document.cookie=c+"="+escape(d)+(this.expires?(";expires="+b.toGMTString()):"")+";path="+this.path+(this.domain==""?"":("; domain="+this.domain))+(this.secure?"; secure":"");},get:function(c){var b,d=new RegExp("(^| )"+c+"=([^;]*)(;|$)");if(b=document.cookie.match(d)){return unescape(b[2]);}else{return"";}},remove:function(c){var b=this.expires;this.expires=-1*1000*60*60*24*365;this.set(c,"");this.expires=b;}};})();a.set=function(c,f,d){var b=new a(d);b.set(c,f);};a.get=function(d,f){var c=new a(f);var b=c.get(d);return b;};a.remove=function(c,d){var b=new a(d);b.remove(c);};BB.provide("Cookie",a);})();
/*! File: storage.js | Build: 2012-09-22-14:33:28 | Revision: 46060 */
(function(){var f=BB.Dom,d=BB.ObjectH.mix,j=BB.ClassH.extend,i=f.$;var b=function(){};b.prototype=(function(){return{test:function(){return true;},init:function(){},set:function(k,l){},get:function(k,l){l&&l("");},remove:function(k){}};})();var a=j(function(){},b);d(a.prototype,(function(){var l="_Flash_Storage_";var k=function(s){var p=document.createElement("div"),q=[];if(BB.Env.ie){q.push('<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"','codebase="http://download.macromedia.com/pub/shockwave/cabs','/flash/swflash.cab#version=10,0,0,0" width="1" height="1" id="',l,'">','<param name="allowScriptAccess" value="always" />','<param name="movie" value="',s,'" /></object>');}else{q.push('<embed src="',s,'" width="1" height="1" id="',l,'" ','align="middle" allowScriptAccess="always" type="application/x-shockwave-flash" ','pluginspage="http://www.adobe.com/go/getflashplayer_cn"/>');}var r=p.style;r.position="absolute";r.top="-9999px";r.top="-9999px";var n=document.body;n.insertBefore(p,n.firstChild);p.innerHTML=q.join("");document.title=document.title.split("#")[0];};var m=function(n,q){q=q||function(){};var p=setInterval(function(){try{var r=n();clearInterval(p);p=null;q(r);}catch(s){}},50);setTimeout(function(){if(!p){return;}clearInterval(p);q("");},5000);};return{test:function(){var r="-1",s=navigator;if(s.plugins&&s.plugins.length){for(var q=0;q<s.plugins.length;q++){if(s.plugins[q].name.indexOf("Shockwave Flash")!=-1){r=s.plugins[q].description.split("Shockwave Flash")[1];break;}}}else{if(window.ActiveXObject){for(var q=10;q>=2;q--){try{if(new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+q)){r=parseInt(q);break;}}catch(p){}}}}return parseInt(r)>7;},init:function(){this.path=BB.PATH+"components/cache/cache.swf";try{if(external.max_language_id!=undefined){this.path+="?random="+Math.random();}}catch(p){}var n=this.path;f.ready(function(){k(n);});},set:function(n,p){m(function(){i(l).set(n,p);});},get:function(n,p){m(function(){return i(l).get(n);},function(q){if(p){p.call(this,q);}return q;});},remove:function(n){m(function(){i(l).remove(n);});}};})(),true);var c=j(function(){},b);d(c.prototype,(function(){return{test:function(){return !!window.localStorage;},init:function(){this.store=localStorage;},set:function(k,l){this.store.setItem(k,l);},get:function(k,m){var l=this.store.getItem(k)||"";if(m){m.call(this,l);}return l;},remove:function(k){this.store.removeItem(k);}};})(),true);function g(){var m=arguments.length>0?Array.toArray(arguments):["localStorage","flash"];m.push("none");var k=null;for(var l=0;l<m.length;l++){switch(m[l]){case"localStorage":k=c;break;case"flash":k=a;break;default:k=b;}k=new k();if(k.test()){k.init();k.storageType=m[l];break;}}return k;}d(g,(function(){var k=new g();return{storageType:k.storageType,set:function(l,m){k.set(l,m);},get:function(l,m){return k.get(l,m);},remove:function(l){k.remove(l);}};})());window.Storage=g;})();
/*! File: swfupload.js | Build: 2012-09-22-14:33:28 | Revision: 46060 */
var SWFUpload;var swfobject;if(SWFUpload==undefined){SWFUpload=function(a){this.initSWFUpload(a);};}SWFUpload.prototype.initSWFUpload=function(b){try{this.customSettings={};this.settings={};this.eventQueue=[];this.movieName="SWFUpload_"+SWFUpload.movieCount++;this.movieElement=null;SWFUpload.instances[this.movieName]=this;this.initSettings(b);this.loadSupport();if(this.swfuploadPreload()){this.loadFlash();}this.displayDebugInfo();}catch(a){delete SWFUpload.instances[this.movieName];throw a;}};SWFUpload.instances={};SWFUpload.movieCount=0;SWFUpload.version="2.5.0 2010-01-15 Beta 2";SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130};SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290,RESIZE:-300};SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5};SWFUpload.UPLOAD_TYPE={NORMAL:-1,RESIZED:-2};SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120,JAVASCRIPT:-130,NONE:-130};SWFUpload.CURSOR={ARROW:-1,HAND:-2};SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"};SWFUpload.RESIZE_ENCODING={JPEG:-1,PNG:-2};SWFUpload.completeURL=function(a){try{var d="",c=-1;if(typeof(a)!=="string"||a.match(/^https?:\/\//i)||a.match(/^\//)||a===""){return a;}c=window.location.pathname.lastIndexOf("/");if(c<=0){d="/";}else{d=window.location.pathname.substr(0,c)+"/";}return d+a;}catch(b){return a;}};SWFUpload.onload=function(){};SWFUpload.prototype.initSettings=function(a){this.ensureDefault=function(c,b){var d=a[c];if(d!=undefined){this.settings[c]=d;}else{this.settings[c]=b;}};this.ensureDefault("upload_url","");this.ensureDefault("preserve_relative_urls",false);this.ensureDefault("file_post_name","Filedata");this.ensureDefault("post_params",{});this.ensureDefault("use_query_string",false);this.ensureDefault("requeue_on_error",false);this.ensureDefault("http_success",[]);this.ensureDefault("assume_success_timeout",0);this.ensureDefault("file_types","*.*");this.ensureDefault("file_types_description","All Files");this.ensureDefault("file_size_limit",0);this.ensureDefault("file_upload_limit",0);this.ensureDefault("file_queue_limit",0);this.ensureDefault("flash_url","swfupload.swf");this.ensureDefault("flash9_url","swfupload_fp9.swf");this.ensureDefault("prevent_swf_caching",true);this.ensureDefault("button_image_url","");this.ensureDefault("button_width",1);this.ensureDefault("button_height",1);this.ensureDefault("button_text","");this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;");this.ensureDefault("button_text_top_padding",0);this.ensureDefault("button_text_left_padding",0);this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES);this.ensureDefault("button_disabled",false);this.ensureDefault("button_placeholder_id","");this.ensureDefault("button_placeholder",null);this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW);this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW);this.ensureDefault("debug",false);this.settings.debug_enabled=this.settings.debug;this.settings.return_upload_start_handler=this.returnUploadStart;this.ensureDefault("swfupload_preload_handler",null);this.ensureDefault("swfupload_load_failed_handler",null);this.ensureDefault("swfupload_loaded_handler",null);this.ensureDefault("file_dialog_start_handler",null);this.ensureDefault("file_queued_handler",null);this.ensureDefault("file_queue_error_handler",null);this.ensureDefault("file_dialog_complete_handler",null);this.ensureDefault("upload_resize_start_handler",null);this.ensureDefault("upload_start_handler",null);this.ensureDefault("upload_progress_handler",null);this.ensureDefault("upload_error_handler",null);this.ensureDefault("upload_success_handler",null);this.ensureDefault("upload_complete_handler",null);this.ensureDefault("mouse_click_handler",null);this.ensureDefault("mouse_out_handler",null);this.ensureDefault("mouse_over_handler",null);this.ensureDefault("debug_handler",this.debugMessage);this.ensureDefault("custom_settings",{});this.customSettings=this.settings.custom_settings;if(!!this.settings.prevent_swf_caching){this.settings.flash_url=this.settings.flash_url+(this.settings.flash_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+new Date().getTime();this.settings.flash9_url=this.settings.flash9_url+(this.settings.flash9_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+new Date().getTime();}if(!this.settings.preserve_relative_urls){this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url);this.settings.button_image_url=SWFUpload.completeURL(this.settings.button_image_url);}delete this.ensureDefault;};SWFUpload.prototype.loadSupport=function(){this.support={loading:swfobject.hasFlashPlayerVersion("9.0.28"),imageResize:swfobject.hasFlashPlayerVersion("10.0.0")};};SWFUpload.prototype.loadFlash=function(){var b,g,f,a,d;if(!this.support.loading){this.queueEvent("swfupload_load_failed_handler",["Flash Player doesn't support SWFUpload"]);return;}if(document.getElementById(this.movieName)!==null){this.support.loading=false;this.queueEvent("swfupload_load_failed_handler",["Element ID already in use"]);return;}b=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder;if(b==undefined){this.support.loading=false;this.queueEvent("swfupload_load_failed_handler",["button place holder not found"]);return;}f=(b.currentStyle&&b.currentStyle.display||window.getComputedStyle&&document.defaultView.getComputedStyle(b,null).getPropertyValue("display"))!=="block"?"span":"div";g=document.createElement(f);a=this.getFlashHTML();try{g.innerHTML=a;}catch(c){this.support.loading=false;this.queueEvent("swfupload_load_failed_handler",["Exception loading Flash HTML into placeholder"]);return;}d=g.getElementsByTagName("object");if(!d||d.length>1||d.length===0){this.support.loading=false;this.queueEvent("swfupload_load_failed_handler",["Unable to find movie after adding to DOM"]);return;}else{if(d.length===1){this.movieElement=d[0];}}b.parentNode.replaceChild(g.firstChild,b);if(window[this.movieName]==undefined){window[this.movieName]=this.getMovieElement();}};SWFUpload.prototype.getFlashHTML=function(a){return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',(this.support.imageResize?this.settings.flash_url:this.settings.flash9_url),'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload">','<param name="wmode" value="',this.settings.button_window_mode,'" />','<param name="movie" value="',(this.support.imageResize?this.settings.flash_url:this.settings.flash9_url),'" />','<param name="quality" value="high" />','<param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+this.getFlashVars()+'" />',"</object>"].join("");};SWFUpload.prototype.getFlashVars=function(){var a,b;b=this.buildParamString();a=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(a),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),"&amp;params=",encodeURIComponent(b),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("");};SWFUpload.prototype.getMovieElement=function(){if(this.movieElement==undefined){this.movieElement=document.getElementById(this.movieName);}if(this.movieElement===null){throw"Could not find Flash element";}return this.movieElement;};SWFUpload.prototype.buildParamString=function(){var a,c,b=[];c=this.settings.post_params;if(typeof(c)==="object"){for(a in c){if(c.hasOwnProperty(a)){b.push(encodeURIComponent(a.toString())+"="+encodeURIComponent(c[a].toString()));}}}return b.join("&amp;");};SWFUpload.prototype.destroy=function(){var a;try{this.cancelUpload(null,false);a=this.cleanUp();if(a){try{a.parentNode.removeChild(a);}catch(b){}}window[this.movieName]=null;SWFUpload.instances[this.movieName]=null;delete SWFUpload.instances[this.movieName];this.movieElement=null;this.settings=null;this.customSettings=null;this.eventQueue=null;this.movieName=null;return true;}catch(c){return false;}};SWFUpload.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\n","Version: ",SWFUpload.version,"\n","Movie Name: ",this.movieName,"\n","Settings:\n","\t","upload_url:               ",this.settings.upload_url,"\n","\t","flash_url:                ",this.settings.flash_url,"\n","\t","flash9_url:                ",this.settings.flash9_url,"\n","\t","use_query_string:         ",this.settings.use_query_string.toString(),"\n","\t","requeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n","\t","http_success:             ",this.settings.http_success.join(", "),"\n","\t","assume_success_timeout:   ",this.settings.assume_success_timeout,"\n","\t","file_post_name:           ",this.settings.file_post_name,"\n","\t","post_params:              ",this.settings.post_params.toString(),"\n","\t","file_types:               ",this.settings.file_types,"\n","\t","file_types_description:   ",this.settings.file_types_description,"\n","\t","file_size_limit:          ",this.settings.file_size_limit,"\n","\t","file_upload_limit:        ",this.settings.file_upload_limit,"\n","\t","file_queue_limit:         ",this.settings.file_queue_limit,"\n","\t","debug:                    ",this.settings.debug.toString(),"\n","\t","prevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n","\t","button_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n","\t","button_placeholder:       ",(this.settings.button_placeholder?"Set":"Not Set"),"\n","\t","button_image_url:         ",this.settings.button_image_url.toString(),"\n","\t","button_width:             ",this.settings.button_width.toString(),"\n","\t","button_height:            ",this.settings.button_height.toString(),"\n","\t","button_text:              ",this.settings.button_text.toString(),"\n","\t","button_text_style:        ",this.settings.button_text_style.toString(),"\n","\t","button_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n","\t","button_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n","\t","button_action:            ",this.settings.button_action.toString(),"\n","\t","button_cursor:            ",this.settings.button_cursor.toString(),"\n","\t","button_disabled:          ",this.settings.button_disabled.toString(),"\n","\t","custom_settings:          ",this.settings.custom_settings.toString(),"\n","Event Handlers:\n","\t","swfupload_preload_handler assigned:  ",(typeof this.settings.swfupload_preload_handler==="function").toString(),"\n","\t","swfupload_load_failed_handler assigned:  ",(typeof this.settings.swfupload_load_failed_handler==="function").toString(),"\n","\t","swfupload_loaded_handler assigned:  ",(typeof this.settings.swfupload_loaded_handler==="function").toString(),"\n","\t","mouse_click_handler assigned:       ",(typeof this.settings.mouse_click_handler==="function").toString(),"\n","\t","mouse_over_handler assigned:        ",(typeof this.settings.mouse_over_handler==="function").toString(),"\n","\t","mouse_out_handler assigned:         ",(typeof this.settings.mouse_out_handler==="function").toString(),"\n","\t","file_dialog_start_handler assigned: ",(typeof this.settings.file_dialog_start_handler==="function").toString(),"\n","\t","file_queued_handler assigned:       ",(typeof this.settings.file_queued_handler==="function").toString(),"\n","\t","file_queue_error_handler assigned:  ",(typeof this.settings.file_queue_error_handler==="function").toString(),"\n","\t","upload_resize_start_handler assigned:      ",(typeof this.settings.upload_resize_start_handler==="function").toString(),"\n","\t","upload_start_handler assigned:      ",(typeof this.settings.upload_start_handler==="function").toString(),"\n","\t","upload_progress_handler assigned:   ",(typeof this.settings.upload_progress_handler==="function").toString(),"\n","\t","upload_error_handler assigned:      ",(typeof this.settings.upload_error_handler==="function").toString(),"\n","\t","upload_success_handler assigned:    ",(typeof this.settings.upload_success_handler==="function").toString(),"\n","\t","upload_complete_handler assigned:   ",(typeof this.settings.upload_complete_handler==="function").toString(),"\n","\t","debug_handler assigned:             ",(typeof this.settings.debug_handler==="function").toString(),"\n","Support:\n","\t","Load:                     ",(this.support.loading?"Yes":"No"),"\n","\t","Image Resize:             ",(this.support.imageResize?"Yes":"No"),"\n"].join(""));};SWFUpload.prototype.addSetting=function(b,c,a){if(c==undefined){return(this.settings[b]=a);}else{return(this.settings[b]=c);}};SWFUpload.prototype.getSetting=function(a){if(this.settings[a]!=undefined){return this.settings[a];}return"";};SWFUpload.prototype.callFlash=function(functionName,argumentArray){var movieElement,returnValue,returnString;argumentArray=argumentArray||[];movieElement=this.getMovieElement();try{if(movieElement!=undefined){returnString=movieElement.CallFunction('<invoke name="'+functionName+'" returntype="javascript">'+__flash__argumentsToXML(argumentArray,0)+"</invoke>");returnValue=eval(returnString);}else{this.debug("Can't call flash because the movie wasn't found.");}}catch(ex){this.debug("Exception calling flash function '"+functionName+"': "+ex.message);}if(returnValue!=undefined&&typeof returnValue.post==="object"){returnValue=this.unescapeFilePostParams(returnValue);}return returnValue;};SWFUpload.prototype.selectFile=function(){this.callFlash("SelectFile");};SWFUpload.prototype.selectFiles=function(){this.callFlash("SelectFiles");};SWFUpload.prototype.startUpload=function(a){this.callFlash("StartUpload",[a]);};SWFUpload.prototype.startResizedUpload=function(b,d,a,f,g,c){this.callFlash("StartUpload",[b,{width:d,height:a,encoding:f,quality:g,allowEnlarging:c}]);};SWFUpload.prototype.cancelUpload=function(a,b){if(b!==false){b=true;}this.callFlash("CancelUpload",[a,b]);};SWFUpload.prototype.stopUpload=function(){this.callFlash("StopUpload");};SWFUpload.prototype.requeueUpload=function(a){return this.callFlash("RequeueUpload",[a]);};SWFUpload.prototype.getStats=function(){return this.callFlash("GetStats");};SWFUpload.prototype.setStats=function(a){this.callFlash("SetStats",[a]);};SWFUpload.prototype.getFile=function(a){if(typeof(a)==="number"){return this.callFlash("GetFileByIndex",[a]);}else{return this.callFlash("GetFile",[a]);}};SWFUpload.prototype.getQueueFile=function(a){if(typeof(a)==="number"){return this.callFlash("GetFileByQueueIndex",[a]);}else{return this.callFlash("GetFile",[a]);}};SWFUpload.prototype.addFileParam=function(a,b,c){return this.callFlash("AddFileParam",[a,b,c]);};SWFUpload.prototype.removeFileParam=function(a,b){this.callFlash("RemoveFileParam",[a,b]);};SWFUpload.prototype.setUploadURL=function(a){this.settings.upload_url=a.toString();this.callFlash("SetUploadURL",[a]);};SWFUpload.prototype.setPostParams=function(a){this.settings.post_params=a;this.callFlash("SetPostParams",[a]);};SWFUpload.prototype.addPostParam=function(a,b){this.settings.post_params[a]=b;this.callFlash("SetPostParams",[this.settings.post_params]);};SWFUpload.prototype.removePostParam=function(a){delete this.settings.post_params[a];this.callFlash("SetPostParams",[this.settings.post_params]);};SWFUpload.prototype.setFileTypes=function(a,b){this.settings.file_types=a;this.settings.file_types_description=b;this.callFlash("SetFileTypes",[a,b]);};SWFUpload.prototype.setFileSizeLimit=function(a){this.settings.file_size_limit=a;this.callFlash("SetFileSizeLimit",[a]);};SWFUpload.prototype.setFileUploadLimit=function(a){this.settings.file_upload_limit=a;this.callFlash("SetFileUploadLimit",[a]);};SWFUpload.prototype.setFileQueueLimit=function(a){this.settings.file_queue_limit=a;this.callFlash("SetFileQueueLimit",[a]);};SWFUpload.prototype.setFilePostName=function(a){this.settings.file_post_name=a;this.callFlash("SetFilePostName",[a]);};SWFUpload.prototype.setUseQueryString=function(a){this.settings.use_query_string=a;this.callFlash("SetUseQueryString",[a]);};SWFUpload.prototype.setRequeueOnError=function(a){this.settings.requeue_on_error=a;this.callFlash("SetRequeueOnError",[a]);};SWFUpload.prototype.setHTTPSuccess=function(a){if(typeof a==="string"){a=a.replace(" ","").split(",");}this.settings.http_success=a;this.callFlash("SetHTTPSuccess",[a]);};SWFUpload.prototype.setAssumeSuccessTimeout=function(a){this.settings.assume_success_timeout=a;this.callFlash("SetAssumeSuccessTimeout",[a]);};SWFUpload.prototype.setDebugEnabled=function(a){this.settings.debug_enabled=a;this.callFlash("SetDebugEnabled",[a]);};SWFUpload.prototype.setButtonImageURL=function(a){if(a==undefined){a="";}this.settings.button_image_url=a;this.callFlash("SetButtonImageURL",[a]);};SWFUpload.prototype.setButtonDimensions=function(c,a){this.settings.button_width=c;this.settings.button_height=a;var b=this.getMovieElement();if(b!=undefined){b.style.width=c+"px";b.style.height=a+"px";}this.callFlash("SetButtonDimensions",[c,a]);};SWFUpload.prototype.setButtonText=function(a){this.settings.button_text=a;this.callFlash("SetButtonText",[a]);};SWFUpload.prototype.setButtonTextPadding=function(b,a){this.settings.button_text_top_padding=a;this.settings.button_text_left_padding=b;this.callFlash("SetButtonTextPadding",[b,a]);};SWFUpload.prototype.setButtonTextStyle=function(a){this.settings.button_text_style=a;this.callFlash("SetButtonTextStyle",[a]);};SWFUpload.prototype.setButtonDisabled=function(a){this.settings.button_disabled=a;this.callFlash("SetButtonDisabled",[a]);};SWFUpload.prototype.setButtonAction=function(a){this.settings.button_action=a;this.callFlash("SetButtonAction",[a]);};SWFUpload.prototype.setButtonCursor=function(a){this.settings.button_cursor=a;this.callFlash("SetButtonCursor",[a]);};SWFUpload.prototype.queueEvent=function(b,c){var a=this;if(c==undefined){c=[];}else{if(!(c instanceof Array)){c=[c];}}if(typeof this.settings[b]==="function"){this.eventQueue.push(function(){this.settings[b].apply(this,c);});setTimeout(function(){a.executeNextEvent();},0);}else{if(this.settings[b]!==null){throw"Event handler "+b+" is unknown or is not a function";}}};SWFUpload.prototype.executeNextEvent=function(){var a=this.eventQueue?this.eventQueue.shift():null;if(typeof(a)==="function"){a.apply(this);}};SWFUpload.prototype.unescapeFilePostParams=function(c){var f=/[$]([0-9a-f]{4})/i,g={},d,a,b;if(c!=undefined){for(a in c.post){if(c.post.hasOwnProperty(a)){d=a;while((b=f.exec(d))!==null){d=d.replace(b[0],String.fromCharCode(parseInt("0x"+b[1],16)));}g[d]=c.post[a];}}c.post=g;}return c;};SWFUpload.prototype.swfuploadPreload=function(){var a;if(typeof this.settings.swfupload_preload_handler==="function"){a=this.settings.swfupload_preload_handler.call(this);}else{if(this.settings.swfupload_preload_handler!=undefined){throw"upload_start_handler must be a function";}}if(a===undefined){a=true;}return !!a;};SWFUpload.prototype.flashReady=function(){var a=this.cleanUp();if(!a){this.debug("Flash called back ready but the flash movie can't be found.");return;}this.queueEvent("swfupload_loaded_handler");};SWFUpload.prototype.cleanUp=function(){var c,a=this.getMovieElement();try{if(a&&typeof(a.CallFunction)==="unknown"){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");for(c in a){try{if(typeof(a[c])==="function"){a[c]=null;}}catch(b){}}}}catch(d){}window.__flash__removeCallback=function(f,g){try{if(f){f[g]=null;}}catch(i){}};return a;};SWFUpload.prototype.mouseClick=function(){this.queueEvent("mouse_click_handler");};SWFUpload.prototype.mouseOver=function(){this.queueEvent("mouse_over_handler");};SWFUpload.prototype.mouseOut=function(){this.queueEvent("mouse_out_handler");};SWFUpload.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler");};SWFUpload.prototype.fileQueued=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("file_queued_handler",a);};SWFUpload.prototype.fileQueueError=function(a,c,b){a=this.unescapeFilePostParams(a);this.queueEvent("file_queue_error_handler",[a,c,b]);};SWFUpload.prototype.fileDialogComplete=function(b,c,a){this.queueEvent("file_dialog_complete_handler",[b,c,a]);};SWFUpload.prototype.uploadResizeStart=function(b,a){b=this.unescapeFilePostParams(b);this.queueEvent("upload_resize_start_handler",[b,a.width,a.height,a.encoding,a.quality]);};SWFUpload.prototype.uploadStart=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("return_upload_start_handler",a);};SWFUpload.prototype.returnUploadStart=function(a){var b;if(typeof this.settings.upload_start_handler==="function"){a=this.unescapeFilePostParams(a);b=this.settings.upload_start_handler.call(this,a);}else{if(this.settings.upload_start_handler!=undefined){throw"upload_start_handler must be a function";}}if(b===undefined){b=true;}b=!!b;this.callFlash("ReturnUploadStart",[b]);};SWFUpload.prototype.uploadProgress=function(a,c,b){a=this.unescapeFilePostParams(a);this.queueEvent("upload_progress_handler",[a,c,b]);};SWFUpload.prototype.uploadError=function(a,c,b){a=this.unescapeFilePostParams(a);this.queueEvent("upload_error_handler",[a,c,b]);};SWFUpload.prototype.uploadSuccess=function(b,a,c){b=this.unescapeFilePostParams(b);this.queueEvent("upload_success_handler",[b,a,c]);};SWFUpload.prototype.uploadComplete=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("upload_complete_handler",a);};SWFUpload.prototype.debug=function(a){this.queueEvent("debug_handler",a);};SWFUpload.prototype.debugMessage=function(c){var a,d,b;if(this.settings.debug){d=[];if(typeof c==="object"&&typeof c.name==="string"&&typeof c.message==="string"){for(b in c){if(c.hasOwnProperty(b)){d.push(b+": "+c[b]);}}a=d.join("\n")||"";d=a.split("\n");a="EXCEPTION: "+d.join("\nEXCEPTION: ");SWFUpload.Console.writeLine(a);}else{SWFUpload.Console.writeLine(c);}}};SWFUpload.Console={};SWFUpload.Console.writeLine=function(d){var b,a;try{b=document.getElementById("SWFUpload_Console");if(!b){a=document.createElement("form");document.getElementsByTagName("body")[0].appendChild(a);b=document.createElement("textarea");b.id="SWFUpload_Console";b.style.fontFamily="monospace";b.setAttribute("wrap","off");b.wrap="off";b.style.overflow="auto";b.style.width="700px";b.style.height="350px";b.style.margin="5px";a.appendChild(b);}b.value+=d+"\n";b.scrollTop=b.scrollHeight-b.clientHeight;}catch(c){alert("Exception: "+c.name+" Message: "+c.message);}};swfobject=function(){var aq="undefined",aD="object",ab="Shockwave Flash",X="ShockwaveFlash.ShockwaveFlash",aE="application/x-shockwave-flash",ac="SWFObjectExprInst",ax="onreadystatechange",af=window,aL=document,aB=navigator,aa=false,Z=[aN],aG=[],ag=[],al=[],aJ,ad,ap,at,ak=false,aU=false,aH,an,aI=true,ah=function(){var a=typeof aL.getElementById!=aq&&typeof aL.getElementsByTagName!=aq&&typeof aL.createElement!=aq,f=aB.userAgent.toLowerCase(),c=aB.platform.toLowerCase(),j=c?/win/.test(c):/win/.test(f),l=c?/mac/.test(c):/mac/.test(f),i=/webkit/.test(f)?parseFloat(f.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,d=!+"\v1",g=[0,0,0],m=null;if(typeof aB.plugins!=aq&&typeof aB.plugins[ab]==aD){m=aB.plugins[ab].description;if(m&&!(typeof aB.mimeTypes!=aq&&aB.mimeTypes[aE]&&!aB.mimeTypes[aE].enabledPlugin)){aa=true;d=false;m=m.replace(/^.*\s+(\S+\s+\S+$)/,"$1");g[0]=parseInt(m.replace(/^(.*)\..*$/,"$1"),10);g[1]=parseInt(m.replace(/^.*\.(.*)\s.*$/,"$1"),10);g[2]=/[a-zA-Z]/.test(m)?parseInt(m.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0;}}else{if(typeof af.ActiveXObject!=aq){try{var k=new ActiveXObject(X);if(k){m=k.GetVariable("$version");if(m){d=true;m=m.split(" ")[1].split(",");g=[parseInt(m[0],10),parseInt(m[1],10),parseInt(m[2],10)];}}}catch(b){}}}return{w3:a,pv:g,wk:i,ie:d,win:j,mac:l};}(),aK=function(){if(!ah.w3){return;}if((typeof aL.readyState!=aq&&aL.readyState=="complete")||(typeof aL.readyState==aq&&(aL.getElementsByTagName("body")[0]||aL.body))){aP();}if(!ak){if(typeof aL.addEventListener!=aq){aL.addEventListener("DOMContentLoaded",aP,false);}if(ah.ie&&ah.win){aL.attachEvent(ax,function(){if(aL.readyState=="complete"){aL.detachEvent(ax,arguments.callee);aP();}});if(af==top){(function(){if(ak){return;}try{aL.documentElement.doScroll("left");}catch(a){setTimeout(arguments.callee,0);return;}aP();})();}}if(ah.wk){(function(){if(ak){return;}if(!/loaded|complete/.test(aL.readyState)){setTimeout(arguments.callee,0);return;}aP();})();}aC(aP);}}();function aP(){if(ak){return;}try{var b=aL.getElementsByTagName("body")[0].appendChild(ar("span"));b.parentNode.removeChild(b);}catch(a){return;}ak=true;var d=Z.length;for(var c=0;c<d;c++){Z[c]();}}function aj(a){if(ak){a();}else{Z[Z.length]=a;}}function aC(a){if(typeof af.addEventListener!=aq){af.addEventListener("load",a,false);}else{if(typeof aL.addEventListener!=aq){aL.addEventListener("load",a,false);}else{if(typeof af.attachEvent!=aq){aM(af,"onload",a);}else{if(typeof af.onload=="function"){var b=af.onload;af.onload=function(){b();a();};}else{af.onload=a;}}}}}function aN(){if(aa){Y();}else{am();}}function Y(){var d=aL.getElementsByTagName("body")[0];var b=ar(aD);b.setAttribute("type",aE);var a=d.appendChild(b);if(a){var c=0;(function(){if(typeof a.GetVariable!=aq){var f=a.GetVariable("$version");if(f){f=f.split(" ")[1].split(",");ah.pv=[parseInt(f[0],10),parseInt(f[1],10),parseInt(f[2],10)];}}else{if(c<10){c++;setTimeout(arguments.callee,10);return;}}d.removeChild(b);a=null;am();})();}else{am();}}function am(){var i=aG.length;if(i>0){for(var j=0;j<i;j++){var c=aG[j].id;var n=aG[j].callbackFn;var a={success:false,id:c};if(ah.pv[0]>0){var k=aS(c);if(k){if(ao(aG[j].swfVersion)&&!(ah.wk&&ah.wk<312)){ay(c,true);if(n){a.success=true;a.ref=av(c);n(a);}}else{if(aG[j].expressInstall&&au()){var f={};f.data=aG[j].expressInstall;f.width=k.getAttribute("width")||"0";f.height=k.getAttribute("height")||"0";if(k.getAttribute("class")){f.styleclass=k.getAttribute("class");}if(k.getAttribute("align")){f.align=k.getAttribute("align");}var g={};var d=k.getElementsByTagName("param");var m=d.length;for(var l=0;l<m;l++){if(d[l].getAttribute("name").toLowerCase()!="movie"){g[d[l].getAttribute("name")]=d[l].getAttribute("value");}}ae(f,g,c,n);}else{aF(k);if(n){n(a);}}}}}else{ay(c,true);if(n){var b=av(c);if(b&&typeof b.SetVariable!=aq){a.success=true;a.ref=b;}n(a);}}}}}function av(b){var d=null;var c=aS(b);if(c&&c.nodeName=="OBJECT"){if(typeof c.SetVariable!=aq){d=c;}else{var a=c.getElementsByTagName(aD)[0];if(a){d=a;}}}return d;}function au(){return !aU&&ao("6.0.65")&&(ah.win||ah.mac)&&!(ah.wk&&ah.wk<312);}function ae(g,d,j,f){aU=true;ap=f||null;at={success:false,id:j};var a=aS(j);if(a){if(a.nodeName=="OBJECT"){aJ=aO(a);ad=null;}else{aJ=a;ad=j;}g.id=ac;if(typeof g.width==aq||(!/%$/.test(g.width)&&parseInt(g.width,10)<310)){g.width="310";}if(typeof g.height==aq||(!/%$/.test(g.height)&&parseInt(g.height,10)<137)){g.height="137";}aL.title=aL.title.slice(0,47)+" - Flash Player Installation";var b=ah.ie&&ah.win?"ActiveX":"PlugIn",c="MMredirectURL="+af.location.toString().replace(/&/g,"%26")+"&MMplayerType="+b+"&MMdoctitle="+aL.title;if(typeof d.flashvars!=aq){d.flashvars+="&"+c;}else{d.flashvars=c;}if(ah.ie&&ah.win&&a.readyState!=4){var i=ar("div");j+="SWFObjectNew";i.setAttribute("id",j);a.parentNode.insertBefore(i,a);a.style.display="none";(function(){if(a.readyState==4){a.parentNode.removeChild(a);}else{setTimeout(arguments.callee,10);}})();}aA(g,d,j);}}function aF(a){if(ah.ie&&ah.win&&a.readyState!=4){var b=ar("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(aO(a),b);a.style.display="none";(function(){if(a.readyState==4){a.parentNode.removeChild(a);}else{setTimeout(arguments.callee,10);}})();}else{a.parentNode.replaceChild(aO(a),a);}}function aO(b){var d=ar("div");if(ah.win&&ah.ie){d.innerHTML=b.innerHTML;}else{var f=b.getElementsByTagName(aD)[0];if(f){var a=f.childNodes;if(a){var g=a.length;for(var c=0;c<g;c++){if(!(a[c].nodeType==1&&a[c].nodeName=="PARAM")&&!(a[c].nodeType==8)){d.appendChild(a[c].cloneNode(true));}}}}}return d;}function aA(f,i,c){var d,a=aS(c);if(ah.wk&&ah.wk<312){return d;}if(a){if(typeof f.id==aq){f.id=c;}if(ah.ie&&ah.win){var g="";for(var k in f){if(f[k]!=Object.prototype[k]){if(k.toLowerCase()=="data"){i.movie=f[k];}else{if(k.toLowerCase()=="styleclass"){g+=' class="'+f[k]+'"';}else{if(k.toLowerCase()!="classid"){g+=" "+k+'="'+f[k]+'"';}}}}}var j="";for(var l in i){if(i[l]!=Object.prototype[l]){j+='<param name="'+l+'" value="'+i[l]+'" />';}}a.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+g+">"+j+"</object>";ag[ag.length]=f.id;d=aS(f.id);}else{var b=ar(aD);b.setAttribute("type",aE);for(var m in f){if(f[m]!=Object.prototype[m]){if(m.toLowerCase()=="styleclass"){b.setAttribute("class",f[m]);}else{if(m.toLowerCase()!="classid"){b.setAttribute(m,f[m]);}}}}for(var n in i){if(i[n]!=Object.prototype[n]&&n.toLowerCase()!="movie"){aQ(b,n,i[n]);}}a.parentNode.replaceChild(b,a);d=b;}}return d;}function aQ(b,d,c){var a=ar("param");a.setAttribute("name",d);a.setAttribute("value",c);b.appendChild(a);}function aw(a){var b=aS(a);if(b&&b.nodeName=="OBJECT"){if(ah.ie&&ah.win){b.style.display="none";(function(){if(b.readyState==4){aT(a);}else{setTimeout(arguments.callee,10);}})();}else{b.parentNode.removeChild(b);}}}function aT(a){var b=aS(a);if(b){for(var c in b){if(typeof b[c]=="function"){b[c]=null;}}b.parentNode.removeChild(b);}}function aS(a){var c=null;try{c=aL.getElementById(a);}catch(b){}return c;}function ar(a){return aL.createElement(a);}function aM(a,c,b){a.attachEvent(c,b);al[al.length]=[a,c,b];}function ao(a){var b=ah.pv,c=a.split(".");c[0]=parseInt(c[0],10);c[1]=parseInt(c[1],10)||0;c[2]=parseInt(c[2],10)||0;return(b[0]>c[0]||(b[0]==c[0]&&b[1]>c[1])||(b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]))?true:false;}function az(b,g,a,c){if(ah.ie&&ah.mac){return;}var f=aL.getElementsByTagName("head")[0];if(!f){return;}var i=(a&&typeof a=="string")?a:"screen";if(c){aH=null;an=null;}if(!aH||an!=i){var d=ar("style");d.setAttribute("type","text/css");d.setAttribute("media",i);aH=f.appendChild(d);if(ah.ie&&ah.win&&typeof aL.styleSheets!=aq&&aL.styleSheets.length>0){aH=aL.styleSheets[aL.styleSheets.length-1];}an=i;}if(ah.ie&&ah.win){if(aH&&typeof aH.addRule==aD){aH.addRule(b,g);}}else{if(aH&&typeof aL.createTextNode!=aq){aH.appendChild(aL.createTextNode(b+" {"+g+"}"));}}}function ay(a,c){if(!aI){return;}var b=c?"visible":"hidden";if(ak&&aS(a)){aS(a).style.visibility=b;}else{az("#"+a,"visibility:"+b);}}function ai(b){var a=/[\\\"<>\.;]/;var c=a.exec(b)!=null;return c&&typeof encodeURIComponent!=aq?encodeURIComponent(b):b;}var aR=function(){if(ah.ie&&ah.win){window.attachEvent("onunload",function(){var a=al.length;for(var b=0;b<a;b++){al[b][0].detachEvent(al[b][1],al[b][2]);}var d=ag.length;for(var c=0;c<d;c++){aw(ag[c]);}for(var f in ah){ah[f]=null;}ah=null;for(var g in swfobject){swfobject[g]=null;}swfobject=null;});}}();return{registerObject:function(a,f,c,b){if(ah.w3&&a&&f){var d={};d.id=a;d.swfVersion=f;d.expressInstall=c;d.callbackFn=b;aG[aG.length]=d;ay(a,false);}else{if(b){b({success:false,id:a});}}},getObjectById:function(a){if(ah.w3){return av(a);}},embedSWF:function(m,f,j,g,c,a,b,k,i,l){var d={success:false,id:f};if(ah.w3&&!(ah.wk&&ah.wk<312)&&m&&f&&j&&g&&c){ay(f,false);aj(function(){j+="";g+="";var t={};if(i&&typeof i===aD){for(var r in i){t[r]=i[r];}}t.data=m;t.width=j;t.height=g;var q={};if(k&&typeof k===aD){for(var s in k){q[s]=k[s];}}if(b&&typeof b===aD){for(var n in b){if(typeof q.flashvars!=aq){q.flashvars+="&"+n+"="+b[n];}else{q.flashvars=n+"="+b[n];}}}if(ao(c)){var p=aA(t,q,f);if(t.id==f){ay(f,true);}d.success=true;d.ref=p;}else{if(a&&au()){t.data=a;ae(t,q,f,l);return;}else{ay(f,true);}}if(l){l(d);}});}else{if(l){l(d);}}},switchOffAutoHideShow:function(){aI=false;},ua:ah,getFlashPlayerVersion:function(){return{major:ah.pv[0],minor:ah.pv[1],release:ah.pv[2]};},hasFlashPlayerVersion:ao,createSWF:function(a,b,c){if(ah.w3){return aA(a,b,c);}else{return undefined;}},showExpressInstall:function(b,a,d,c){if(ah.w3&&au()){ae(b,a,d,c);}},removeSWF:function(a){if(ah.w3){aw(a);}},createCSS:function(b,a,c,d){if(ah.w3){az(b,a,c,d);}},addDomLoadEvent:aj,addLoadEvent:aC,getQueryParamValue:function(b){var a=aL.location.search||aL.location.hash;if(a){if(/\?/.test(a)){a=a.split("?")[1];}if(b==null){return ai(a);}var c=a.split("&");for(var d=0;d<c.length;d++){if(c[d].substring(0,c[d].indexOf("="))==b){return ai(c[d].substring((c[d].indexOf("=")+1)));}}}return"";},expressInstallCallback:function(){if(aU){var a=aS(ac);if(a&&aJ){a.parentNode.replaceChild(aJ,a);if(ad){ay(ad,true);if(ah.ie&&ah.win){aJ.style.display="block";}}if(ap){ap(at);}}aU=false;}}};}();swfobject.addDomLoadEvent(function(){if(typeof(SWFUpload.onload)==="function"){SWFUpload.onload.call(window);}});
/*! File: waterfall.js | Build: 2012-09-22-14:33:27 | Revision: 46060 */
(function(){var n=BB.NodeH,l=BB.EventTargetH,b=BB.ArrayH,g=BB.ObjectH;DU=BB.DomU;g.isString=function(){return g.getType()=="string";};var m=function(s){var r=this;this.load=s.load;this.columns=s.columns;this.diff=s.diff||50;if(this.load){if(s.noScroll){c.call(this);}else{this.loadFirst=s.loadFirst||null;this.__onScroll=f(c,50,this);l.on(window,"scroll",this.__onScroll);c.call(this);}}};m.prototype.destroy=function(){if(!!this.__onScroll){l.un(window,"scroll",this.__onScroll);}};m.prototype.reinit=function(s,t){var r=this;r.destroy();r.load=s.load||r.load;r.diff=s.diff||r.diff;r.__loading=0;if(s.noScroll){c.call(r);}else{r.loadFirst=s.loadFirst||r.loadFirst;r.__onScroll=r.__onScroll||f(c,50,this);l.on(window,"scroll",r.__onScroll);c.call(r);}};m.prototype.prepend=function(s,t){var r=this;r._adder=j(s,a,r,function(){r._adder=0;t&&t.call(r);});return r._adder;};function q(r,s){this._adder=j(r,p,this,function(){this._adder=0;s&&s.call(this);});return this._adder;}function c(){if(this.__loading){return;}var u=Number.MAX_VALUE;for(var t=0,s=this.columns.length;t<s;t++){var v=n.getSize(this.columns[t]).height;if(v<u){u=v;}}var r=DU.getDocRect();if(this.diff+r.scrollY+r.height>u){k.call(this);}}function k(){var s=this;this.__loading=1;if(this.loadFirst){this.loadFirst(t,r);this.loadFirst=null;}else{this.load(t,r);}function t(u,v){s.__loading=0;q.call(s,u,v);}function r(){l.un(window,"scroll",s.__onScroll);}}function a(r){n.insertAdjacentElement(this.columns[1],"afterbegin",r);return r;}function p(x){var u=x,r=0,t=Number.MAX_VALUE;for(var s=0;s<this.columns.length;s++){var v=n.getSize(this.columns[s]).height;if(v<t){t=v;r=s;}}n.appendChild(this.columns[r],u);return u;}function f(t,r,s){r=r||150;if(r===-1){return(function(){t.apply(s||this,arguments);});}var v=null;function u(){u.stop();v=i(t,r,false,s||this);}u.stop=function(){if(v){v.cancel();v=0;}};return u;}function i(C,B,x,t,v){B=B||0;var u=C,A=v==null||v==undefined?[]:b.toArray(v),z,s;if(g.isString(C)){u=t[C];}if(!u){throw"method undefined";}z=function(){u.apply(t,A);};s=(x)?setInterval(z,B):setTimeout(z,B);return{id:s,interval:x,cancel:function(){if(this.interval){clearInterval(s);}else{clearTimeout(s);}}};}function j(s,v,t,z){var r=s==null||s==undefined?[]:b.toArray(s),u={},x;if(r.length>0){x=setTimeout(function(){var B=+new Date();do{var A=r.shift();v.call(t,A);}while(r.length>0&&(+new Date()-B<50));if(r.length>0){x=setTimeout(arguments.callee,25);}else{z&&z.call(t,s);}},25);}else{z&&i(z,0,false,t,[s]);}u.stop=function(){if(x){clearTimeout(x);r=[];}};return u;}function d(r){console.log(r);}BB.provide({WaterFall:m});})();
/*! File: share.js | Build: 2012-09-22-14:33:28 | Revision: 46060 */
(function(){var l=document,q=ObjectH.mix,i=ObjectH.flatCopy,s=window.screen,g,j,p=false,r=true,n=function(v){var u=[];for(var t in v){u[u.length]=encodeURIComponent(t)+"="+encodeURIComponent(v[t]);}return u.join("&").replace(/%20/g,"+");},f=function(t){return Object.prototype.toString.call(t)=="[object Function]";},d={url:l.location.href,title:l.title,content:"",comment:"",pic:"",bdshare:false},c={},m={},k={tsina:{queryString:{appkey:"1815716769"},setting:["tsina",{},"http://v.t.sina.com.cn/share/share.php",620,450,"",true],transformParam:{content:"title"}},renren:{queryString:{r:1},setting:["renren",{},"http://widget.renren.com/dialog/share",700,650,"",true],transformParam:{url:"resourceUrl",content:"description"}},douban:{queryString:{r:1,v:1},setting:["douban",{},"http://www.douban.com/recommend/",450,330],transformParam:{content:"comment",pic:""}},tqq:{queryString:{appkey:"801102900",site:"http://www.leho.com/",assname:"ilehoileho"},setting:["tqq",{},"http://v.t.qq.com/share/share.php",700,680,"",true],transformParam:{content:"title"}},kaixin001:{queryString:{site:l.location.href,r:1},setting:["kaixin001",{},"http://www.kaixin001.com/repaste/bshare.php",570,420],transformParam:{content:"rcontent",url:"rurl",title:"rtitle",pic:""}},itieba:{queryString:{},setting:["itieba",{},"http://tieba.baidu.com/i/app/open_share_api",626,436],transformParam:{url:"link",pic:"",title:"",content:""}},hi:{queryString:{},setting:["hi",{},"http://apps.hi.baidu.com/share/",820,550],transformParam:{pic:""}},t163:{queryString:{},setting:["t163",{},"http://t.163.com/article/user/checkLogin.do",550,330,"",true],transformParam:{url:"link",title:"source",content:"info"}},tsohu:{queryString:{},setting:["tsohu",{},"http://t.sohu.com/third/post.jsp",660,470,"",true],transformParam:{content:"title"},needEncode:{content:"utf-8"}},taojianghu:{queryString:{tracelog:""},setting:["taojianghu",{},"http://share.jianghu.taobao.com/share/addShare.htm",550,400],transformParam:{pic:""}},baishehui:{queryString:{from:""},setting:["baishehui",{},"http://bai.sohu.com/share/blank/addbutton.do",480,340],transformParam:{url:"link",pic:""}},qzone:{queryString:{site:""},setting:["qzone",{},"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey",900,760,"",true],transformParam:{content:"summary",comment:"desc",pic:"pics"}},qfriend:{queryString:{},setting:["qfriend",{},"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?to=pengyou",900,760]},copyurl:{queryString:{inputId:"url_copy_value",dialogId:"panel_copy_url"},setting:["copyurl",{},"",0,0],transformParam:{url:function(x){var v=x.url,u=x.inputId,t=x.dialogId;if(!g){g=new Dialog($(t));window.copySuccess=function(){MessageBox.alert({caption:"",content:"",icon:MB_ICON.SUCCESS,buttons:[{key:"OK",text:"",retVal:1}],focusButton:MB_BUTTON.OK,onclose:function(){g.hide();}});};window.getClipText=function(){return clip_text;};}g.show();if(j===v){return;}$(u).value=window.clip_text=j=v;}}},email:{queryString:{inputId:"url_copy_value",dialogId:"panel_copy_url",flashId:"copyFla"},setting:["email",{},"mailto:?",800,700],transformParam:{content:"body",title:"subject",pic:""}}};ShareSite={gParam:function(t){if(!t){return d;}q(d,t,true);},gGroupParam:function(t,u){if(typeof t=="string"){t=(t||"").split(" ");t.forEach(function(v){c[v]=u;});}},pClassParam:function(t,u){if(!u){return k[t];}t=(t||"").split(" ");t.forEach(function(v){q(k[v]["queryString"],u,true);});},pParam:function(t,u){if(typeof t=="string"){t=(t||"").split(" ");t.forEach(function(v){m[v]=u;});}},pClassSetup:function(u,t){k[u][setting]=t;},getPriateSet:function(){return k;},isOpenWindow:function(t){p=t;},publicHandle:function(C,B,u,K,G,v,M){var E={},I=this.id,N=u,P=k[C]||{},x=P.transformParam,L=P.needEncode,J=i(P.queryString||{}),H=W(this).parentNode(".share-container").getAttr("id")||"",A=c[H];if(d.bdshare&&b(C,d)){return;}if(p||M){var t=(s.width-K)/2,F=(s.height-G)/2,v=v||("width="+K+", height="+G+", top="+F+", left="+t+", toolbar=no, menubar=no, scrollbars=no, location=yes, resizable=yes, status=no");}J=q(i(d),J,true);if(A){J=q(J,A,true);}E=q(J,B,true);if(I){E=q(E,m[I]||{},true);}if(/^[^:]*?\./i.test(E.url)){E.url="http://"+E.url;}if(x){for(var O in x){var D=E[O],z=x[O];if(f(z)){return z(E);}if(D){if(z){E[z]=D;}delete E[O];}}}if(L){for(var O in L){E[O]=L[O];}}u+=(/\?/.test(u)?"&":"?")+n(E);if(!((M||p)&&window.open(u,"",v))){this.target="_blank";this.href=u;}},custBindEventHooks:null};var b=(function(){var v=null,t="";if(!r){return function(){return false;};}var u=function(x,A){bds_config={};var z={tsina:k.tsina.queryString.appkey,tqq:k.tqq.queryString.appkey};switch(x){case"qzone":bds_config.bdText=A.title;bds_config.bdDesc=A.comment;bds_config.bdComment=A.content;break;case"renren":bds_config.bdText=A.title;bds_config.bdDesc=A.content;break;default:bds_config.bdText=A.content;}bds_config.bdPic=A.pic;bds_config.bdUrl=A.url;bds_config.snsKey=z;bds_config.searchPic=A.pic.length>0?1:0;$("bdshare_l").setAttribute("data","{'url':'"+A.url+"'}");return bds_config;};Dom.ready(function(){if(W("#bdshell_js").length==0){var z=document.getElementsByTagName("body")[0],A=document.createElement("script"),D=document.createElement("script");A.id="bdshare_js";if(A.attachEvent){var C='<div id="bdshare" class="bdshare_t bds_tools" style="display:none!important"><span class="bds_more"></span></div>';W("body").insertAdjacentHTML("beforeend",C);var x=function(){W("#bdshare_s").removeNode();};A.setAttribute("data","type=tools&uid=599962");}else{var B="<style>#bdshare {display:none!important;}</style>";W("head").insertAdjacentHTML("beforeend",B);A.setAttribute("data","type=slide&uid=599962");}D.src="http://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion="+new Date().getHours();z.appendChild(A);z.appendChild(D);}else{bds_config=bds_config||{};v=i(bds_config);var E=$("bdshare_l");if(!E||!E.getAttribute("data")){b=function(){return false;};return;}else{t=E.getAttribute("data");}}b=function(F,G){if(F=="tsina"||F=="tqq"||F=="qzone"||F=="renren"||F=="douban"||F=="kaixin001"||F=="hi"||F=="tsohu"){}else{if(F=="itieba"){F="tieba";}else{if(F=="qfriend"){F="tqf";}else{return false;}}}try{typeof x=="function"&&x();u(F,G);bdShare.fn.init();W(".bds_"+F+":first-child").fire("mouseover").click();if(v||t){bds_config=i(v);$("bdshare_l").setAttribute("data",t);bdShare.fn.init();}}catch(H){return false;}return true;};});return function(){alert("...");return true;};})();var a=function(){W(".share-container").on("click",function(z){var x=z.target,v=x.className;for(var t in k){if(v.indexOf("shareto-button-"+t)>-1){var u=k[t];ShareSite.publicHandle.apply(x,u.setting);z.stopPropagation();}}});};Dom.ready(function(){(ShareSite.custBindEventHooks||a)(k);});})();
/*! File: cross_msg.js | Build: 2012-09-22-14:33:26 | Revision: 46060 */
(function(){var c=0,i,g;var b=function(l,k,j){if(l.attachEvent){l[k+j]=function(){return j.call(l,event);};l.attachEvent("on"+k,l[k+j]);}else{l.addEventListener(k,j,false);}return j;};var f=function(){if(window.postMessage){b(window,"message",a);}else{d(window,"name");}};var d=function(j,n){var m="";function k(p){var q=p.split("^").pop().split("&");return{domain:q[0],data:window.unescape(q[1])};}function l(){var p=j[n];if(p!=m){m=p;a(k(p));}}i=setInterval(l,1000/20);};var a=function(k){k=k||window.event;var l=unescape(k.data);var j=BB.StringH.queryUrl(l);g&&g(j);};f();window.CrossMsg={};CrossMsg.sendMessage=function(l,j){if(!l){return;}if(typeof l!="object"){return;}var k=BB.ObjectH.encodeURIJson(j);k=escape(k);if(window.postMessage){l.postMessage(k,"*");}else{l.name=(new Date()).getTime()+(c++)+"^"+document.domain+"&"+window.escape(k);}};CrossMsg.receiveMessage=function(j){g=j;};})();
/*! File: user.js | Build: 2012-09-22-14:33:26 | Revision: 46060 */
var User=function(){if(!window.__CONF__){window.__CONF__={img_url:"http://img.youa.com",man_head_img:"d96a3fdeaf68d3e8db170ad5",woman_head_img:"43e2e6f41e3b3ebe22aa6560",subject_img:"726a17bd880cff1fb375718c",place_img:"6ea1ff46aab3a42c975dd7ab",x_sns_path_prefix:"/sns",index_site_url:"http://www.leho.com",res_site_url:"http://st.youa.com/resource",sns_site_url:"http://i.leho.com",base_site_url:"http://s.leho.com",discover_site_url:"http://discover.leho.com",mall_site_url:"http://youa.baidu.com",psp_site_url:"https://passport.leho.com",mobile_site_url:"http://m.leho.com",search_site_url:"http://search.leho.com",top_site_url:"http://top.leho.com",lehozhi_site_url:"http://z.leho.com",tiaozhuan_site_url:"http://tiaozhuan.leho.com",g_site_url:"http://g.leho.com",guang_site_url:"http://guang.leho.com"};}var k=BB.ObjectH,n=BB.CustEvent,d=BB.StringH,p=BB.EventH,g=BB.EventTargetH,f=BB.getScript,s=BB.Env,j=BB.NodeH.$;var r="http://i.leho.com";var c={SINA:r+"/psp/login/third/sina",QQ:r+"/psp/login/third/qq",RENREN:r+"/psp/login/third/renren",BAIDU:r+"/psp/login/third/baidu"};var q=function(){this.data=null;this.view=null;this.ref=null;this._handles={};this._init.apply(this,arguments);this.logoutUrl="";};k.mix(q.prototype,{_init:function(t){k.mix(this,t,true);},logout:function(){location.href=this.logoutUrl;},login:function(u,t){t=t||{};this.data.complete(function(v){if(v.isLogin&&!t.otherLogin){u&&u(v);}else{var x={};k.mix(x,t,true);l.renderLogin(x);l.onlogin=function(){if(x.loginOk){User.Data._complete=false;x.loginOk();}else{if(/^http:\/\/www.leho.com/.exec(location.href)!=null){location.href="http://i.leho.com";}else{location.reload();}}};}});},crossMsgCallback:function(t){if(t.isLogin){l.panel.hide();l.fire(b.EVENTS.login);}}});var b=function(){this.panel=null;this.data=null;this._init.apply(this,arguments);};b.EVENTS={login:"login",afterloginrender:"afterloginrender"};k.mix(b.prototype,{_init:function(t){var v=[];for(var u in b.EVENTS){v.push(u);}n.createEvents(this,v);k.mix(this,t,true);},renderLogin:function(u){var t=this;u=u||{};this._initPanel();this.panel.show();},_initPanel:function(){if(!this.panel){this.panel=new Dialog({className:"panel-t1 panel-login-new",width:540,center:true,footer:true,draggable:false,useIframe:true});var u=a.ref?"?ref="+a.ref:"";this.panel.setCaption("");this.panel.setContent('<iframe src="'+__CONF__.psp_site_url+"/psp/mini/login"+u+'" class="userLoginIframe" scrolling="auto" frameborder="0" width="540" height="370"></iframe>');}var t=s.ie&&s.ie6;this.panel.setStyle("position",t?"absolute":"fixed");}});var m=function(){k.mix(this,{_complete:false,_loading:false,_handlers:[],_data:{isLogin:false}});this._init.apply(this,arguments);};k.mix(m.prototype,{siteUrl:r+"/data/sns_topbar?t="+new Date().getTime(),_init:function(t){n.createEvents(this,"change");k.mix(this,t,true);},_boolean:function(t){return t==0?false:true;},_callBack:function(){var t=this;if(t._loading){return;}t._loading=true;t._complete=false;f(this.siteUrl,null,{charset:"gb2312"});},_process:function(z){var t=this;t._loading=false;t._complete=true;t._data.isLogin=t._boolean(z.data.is_login);if(t._data.isLogin){t._data.loginName=z.data.uname;t._data.uid=z.data.uid;t._data.head_imid=z.data.__snsUser__.head_imid;}for(var x=0,v=this._handlers.length;x<v;x++){this._dispatch(this._handlers[x]);}this._handlers=[];var u=new n(this,"change");u.info={isLogin:this._data.isLogin,loginName:this._data.loginName,uid:this._data.uid,head_imid:this._data.head_imid};this.fire(u);},_dispatch:function(t){t.call(null,{isLogin:this._data.isLogin,loginName:this._data.loginName,uid:this._data.uid,head_imid:this._data.head_imid});},complete:function(t){if(this._complete){this._dispatch(t);}else{this._handlers.push(t);this._callBack();}},updata:function(){this.clear();this._callBack();},clear:function(){this._complete=false;}});var i=new m,l=new b({data:i}),a=new q({data:i,view:l});CrossMsg.receiveMessage(a.crossMsgCallback);return{Data:i,View:l,Power:a};}();
/*! File: pageScroll.js | Build: 2012-09-22-14:33:26 | Revision: 46060 */
(function(){var a=BB.NodeW;var b=function(){this.initialize.apply(this,arguments);};b.prototype=(function(){var d,l,f,s,q,j,g;var k=200;var n=function(){var v,t,u=$$(f.doc);!!u&&(v=u.getRect().right+f.elementOffsetLeft);t=Dom.getDocRect().width-d.getRect().width-f.elementOffsetRight;isNaN(v)?v=t:v=Math.min(v,t);d.css("left",v+"px");q=null;};var r=function(){var t=Dom.getDocRect().scrollY;if(t<f.showOffsetTop){if(BB.Env.ie6){d.show();l.hide();}else{l.fadeOut(k,function(){l.hide();});}}else{if(BB.Env.ie6){d.show();l.show();}else{l.show();l.fadeIn(k);}}s=null;};var p=function(){if(q){clearTimeout(q);}q=setTimeout(n,k);};var c=function(){if(s){clearTimeout(s);}else{BB.Env.ie6&&d.hide();}s=setTimeout(r,k);};var i=function(v,t){var u=0;if(ObjectH.isPlainObject(t)){if(Dom.isElement(t.offset)){u=a(u).getRect().height;}else{u=t.offset|0;}t=t.callback;}v=v||f.top;if(Dom.isElement(v)){v=a(v).getRect().top;}v=Math.max(v-u,0);if(BB.Env.ie6||f.dur<=0){g.scrollTop=v;t&&typeof(t)=="function"&&t();}else{if(j){j.un("suspend");if(j.isPlay()){return;}}j=new ScrollAnim(g,{scrollTop:{to:v}},f.dur,f.easing);t&&typeof(t)=="function"&&j.on("suspend",t);j.play();}};var m=function(){var u=document.documentElement,t=document.documentElement.scrollTop++;if(t==document.documentElement.scrollTop){document.documentElement.scrollTop--;if(t==document.documentElement.scrollTop){u=document.body;}}return u;};return{initialize:function(){f={dur:1000,top:0,doc:"bd",easing:Anim.Easing.easeBothStrong,showOffsetTop:125,elementOffsetLeft:20,elementOffsetRight:10,elementOffsetBottom:10};g=m();if(Dom.isElement(arguments[0])){this.element=arguments[0];f=BB.ObjectH.mix(f,arguments[1],true);}else{if(typeof(arguments[0])=="string"){this.element=Dom.create(arguments[0]);this.element.style.visibility="hidden";a("body").appendChild(this.element);f=BB.ObjectH.mix(f,arguments[1],true);}else{this.element=Dom.create('<div class="fix-block-r"><a class="back-top" href="javascript:;"></a></div>');this.element.style.visibility="hidden";a("body").appendChild(this.element);var t=arguments[0];if(!ObjectH.isPlainObject(t)&&ObjectH.isPlainObject(arguments[1])){t=arguments[1];}f=BB.ObjectH.mix(f,t,true);}}this.ops=f;this.render(this.element);},render:function(t){d=a(t);l=d.query(".back-top");d.css("bottom",f.elementOffsetBottom+"px");l.on("click",function(u){u.preventDefault;i(f.top);});Dom.on(window,"resize",p);Dom.on(window,"scroll",c);n();r();setTimeout(function(){d.css("visibility","visible");},k);},show:function(){d.show();n();},hide:function(){d.hide();},dispose:function(){Dom.un(window,"resize",p);Dom.un(window,"scroll",c);},scrollTo:function(u,t){i(u,t);}};})();BB.provide({PageScroll:b});})();
